{"version":3,"sources":["webpack:////home/circleci/project/core/src/lang-html/config.ts","webpack:////home/circleci/project/platform/src/components/CodeMirror/index.js","webpack:////home/circleci/project/core/src/lang-html/index.ts","webpack:////home/circleci/project/core/src/lang-html/reader.ts","webpack:////home/circleci/project/core/src/unified/index.ts","webpack:////home/circleci/project/core/src/unified/unified.ts","webpack:////home/circleci/project/core/src/lang-html/sanitizeScript.ts","webpack:////home/circleci/project/platform/src/components/CodeMirror/codeMirror.js","webpack:////home/circleci/project/platform/src/components/CodeMirror/jsonlint.js","webpack:////home/circleci/project/platform/src/components/CodeMirror/custom-hint.js","webpack:////home/circleci/project/platform/src/components/SimpleMdEditor/editor.js","webpack:////home/circleci/project/platform/src/utils/workers/index.js","webpack:////home/circleci/project/platform/src/utils/json/lineNumbers.worker.js","webpack:////home/circleci/project/platform/src/components/JsonPathCacheContainer/index.js","webpack:////home/circleci/project/platform/src/components/PageLoading/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockAction/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockBarList/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockCallout/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockCardList/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockCardList/viewer.js","webpack:////home/circleci/project/platform/src/components/Highlight/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockCode/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHero/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHero/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHtml/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockImage/viewer.js","webpack:////home/circleci/project/platform/src/components/JsonSchemaViewer/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockJsonSchema/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockRef/viewer.js","webpack:////home/circleci/project/platform/src/components/JsonPathCacheParentContainer/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockList/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockTabs/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockTabs/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockContainer/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockText/viewer.js","webpack:////home/circleci/project/platform/src/utils/hoc/deepCompare.js","webpack:////home/circleci/project/platform/src/utils/hoc/pureCompare.js","webpack:////home/circleci/project/platform/src/components/FormSelect/index.js","webpack:////home/circleci/project/platform/src/components/DebounceContainer/index.js","webpack:////home/circleci/project/platform/src/components/SimpleMdEditor/index.js","webpack:////home/circleci/project/platform/src/components/MarkdownEditor/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/step_basics.js","webpack:////home/circleci/project/platform/src/components/EditorContentSection/index.js","webpack:////home/circleci/project/platform/src/utils/json/lineNumbers-worker.js","webpack:////home/circleci/project/platform/src/utils/codeMirror/index.js","webpack:////home/circleci/project/platform/src/utils/browser/index.js","webpack:////home/circleci/project/platform/src/components/CodeEditor/editor.js","webpack:////home/circleci/project/platform/src/components/CodeEditor/index.js","webpack:////home/circleci/project/platform/src/components/FormCodeEditor/index.js","webpack:////home/circleci/project/platform/src/components/FormInputMap/index.js","webpack:////home/circleci/project/platform/src/components/FormRadio/index.js","webpack:////home/circleci/project/platform/src/components/FormHttpBodyEditor/index.js","webpack:////home/circleci/project/platform/src/components/FormCheckbox/index.js","webpack:////home/circleci/project/platform/src/components/Modal/index.js","webpack:////home/circleci/project/platform/src/components/OAuth2TokenFormModal/index.js","webpack:////home/circleci/project/platform/src/components/EntityEditorGroup/index.js","webpack:////home/circleci/project/platform/src/components/UsedPathParams/index.js","webpack:////home/circleci/project/platform/src/components/LearnMore/index.js","webpack:////home/circleci/project/platform/src/components/UsedCtxVariables/index.js","webpack:////home/circleci/project/platform/src/components/UsedEnvironmentVariables/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/settings.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/auth/oauth2.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/auth/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/logic-location.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/captures.js","webpack:////home/circleci/project/platform/src/utils/httpsnippet/index.js","webpack:////home/circleci/project/platform/src/components/CodeGenerator/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/code-generation.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/headers.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/query.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/scripts.js","webpack:////home/circleci/project/platform/src/components/ScenarioContractTest/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/tests.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/index.js","webpack:////home/circleci/project/platform/src/components/ConnectedOperationSearch/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/path.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/method.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/host.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/http.js","webpack:////home/circleci/project/platform/src/components/RefBuilder/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/ref.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/script.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/index.js","webpack:////home/circleci/project/platform/src/components/JsonTree/index.js","webpack:////home/circleci/project/platform/src/components/Frame/documentContext.js","webpack:////home/circleci/project/platform/src/components/Frame/index.js","webpack:////home/circleci/project/platform/src/components/HttpBodyViewer/index.js","webpack:////home/circleci/project/platform/src/components/InputResultList/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioStats/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/scenario.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/http.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/script.js","webpack:////home/circleci/project/platform/src/components/Accordion/index.js","webpack:////home/circleci/project/platform/src/components/BarListItem/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/ref.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioLogs/log.js","webpack:////home/circleci/project/platform/src/components/ScenarioLogs/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/step.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHttp/common.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHttp/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockAccordion/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/Block/viewer.js","webpack:////home/circleci/project/platform/src/components/ScrollWrapper/index.js","webpack:////home/circleci/project/platform/src/components/SortableTreeList/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/PageSidebar/viewer.js","webpack:////home/circleci/project/platform/src/components/ScrollWrapper/hoc.js","webpack:////home/circleci/project/platform/src/format-hubs/components/PageNotFound/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/Page/viewer.js","webpack:////home/circleci/project/hub-builder/lib/client/containers/Page.js","webpack:////home/circleci/project/platform/src/format-hubs/utils/index.js","webpack:////home/circleci/project/platform/src/components/MarkdownViewer/index.js","webpack:////home/circleci/project/platform/src/utils/markdown/index.js","webpack:////home/circleci/project/platform/src/utils/highlight/index.js","webpack:////home/circleci/project/platform/src/components/HtmlViewer/index.js"],"names":["React","__importStar","__webpack_require__","exports","reactConfig","createElement","r","__webpack_exports__","_codeMirror__WEBPACK_IMPORTED_MODULE_0__","CodeMirror","__export","format","parse","slug","stringify","react","Unified","config_1","sanitizeScript_1","parseOptions","fragment","HTMLReader","[object Object]","html","create","use","data","config","processor","sanitize","sanitizeScript","Object","assign","processSync","contents","trim","unified","transformer","node","type","tagName","children","length","value","map","child","join","getTextContent","global","codemirror__WEBPACK_IMPORTED_MODULE_0__","codemirror__WEBPACK_IMPORTED_MODULE_0___default","n","_jsonlint__WEBPACK_IMPORTED_MODULE_1__","jsonlint","parser","trace","yy","symbols_","error","JSONString","STRING","JSONNumber","NUMBER","JSONNullLiteral","NULL","JSONBooleanLiteral","TRUE","FALSE","JSONText","JSONValue","EOF","JSONObject","JSONArray","{","}","JSONMemberList","JSONMember",":",",","[","]","JSONElementList","$accept","$end","terminals_","2","4","6","8","10","11","14","17","18","21","22","23","24","productions_","performAction","yytext","yyleng","yylineno","yystate","$$","_$","$0","this","$","replace","Number","push","table","3","5","7","9","12","13","15","16","1","19","20","25","defaultActions","parseError","str","hash","Error","input","self","stack","vstack","lstack","recovering","lexer","setInput","yylloc","yyloc","popStack","lex","token","symbol","preErrorSymbol","state","action","p","len","newState","expected","yyval","errStr","showPosition","text","match","line","loc","toString","Array","first_line","last_line","first_column","last_column","call","slice","_input","_more","_less","done","matched","conditionStack","ch","unput","more","less","pastInput","past","substr","upcomingInput","next","pre","c","tempMatch","index","lines","rules","_currentRules","i","options","flex","begin","condition","popState","pop","conditions","topState","pushState","yy_","$avoiding_name_collisions","YY_START","INITIAL","inclusive","Pos","scriptHint","editor","keywords","getToken","cur","getCursor","test","innerMode","getMode","string","end","start","tprop","context","list","found","globalScope","window","maybeAdd","displayText","lastIndexOf","arr","item","prototype","indexOf","arrayContains","gatherCompletions","obj","callback","name","forAllProps","base","additionalContext","useGlobalScope","jQuery","_","getCompletions","from","to","registerHelper","e","getTokenAt","inited","SimpleMdEditor","props","_this","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","togglePreview","setState","previewOn","isUndefined","preview","Component","id","createEditor","nextProps","simplemde","_this2","setTimeout","_this3","_this$props","codeMirrorInstance","extraKeys","onChange","hideToolbar","_objectWithoutProperties","init","marked","Renderer","defaultOptions","element","document","getElementById","initialValue","status","spellChecker","toolbar","className","title","SimpleMDE","codemirror","setOption","on","immediate","_this$props2","fill","react__WEBPACK_IMPORTED_MODULE_0___default","a","cn","fill-space","_MarkdownViewer__WEBPACK_IMPORTED_MODULE_6__","_this$props3","hide-toolbar","w-full","w-50","renderEditor","renderPreview","propTypes","PropTypes","placeholder","func","isRequired","bool","array","d","createWorker","webworker_promise__WEBPACK_IMPORTED_MODULE_0__","webworker_promise__WEBPACK_IMPORTED_MODULE_0___default","worker","WebworkerPromise","module","Worker","JsonPathCacheContainer","arguments","undefined","BaseComponent","cacheKey","cacheKeyProp","path","pathProp","targetExport","pure","_React$Component","JsonPathCache","apply","_inherits","_createClass","key","_this$props$jsonPathC","jsonPathContainerData","store","register","nextData","_this$props$jsonPathC2","baseProps","updateCache","cache","getCache","react_default","_extends","updated","t","v","forceUpdate","localStorage","debugRender","require","inject","_ref","jsonPathCache","ck","get","updateCacheFactory","basePath","PageLoading","_ref$className","_ref$children","_ref$text","extraProps","PageLoading_objectWithoutProperties","style","padding","Loader","PageLoading_extends","inline","size","active","inverted","BlockAction","onChangeData","_ref$theme","theme","_action$type","content","_action$route","route","isExternalLink","buildViewPath","actionElem","actionBgStyle","actionTextStyle","router","Button","primary","_objectSpread","dangerouslySetInnerHTML","__html","HubSearch","concat","BarItem","_props$child","_props$theme","childIndex","_child$actions","actions","relativePath","childTextStyle","actionIndex","actionTheme","BlockAction_viewer","BlockBarList","WrapperFactory","_props$data","_props$theme2","contentElem","childBgStyle","viewer_BarItem","viewer_extends","BlockCallout","_data$type","body","MarkdownViewer","href","target","startsWith","BlockCallout_viewer_extends","headerElem","contentClassName","defaultTheme","styles","color","background","backgroundColor","CardChild","_child$image","image","_child$route","computedTheme","computeTheme","cardBgStyle","cardTextStyle","src","BlockCardList","_props$header","header","_data$children","subtitle","baseBgStyle","baseTextStyle","viewer_CardChild","BlockCardList_viewer_extends","contentProps","Highlight","highlightCode","nodes","querySelectorAll","Prism","highlightElement","console","getDataLines","highlightRange","dataLines","isArray","forOwn","lineRange","dataLine","getPrettyJson","pretty","safeStringify","safeParse","highlight","languages","json","mode","lineNumbers","innerHTML","codeClassNames","preClassNames","line-numbers","code","data-line","ref","object","oneOfType","defaultProps","CodeBlock","_props$config","components_Highlight","BlockCode_viewer_extends","BlockHero","_data$actions","BlockHero_viewer_extends","HtmlBlock","plain","isEmpty","err","ErrorMessage","HtmlViewer","isObject","BlockHtml_viewer_extends","ImageBlock","maxWidth","String","maxHeight","centered","Image","alt","fluid","bordered","BlockImage_viewer_extends","isCombiner","prop","anyOf","oneOf","pickValidations","validations","enum","items","merge","omit","PropValidations","elems","k","hasOwnProperty","JsonSchemaViewer_typeof","includes","renderProp","_ref3","propType","childPropType","schemas","level","rowElems","parentName","propName","required","toggleExpandRow","expandedRows","defaultExpandedDepth","forApiDocs","hideInheritedFrom","jsonPath","hideRoot","position","rowKey","isBasic","expandable","expanded","has","all","properties","patternProperties","types","isString","requiredElem","typeElems","$ref","__error","reduce","acc","vt","validationCount","keys","pluralize","validationText","showVt","showInheritedFrom","__inheritedFrom","cursor-pointer","is-expanded","onClick","src_ui","icon","faCaretDown","faCaretRight","JSV-namelessType","description","JsonSchemaViewer_PropValidations","_ref2","_ref2$parsed","parsed","getProps","requiredElems","commonProps","renderProps","JsonSchemaViewer_objectSpread","renderCombiner","defaultType","_ref4","h","renderRowDivider","_ref5","_ref6","elem","set","renderSchema","schema","parseInt","_ref7","nextLevel","pick","JsonSchemaViewer","showExtra","showCopied","toggleShowExtra","update","copy","JSON","alert","message","dereferencedSchema","_this$props$schemas","limitPropertyCount","_this$props$defaultEx","emptyText","_this$props$emptyClas","emptyClass","emptyElem","isSchemaViewerEmpty","dereferenceSchema","definitions","_this$state","mergeAllOf","resolvers","defaultResolver","values","mergeSchemas","_toConsumableArray","propOverflowCount","dropRight","is-on","disabled","pr-1","faCopy","transparent","number","JsonSchemaBlock","getSchema","_this$props$data","_this$props$dereferen","dereferencedBlock","render","_this$props2$config","components_JsonSchemaViewer","expandedDepth","BlockJsonSchema_viewer_extends","observer","_props$block","block","_props$dereferencedBl","blockId","refBlock","find","connectedBlocks","refBlockDeref","cloneDeep","unionBy","Block_viewer","BlockRef_viewer_extends","log","registerLogger","JsonPathCacheParentContainer","basePathProp","childrenProp","JsonPathCacheParent","JsonPathCacheParentContainer_classCallCheck","JsonPathCacheParentContainer_possibleConstructorReturn","JsonPathCacheParentContainer_getPrototypeOf","JsonPathCacheParentContainer_inherits","JsonPathCacheParentContainer_createClass","registerChildren","isEqual","_props$jsonPathContai","JsonPathCacheParentContainer_objectWithoutProperties","childCacheIds","getChildrenCacheIds","debug","displayName","JsonPathCacheParentContainer_extends","HubBlockList","blockPath","parentPath","renderBlock","_this$props$blocks","blocks","_this$props$blocksDer","blocksDereferenced","_this$props$blockProp","blockProps","slugger","blockLength","isLast","BlockList_viewer_extends","blockDereferenced","blockIndex","isSolo","_this$props2$blocks","_this$props2$childCac","contentElems","forEach","getActiveTab","_props$cache","_props$childCacheIds","_props$blockPath","activeIndex","Math","max","activeTabId","activeTab","BlockTabs_objectSpread","handleChangeTab","TabsBlock","renderTabs","_this$props$cache","tabs","tab","Menu","Item","isNested","_activeTab$blocks","attached","secondary","pointing","BlockList_viewer","BlockTabs_viewer_extends","ContainerBlock","BlockContainer_viewer_extends","TextBlock","toLower","isNil","BlockText_viewer_typeof","BlockText_viewer_extends","customizer","objValue","othValue","isFunction","deepCompare","skipFunctions","WrappedComponent","_class2","_getPrototypeOf2","deepCompare_classCallCheck","_len","args","_key","deepCompare_possibleConstructorReturn","deepCompare_getPrototypeOf","componentWillMount","shouldComponentUpdate","same","isEqualWith","deepCompare_inherits","pureCompare","FormSelect","option","_this$props$input","_this$props2$input","big","_this$props2$defaultV","defaultValue","_this$props2$classNam","label","tip","_this$props2$options","multiple","allowAdditions","search","readOnly","warn","classNames","labelElem","isFixedWidth","computedOptions","without","NaN","uniq","v2","Label","FormSelect_extends","FormInputLabel","FormDropdown","selection","clearSearchOnSelect","defaultConvertToTarget","defaultConvertFromTarget","DebounceContainer","_props$convertForTarg","convertForTarget","_props$convertFromTar","convertFromTarget","_props$targetPropName","targetPropName","Debouncer","DebounceContainer_classCallCheck","DebounceContainer_possibleConstructorReturn","DebounceContainer_getPrototypeOf","onExternalValueChange","internal","externalValue","_persistChange","nextVal","persistChange","debounce","DebounceContainer_inherits","DebounceContainer_createClass","nextState","flush","computedProps","DebounceContainer_defineProperty","DebounceContainer_extends","default","SimpleMdEditor_extends","minHeight","info","MarkdownEditor","_cn","borderless","_this$props$value","_this$props$preview","editorProps","MarkdownEditor_objectWithoutProperties","MarkdownEditor_defineProperty","MarkdownEditor_extends","newValue","spellCheck","toolbarHidden","toolbarOnFocus","typeOptions","StepTypeSelector","typeWhitelist","step_basics_objectWithoutProperties","_i","o","components_FormSelect","step_basics_extends","step_basics_objectSpread","appStore","injectUi","ui","updateUi","_props$step","step","_props$typeWhitelist","basic","docsOpen","before","after","script","newAfterScript","method","url","RegExp","createScriptFromHTTP","FormInput","components_MarkdownEditor","markdownVal","workerInstance","EditorContentSection_objectSpread","_props$canToggle","canToggle","can-toggle","is-closed","isClosed","Icon","modeObjs","cpp","csharp","css","go","http","java","js","jsx","markdown","objectivec","perl","php","python","ruby","scala","shell","swift","xml","yaml","currentBrowser","Browser","findDOMNode","ReactDOM","normalizeLineEndings","setterFunc","getterFunc","buildRequest","root","scopes","proxy","headers","buildResponse","buildGlobalScope","envDisplayText","env","request","response","buildDoubleDollar","ctx","buildInput","output","buildOutput","conductor","tests","SL","specs","buildOptions","newOptions","autocompleteScopes","cm","execCommand","Pass","hintOptions","completeSingle","CodeMirrorComponent","isFocused","currentHighlightLineNumbers","getCodeMirrorInstance","unHighlightLineNumbers","lineNumber","codeMirror","eachLine","removeLineClass","highlightLineNumbers","addLineClass","getCodeMirror","focus","focusChanged","focused","onFocusChange","doc","getValue","scrollChanged","onScroll","getScrollInfo","codemirrorValueChanged","change","highlightPath","highlightLines","origin","leading","textareaNode","refs","textarea","fromTextArea","bind","setValue","toTextArea","preserveScrollPosition","prevScrollPosition","scrollTo","left","top","editor_typeof","optionName","propPath","opts","LineNumberWorker","postMessage","then","highlightStart","highlightEnd","y","charCoords","prevHighlightStart","prevHighlightEnd","catch","editorClassName","ReactCodeMirror--focused","autoComplete","any","CodeEditor","lastBroadcastedValue","broadcasting","val","parseValue","_this$props$mode","CodeEditor_typeof","_this$props$mode2","keyMap","tabSize","lineWrapping","lint","onFocus","onBlur","autoRefresh","modeObj","fullPlaceholder","CodeEditor_editor","safari","Alt-F","styleSelectedText","matchBrackets","autoCloseBrackets","highlightSelectionMatches","foldGutter","gutters","checkId","noDebounce","shouldUpdate","autogrow","maxLines","_this$props2$styles","classes","noFill","ErrorBoundary","FormCodeEditor","_props$mode","_props$className","FormCodeEditor_objectWithoutProperties","components_CodeEditor","FormCodeEditor_extends","FormInputMap","externalFields","fields","convertExternalValue","FormInputMap_typeof","FormInputMap_objectSpread","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","extra","FormInputMap_objectWithoutProperties","return","noUnset","handleUpdate","_this$props$className","_this$props$addText","addText","_this$props$namePlace","namePlaceholder","_this$props$valuePlac","valuePlaceholder","_this$props$meta","meta","renderFactory","noAdd","unset","onRemove","pullAt","field","submitting","FormRadio","checked","labelProps","FormRadio_objectWithoutProperties","FormRadio-labeled","Radio","FormRadio_extends","pr-2","FormHttpBodyEditor","raw","_ref$input","handleUpdateContentType","updateStep","contentType","newHeaders","contentTypeIndex","findIndex","toLowerCase","setHeaders","headerMap","FormHttpBodyEditor_objectSpread","Content-Type","bodyEditorContent","components_FormCodeEditor","components_FormInputMap","FormHttpBodyEditor_typeof","button","components_FormRadio","FormCheckbox","_props$labelPosition","labelPosition","labelClassname","labelStyle","checkboxProps","FormCheckbox_objectWithoutProperties","labelComponent","Checkbox","FormCheckbox_extends","SLModal","Modal_classCallCheck","Modal_possibleConstructorReturn","Modal_getPrototypeOf","handleOpen","onOpen","modalOpen","handleClose","onClose","forceOpen","initialOpen","triggerElem","contentFactory","triggerFactory","triggerButton","cancelButton","confirmButton","_this$props$size","_this$props$contentPr","otherProps","Modal_objectWithoutProperties","modalProps","open","Modal_extends","modalActions","Modal","trigger","Header","Content","Description","Actions","OAuth2TokenFormModal","tokenStore","_this$props$oauth","oauth2","_tokenStore$credentia","credentials","authorizationMethod","_tokenStore$authConfi","authConfig","isValid","isCreatingToken","updateCredentials","updateIsCreatingToken","clearError","_credentials$flow","flow","Modal_SLModal","negative","positive","loading","modal","onSuccess","success","Popup","wide","_ref8","_ref9","uniqBy","authUrlOptions","u","authorize_url","_ref10","_ref11","accessUrlOptions","access_token_url","redirectUri","_ref12","stores","oauthTokenStore","userService","projectService","userId","projectId","getOrRegisterInstance","EntityEditorGroup_objectSpread","isOpen","_props$contentClassNa","padded","warning","defaultOpen","_props$actions","tipFactory","onToggle","actionElems","EntityEditorGroup_extends","compact","is-active","is-open","hoverable","p-3","collectionEditorStore","editorId","getEditor","_ref$editor","showEmptyMessage","pathParams","currentStepPathParams","hasParams","notSetCount","newVal","newParams","updateCurrentStepPathParams","components_EntityEditorGroup","featuresToArticles","releasing","versioning","embedding","auth0","/documentation/variables-hubs","custom-css","$.ctx","contract-testing","referencing-other-scenarios","fair-use-billing","run-a-simple-mock-server","run-in-terminal","sending-http-requests","LearnMore","feature","faBook","variables","currentPopulatedCtxVariables","components_LearnMore","newVars","updateCurrentCtxVariables","currentEditor","currentPopulatedEnvVariables","obscuredFields","auth","matches","password","hasVariables","variable","updateVariables","Settings","standalone","currentEnv","modeling","components_FormCheckbox","skipPrism","settings_objectSpread","components_UsedPathParams","components_UsedCtxVariables","components_UsedEnvironmentVariables","components_OAuth2TokenFormModal","_props$ui","uiScope","currentVariables","activeToken","_props$input","tokens","tokenList","Table","tableData","headerRow","Row","HeaderCell","renderBodyRow","access_token","Cell","Dropdown","updateInputWithAuth","useHeader","oauth_access_token","preserveShared","preventDefault","scope","react_timeago_lib_default","date","created_at","minPeriod","textAlign","confirm","remove","Electron","OAuth1SignatureSelector","auth_extends","AuthSelector","AuthTab","renderAws","_input$auth","renderBasicAuth","_this$props2$ui","_input$auth2","showPassword","renderOAuth1","_this$props3$input","_input$auth3","auth_OAuth1SignatureSelector","_this$props4","_this$props4$input","_input$auth4","canUpdateAuth","auth_oauth2","auth_AuthSelector","username","consumerKey","consumerSecret","tokenSecret","nonceLength","signatureMethod","encode","LogicLocation","locations","logic_location_objectWithoutProperties","logic_location_extends","l","CapturesTabItem","captures","captureName","Captures","logicLocations","_ref2$fields","source","_splitLogicPath","splitLogicPath","targetLocation","location","targetPath","_splitLogicPath2","sourceLocation","sourcePath","logic_location","combinePathSelectors","codechoice","libraries","librarychoice","CodeGenerator_objectSpread","selected","head","snippet","_props$headers","_props$body","_props$auth","_props$params","params","_props$schemes","schemes","computedHeaders","postData","paramVals","replacedAuth","replaceVariables","basicAuth","btoa","toUpperCase","replacePathParams","HTTPSnippet","convert","buildSnippet","vars","connectedSpecs","newUrl","buildQueryString","query","sub","param","spec","scheme","components_CodeGenerator","HeadersTabItem","headerName","Headers","QueryTabItem","Query","ScriptsTabItem","hasScripts","scriptName","scripts_objectSpread","scenarioId","stepIndex","_ui$activeItem","activeItem","beforeScript","afterScript","handleItemClick","beforeName","afterName","showCheatsheet","rel","ScenarioContractTest","_this$props$method","_this$props$codes","codes","endpoint","_this$props$ui","_this$props$updateUi","activeCode","responseElems","connectedSpec","specId","getResponseSchemaFromOperation","toJS","linkToSpec","local","filePath","toUpper","stepId","ScenarioContractTest_objectSpread","AssertionOpSelector","tests_extends","TestsTabItem","testName","testIcons","assertions","contractTest","op","AssertionList","definedResponseCodes","_props$fields","assertionElems","locationDisabled","expectedDisabled","isNumber","newPath","tests_AssertionOpSelector","charAt","getEndpointFromSpecs","responses","as","components_ScenarioContractTest","collectionId","tests_AssertionList","defaultLogicLocations","Items","currentTab","whitelist","_ref2$auth","authorizationName","bodyName","marginTop","tabular","headers_HeadersTabItem","query_QueryTabItem","tests_TestsTabItem","captures_CapturesTabItem","scripts_ScriptsTabItem","_props$connectedSpecs","_props$autocompleteSc","_props$config2","tabs_headers","tabs_query","settings","tabs_auth","components_FormHttpBodyEditor","tabs_captures","scripts","tabs_objectSpread","code_generation","Segment","_props$step2","_props$ui2","_props$connectedSpecs2","_props$autocompleteSc2","_props$config3","_props$whitelist","tabs_Items","tabs_Content","ConnectedOperationSearch","ConnectedOperationSearch_classCallCheck","ConnectedOperationSearch_possibleConstructorReturn","ConnectedOperationSearch_getPrototypeOf","resetComponent","results","handleResultSelect","result","operations","valueProp","operation","handleSearchChange","protectedExpression","re","escapeRegExp","buildResults","isMatch","summary","operationId","specName","uncontrolledValue","contolledValue","inputVal","FormSearch","minCharacters","onSearchChange","onResultSelect","showResultsOnClick","endpoints","components_ConnectedOperationSearch","Method","Host","hosts","host","HttpEditor","tabWhitelist","first","currentTarget","targetUrl","processed","createURL","currentHost","protocol","currentPath","pathname","currentUrl","renderHeaderElems","_this$props$headerEle","headerElems","handleAddQuery","stepQuery","newQueryIndex","http_objectSpread","","handleOperationSelect","_this$props4$updateHo","updateHostOnSearch","_this$props4$step","createStepFromOperation","pathParamsToCtx","resetStepResults","_this$props5","urlQuery","getQueryParams","removeQueryString","_this$props6","hideMethod","_this$currentTarget2","isEmptyHosts","isEditingPath","input_method","cleanSlashes","input_path","last","trimEnd","input_tabs","RefBuilder","localData","fileFilter","routeDataTargets","initialSource","targets","projectStore","force","currentProjectId","currentFilePath","currentProjectPath","split","initial","builtRef","confirmed","onComplete","isComplete","pristine","renderConfirm","isUrlLoading","isUrlValid","urlError","initializing","selectedSource","popup","buttonProps","is-confirm","is-simple","is-negative","is-positive","tabIndex","buttons","b","RefBuilder_extends","renderReferenceLink","renderCurrentProject","searchParts","renderTargetSearch","flex-col","renderSourceDropdown","renderFileSearch","flex-1","renderExternal","externalUrl","handleChange","fetchExternalUrl","file","fileQuery","fileResults","loadFiles","setQuery","inputProps","category","showNoResults","renderLocal","routerStore","referenceLink","uri","URI","renderSource","component","sourceOptions","isTargetLoading","loadSpecData","targetResults","targetQuery","fileFormat","language","noResultsMessage","dirty","_this$props7","_this$props7$size","errorMessage","InjectedRefBuilder","refBuilderStore","RefBuilderWrapper","RefBuilder_classCallCheck","RefBuilder_possibleConstructorReturn","RefBuilder_getPrototypeOf","shortid","ref_objectSpread","collection","_props$headerElems","substring","stepRef","inputTab","handleInputTabClick","Message","components_RefBuilder","scenario","script_objectSpread","stepScript","Step","editorElem","input_extends","input_objectSpread","input_script","objType","JSONStringNode","keyName","stopPropagation","JSONNumberNode","JSONNullNode","JSONBooleanNode","truthString","grabNode","theNode","nodeType","aKey","Date","now","JsonTree_JSONObjectNode","JsonTree_JSONArrayNode","JsonTree_JSONStringNode","JsonTree_JSONNumberNode","JsonTree_JSONBooleanNode","JsonTree_JSONNullNode","expandedStateHandlerHOC","_class","_temp","JsonTree_classCallCheck","JsonTree_possibleConstructorReturn","JsonTree_getPrototypeOf","initialExpanded","handleClick","JsonTree_inherits","JsonTree_createClass","renderedChildren","itemString","needsChildNodes","JsonTree_extends","buildChildNodes","childNodes","JSONArrayNode","getChildNodes","getItemString","lenWord","childListStyle","display","cls","JSONObjectNode","JSONTree","rootNode","DocumentContext","Children","only","childContextTypes","Frame","renderFrameContents","Frame_assertThisInitialized","contentDocument","readyState","win","defaultView","parentView","documentContext_DocumentContext","unmountComponentAtNode","targetProps","clone","HttpBodyViewer","_props$contentType","_props$uiCache","uiCache","_props$uiCacheScope","uiCacheScope","updateUiCache","shouldEncode","noTypeSelector","isImage","isHtml","defaultRenderer","specialCase","dropdownElem","renderer","imgStr","fromCharCode","Uint8Array","components_Frame","width","height","frameBorder","JsonTree","wordWrap","InputResultList","sort","Input","ScenarioStats","_ref$items","Statistic","Group","widths","scenario_objectSpread","_props$result","_props$stats","stats","_ui$activeResultTab","activeResultTab","responseContentType","components_ScenarioStats","components_HttpBodyViewer","components_InputResultList","bodyChar","bodyClass","time","menuElem","output_http_objectSpread","logs","headerLines","requestString","assertionClass","expectedElem","pass","output_http_typeof","msg","details","passElem","failedElem","requestName","passCount","fitted","failCount","testTitleElem","output_script_objectSpread","script_typeof","AccordionWrapper","Accordion_classCallCheck","Accordion_possibleConstructorReturn","Accordion_getPrototypeOf","buildPanels","panel","exclusive","panels","isActive","isPanelActive","Accordion_defineProperty","togglePanel","_ui$panels","renderPanel","Accordion","Title","defaultActiveIndex","_nextProps$defaultAct","Accordion_objectWithoutProperties","accordionProps","Accordion_extends","arrayOf","Accordion_objectSpread","BarListItem","_ref$parts","parts","withBorder","is-loading","with-border","part","bgColor","d-n","hide","is-padded","with-bg","bg","border","computePanels","mappedScenarioNames","steps","flattenSteps","scenarioSteps","outputSteps","stepResult","_loop","_steps$index","resultData","stepResultMeta","components_BarListItem","tokenElem","stepToken","maxLength","stepName","skipToken","output_http","mappedNames","components_Accordion","output_extends","output_script","output_ref","ScenarioLog","_props$log","messages","m","log_typeof","ScenarioLogs_objectSpread","defaultActive","_ref$logs","menuElems","filtered","fatal","filter","f","activeLogs","logElems","ScenarioLogs_log","InjectedBasics","_editor$currentStep","currentStep","step_basics","step_extends","InjectedInput","_props$editor","_props$inputProps","_editor$currentStep2","ScenarioEditor_input","currentScenarioId","updateCurrentParsed","InjectedDebug","_ref5$editor","currentResult","currentRunning","components_EditorContentSection","components_ScenarioLogs","InjectedOutput","_ref8$editor","_ref8$outputProps","outputProps","indeterminate","ScenarioEditor_output","ScenarioStepEditor","initCollectionEditor","entity","_id","scenarios","dummy","getCollectionEditor","entityString","original","initEditor","entityType","editPath","embedded","stepPathParams","observable","dummy-0","stopStep","runStep","HttpBlock","_this$props$config","codegen","ScenarioEditor_step","BlockHttp_viewer_extends","AccordionBlock","BlockAccordion_viewer_classCallCheck","BlockAccordion_viewer_possibleConstructorReturn","BlockAccordion_viewer_getPrototypeOf","renderHeader","_this$props$header","renderPanels","accordionId","BlockAccordion_viewer_extends","BlockMap","barList","callout","cardList","hero","jsonSchema","container","accordion","HubBlockHeader","titleElem","_ref$header","hasToken","hasTitle","hasSubtitle","stringToColor","HubBlockContent","_props$contentProps","viewer_HubBlockHeader","anchorElem","anchor","aria-hidden","Block_viewer_extends","has-anchor","_props$block2","_props$blockDereferen","isPadded","RenderedBlock","elemConfig","buildBlockClassNames","blockConfig","ScrollWraper","ScrollWrapper_classCallCheck","ScrollWrapper_possibleConstructorReturn","ScrollWrapper_getPrototypeOf","handleScroll","evt","scroll","componentDidMount","targetId","onResize","addEventListener","componentWillUnmount","removeEventListener","buildMetaElems","metaElems","buildActionElems","SortableTreeList_defineProperty","_ref$item","ItemFactory","depth","parentActive","isMuted","isDivider","itemIcon","itemHref","text-active","is-muted","is-divider","is-link","targetClass","Folder","folder","_props$path","_props$currentPath","_props$parent","parent","handleToggleFolder","folderOpenIcon","folderClosedIcon","checkIsActive","checkIsChildActive","SortableTreeList_objectWithoutProperties","childActive","openByDefault","toggledPath","noToggle","folderIcon","iconOnLeft","toggleElem","opacity-35","text-right","mr-3","folderInner","select-none","mb-3 lg:mb-2 text-grey-dark uppercase tracking-wide text-sm lg:text-xs","has-content","hasContent","has-children","is-active text-active","depthClass","child-active","no-toggle","SortableTreeList_Items","SortableTreeList_extends","_props$depth","_props$parent2","SortableTreeList_Folder","SortableTreeList_Item","SortableTreeList","toggled","_this$props$currentPa","_this$props2$data","_this$props2$actions","_this$props2$htmlId","htmlId","_this$props2$currentP","viewer","TreeList--viewer","is-inverted","SortableTreeList_objectSpread","HubSidebar","renderOverlay","role","isMobile-open","showSidebar","isMobile-closed","renderWrapper","sidebarTree","_this$props2$folderOp","_this$props2$folderCl","watchScroll","checkSidebarItemIsActive","checkSidebarChildIsActive","whitelabel","namespace","activePagePath","navHeight","pinned","wrapperElem","pageHeader","offsetHeight","rect","getBoundingClientRect","innerHeight","sidebarStyles","viewer_objectSpread","bottom","intersection","classList","components_SortableTreeList","HubBranding","ScrollWrapper","hoc_extends","scrollProps","scrollWrapper","PageNotFound","GithubSlugger","smoothscroll","polyfill","HubPage","scrollToHash","reset","lastLocation","wrapper","behavior","hasSidebar","crumbs","_store$activePage","activePage","_store$activeSubpage","activeSubpage","_store$activeBlocks","activeBlocks","currentParsedPath","currentRelativePath","_store$entityStore","entityStore","isDereferencing","page","components_PageNotFound","buildTextBlockForPage","pagePath","has-sidebar","PageSidebar_viewer","authRequired","isAuthRequired","isLoggedIn","Cookies","pageStore","lookup","activate","deactivate","Dimmer","Page_viewer","InjectedHubPage","withRouteData","routeData","lib","Page_extends","globalConfig","_props$classNames","computedClassNames","isOnCanvas","canvas","isStandalone","isOutlined","outlined","hasHeader","solo","nested","paddedInner","_ref6$basePath","_ref6$pagePath","_ref6$page","childPath","fullPath","trimStart","baseTheme","_ref7$theme","_ref7$defaultTheme","isHubBuilder","getConfigVar","_ref$innerClassName","innerClassName","_ref$style","_ref$options","_ref$context","_typeof","_HtmlViewer__WEBPACK_IMPORTED_MODULE_4__","BaseMarkdown","anchors","markdown_it__WEBPACK_IMPORTED_MODULE_0__","markdown_it__WEBPACK_IMPORTED_MODULE_0___default","markdown_it_video__WEBPACK_IMPORTED_MODULE_1__","markdown_it_video__WEBPACK_IMPORTED_MODULE_1___default","markdown_it_task_checkbox__WEBPACK_IMPORTED_MODULE_2__","markdown_it_task_checkbox__WEBPACK_IMPORTED_MODULE_2___default","_logging__WEBPACK_IMPORTED_MODULE_3__","_highlight__WEBPACK_IMPORTED_MODULE_4__","escapeHref","unsafe","MarkdownIt","linkify","typographer","lang","grammar","markup","MarkdownItVideo","MarkdownItTaskCheckbox","divWrap","divClass","idPrefix","ulClass","liClass","defaultLinkRender","link_open","idx","renderToken","link","titleIndex","attrIndex","attrs","escapeTitle","isAbsolute","hrefIndex","targetIndex","attrPush","prismjs_components_prism_core__WEBPACK_IMPORTED_MODULE_0__","prismjs_components_prism_core__WEBPACK_IMPORTED_MODULE_0___default","allowRawHTML","htmlReader","inputFieldTypes","Anchor","_platform_utils_router_Link__WEBPACK_IMPORTED_MODULE_6__","_core_ui__WEBPACK_IMPORTED_MODULE_5__","faLink","anchoredComponents","h1","h2","h3","Script","scriptProps","instance","appendChild","el","_ref5$context","_ref5$options","components","computed","svg","defaultChecked","select","toReact"],"mappings":"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","file":"templates/client-containers-Page.d347fc41.js","sourcesContent":["import * as React from 'react';\n\nexport const reactConfig = {\n  createElement: React.createElement,\n};\n","// import React from 'react';\n// import { asyncComponent } from 'react-async-component';\n\n// import PageLoading from '../PageLoading';\n\nimport CodeMirror from './codeMirror';\n\n// const CodeMirror = asyncComponent({\n//   serverMode: 'defer',\n//   resolve: () => System.import('./codeMirror'),\n//   LoadingComponent: () => <PageLoading inverted={false} />, // Optional\n//   ErrorComponent: ({ error }) => <div>{error.message}</div>, // Optional\n// });\n\n// const CodeMirror = dynamic({\n//   ssr: false,\n\n//   loading: () => <PageLoading inverted={false} />,\n\n//   modules: props => {\n//     const components = {\n//       codeMirrorInstance: import('./codeMirror'),\n//     };\n\n//     return components;\n//   },\n\n//   render: (props, { codeMirrorInstance }) => {\n//     const { render } = props;\n//     return render(codeMirrorInstance);\n//   },\n// });\n\nexport default CodeMirror;\n","export * from './reader';\nexport * from './config';\n","const format = require('rehype-format');\nconst parse = require('rehype-parse');\nconst slug = require('rehype-slug');\nconst stringify = require('rehype-stringify');\nconst react = require('rehype-react');\n\nimport { ILangReader } from '@core/lang';\n\nimport * as Unified from '@core/unified';\nimport * as Unist from '@core/unist';\n\nimport { reactConfig } from './config';\nimport { sanitizeScript } from './sanitizeScript';\n\nconst parseOptions = { fragment: true };\n\ninterface IReactConfig {\n  createElement(): void;\n  components: {};\n}\n\ninterface IToReactConfig {\n  react?: IReactConfig;\n  sanitize?: boolean;\n}\n\nexport class HTMLReader implements ILangReader {\n  public fromLang(html: string): Unist.IParent {\n    return Unified.create()\n      .use(parse)\n      .parse(html);\n  }\n\n  public toLang(data: any): string {\n    return Unified.create()\n      .use(stringify)\n      .stringify(data);\n  }\n\n  public toReact(html: string, config: IToReactConfig = {}): any {\n    const processor = Unified.create().use(parse, parseOptions);\n\n    if (config.sanitize) {\n      processor.use(sanitizeScript);\n    }\n\n    processor\n      .use(stringify)\n      .use(react, Object.assign(reactConfig, config.react))\n      .use(slug);\n\n    return processor.processSync(html).contents;\n  }\n\n  public sanitize(html: string): string {\n    return Unified.create()\n      .use(parse, parseOptions)\n      .use(sanitizeScript)\n      .use(stringify)\n      .use(slug)\n      .processSync(html)\n      .contents.trim();\n  }\n\n  public format(html: string): string {\n    return Unified.create()\n      .use(parse, parseOptions)\n      .use(stringify)\n      .use(format)\n      .processSync(html)\n      .contents.trim();\n  }\n}\n","export * from './unified';\n","const unified = require('unified');\n\nexport const create = () => {\n  return unified();\n};\n","import * as Unist from '@core/unist';\n\nfunction getTextContent(node: Unist.IElement) {\n  return node.children.map(child => (child as Unist.IText).value).join('\\n');\n}\n\nfunction transformer(node: Unist.INode) {\n  if (node.type === 'element' && (node as Unist.IElement).tagName === 'script') {\n    if ((node as Unist.IElement).children.length > 0) {\n      node.type = 'comment';\n      (node as Unist.IComment).value = `<script>${getTextContent(node as Unist.IElement)}</script>`;\n    } else {\n      node.type = 'text';\n      (node as Unist.IText).value = '';\n    }\n  } else if ('children' in node && (node as Unist.IParent).children.length > 0) {\n    for (const child of (node as Unist.IParent).children) {\n      transformer(child);\n    }\n  }\n}\n\nexport function sanitizeScript() {\n  return transformer;\n}\n","/* eslint-disable */\n\nimport CodeMirror from 'codemirror';\n\n// global required by json-lint code mirror lib imported below\nimport jsonlint from './jsonlint';\nglobal.jsonlint = jsonlint;\n\n// global required by javascript-lint code mirror lib imported below\n// if (typeof window !== 'undefined') {\n//   import('jshint' /* webpackChunkName: 'jshint' */)\n//     .then(({ JSHINT }) => {\n//       window.JSHINT = JSHINT;\n//       require('codemirror/addon/lint/javascript-lint');\n//     })\n//     .catch(error => {\n//       console.log('Error loading jshint:', error);\n//     });\n// }\n\nimport 'codemirror/addon/display/autorefresh';\n\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/go/go';\nimport 'codemirror/mode/http/http';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/jsx/jsx';\nimport 'codemirror/mode/markdown/markdown';\nimport 'codemirror/mode/perl/perl';\nimport 'codemirror/mode/php/php';\nimport 'codemirror/mode/python/python';\nimport 'codemirror/mode/ruby/ruby';\nimport 'codemirror/mode/shell/shell';\nimport 'codemirror/mode/swift/swift';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/diff/diff';\n\nimport 'codemirror/addon/fold/foldcode';\nimport 'codemirror/addon/fold/foldgutter';\nimport 'codemirror/addon/fold/brace-fold';\nimport 'codemirror/addon/fold/xml-fold';\nimport 'codemirror/addon/fold/indent-fold';\nimport 'codemirror/addon/fold/markdown-fold';\n\nimport 'codemirror/addon/hint/show-hint';\nimport './custom-hint';\n\nimport 'codemirror/addon/dialog/dialog';\nimport 'codemirror/addon/search/searchcursor';\nimport 'codemirror/addon/search/search';\nimport 'codemirror/addon/search/match-highlighter';\nimport 'codemirror/addon/search/matchesonscrollbar';\nimport 'codemirror/addon/search/jump-to-line';\nimport 'codemirror/addon/scroll/annotatescrollbar';\n\nimport 'codemirror/addon/display/placeholder';\nimport 'codemirror/addon/comment/comment';\n\nimport 'codemirror/addon/edit/matchbrackets';\nimport 'codemirror/addon/edit/closebrackets';\n\nimport 'codemirror/addon/lint/lint';\nimport 'codemirror/addon/lint/json-lint';\n\nimport 'codemirror/keymap/sublime';\nimport 'codemirror/keymap/emacs';\nimport 'codemirror/keymap/vim';\n\n// FOR SIMPLEMDE\nimport 'codemirror/addon/edit/continuelist';\nimport 'codemirror/addon/display/fullscreen';\nimport 'codemirror/addon/mode/overlay';\nimport 'codemirror/addon/selection/mark-selection';\nimport 'codemirror/mode/gfm/gfm';\n\nexport default CodeMirror;\n","/* eslint-disable */\n/* Jison generated parser */\n\nvar parser = {\n  trace: function trace() {},\n  yy: {},\n  symbols_: {\n    error: 2,\n    JSONString: 3,\n    STRING: 4,\n    JSONNumber: 5,\n    NUMBER: 6,\n    JSONNullLiteral: 7,\n    NULL: 8,\n    JSONBooleanLiteral: 9,\n    TRUE: 10,\n    FALSE: 11,\n    JSONText: 12,\n    JSONValue: 13,\n    EOF: 14,\n    JSONObject: 15,\n    JSONArray: 16,\n    '{': 17,\n    '}': 18,\n    JSONMemberList: 19,\n    JSONMember: 20,\n    ':': 21,\n    ',': 22,\n    '[': 23,\n    ']': 24,\n    JSONElementList: 25,\n    $accept: 0,\n    $end: 1,\n  },\n  terminals_: {\n    2: 'error',\n    4: 'STRING',\n    6: 'NUMBER',\n    8: 'NULL',\n    10: 'TRUE',\n    11: 'FALSE',\n    14: 'EOF',\n    17: '{',\n    18: '}',\n    21: ':',\n    22: ',',\n    23: '[',\n    24: ']',\n  },\n  productions_: [\n    0,\n    [3, 1],\n    [5, 1],\n    [7, 1],\n    [9, 1],\n    [9, 1],\n    [12, 2],\n    [13, 1],\n    [13, 1],\n    [13, 1],\n    [13, 1],\n    [13, 1],\n    [13, 1],\n    [15, 2],\n    [15, 3],\n    [20, 3],\n    [19, 1],\n    [19, 3],\n    [16, 2],\n    [16, 3],\n    [25, 1],\n    [25, 3],\n  ],\n  performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {\n    var $0 = $$.length - 1;\n    switch (yystate) {\n      case 1: // replace escaped characters with actual character\n        this.$ = yytext\n          .replace(/\\\\(\\\\|\")/g, '$' + '1')\n          .replace(/\\\\n/g, '\\n')\n          .replace(/\\\\r/g, '\\r')\n          .replace(/\\\\t/g, '\\t')\n          .replace(/\\\\v/g, '\\v')\n          .replace(/\\\\f/g, '\\f')\n          .replace(/\\\\b/g, '\\b');\n\n        break;\n      case 2:\n        this.$ = Number(yytext);\n        break;\n      case 3:\n        this.$ = null;\n        break;\n      case 4:\n        this.$ = true;\n        break;\n      case 5:\n        this.$ = false;\n        break;\n      case 6:\n        return (this.$ = $$[$0 - 1]);\n        break;\n      case 13:\n        this.$ = {};\n        break;\n      case 14:\n        this.$ = $$[$0 - 1];\n        break;\n      case 15:\n        this.$ = [$$[$0 - 2], $$[$0]];\n        break;\n      case 16:\n        this.$ = {};\n        this.$[$$[$0][0]] = $$[$0][1];\n        break;\n      case 17:\n        this.$ = $$[$0 - 2];\n        $$[$0 - 2][$$[$0][0]] = $$[$0][1];\n        break;\n      case 18:\n        this.$ = [];\n        break;\n      case 19:\n        this.$ = $$[$0 - 1];\n        break;\n      case 20:\n        this.$ = [$$[$0]];\n        break;\n      case 21:\n        this.$ = $$[$0 - 2];\n        $$[$0 - 2].push($$[$0]);\n        break;\n    }\n  },\n  table: [\n    {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      12: 1,\n      13: 2,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15],\n    },\n    {\n      1: [3],\n    },\n    {\n      14: [1, 16],\n    },\n    {\n      14: [2, 7],\n      18: [2, 7],\n      22: [2, 7],\n      24: [2, 7],\n    },\n    {\n      14: [2, 8],\n      18: [2, 8],\n      22: [2, 8],\n      24: [2, 8],\n    },\n    {\n      14: [2, 9],\n      18: [2, 9],\n      22: [2, 9],\n      24: [2, 9],\n    },\n    {\n      14: [2, 10],\n      18: [2, 10],\n      22: [2, 10],\n      24: [2, 10],\n    },\n    {\n      14: [2, 11],\n      18: [2, 11],\n      22: [2, 11],\n      24: [2, 11],\n    },\n    {\n      14: [2, 12],\n      18: [2, 12],\n      22: [2, 12],\n      24: [2, 12],\n    },\n    {\n      14: [2, 3],\n      18: [2, 3],\n      22: [2, 3],\n      24: [2, 3],\n    },\n    {\n      14: [2, 4],\n      18: [2, 4],\n      22: [2, 4],\n      24: [2, 4],\n    },\n    {\n      14: [2, 5],\n      18: [2, 5],\n      22: [2, 5],\n      24: [2, 5],\n    },\n    {\n      14: [2, 1],\n      18: [2, 1],\n      21: [2, 1],\n      22: [2, 1],\n      24: [2, 1],\n    },\n    {\n      14: [2, 2],\n      18: [2, 2],\n      22: [2, 2],\n      24: [2, 2],\n    },\n    {\n      3: 20,\n      4: [1, 12],\n      18: [1, 17],\n      19: 18,\n      20: 19,\n    },\n    {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      13: 23,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15],\n      24: [1, 21],\n      25: 22,\n    },\n    {\n      1: [2, 6],\n    },\n    {\n      14: [2, 13],\n      18: [2, 13],\n      22: [2, 13],\n      24: [2, 13],\n    },\n    {\n      18: [1, 24],\n      22: [1, 25],\n    },\n    {\n      18: [2, 16],\n      22: [2, 16],\n    },\n    {\n      21: [1, 26],\n    },\n    {\n      14: [2, 18],\n      18: [2, 18],\n      22: [2, 18],\n      24: [2, 18],\n    },\n    {\n      22: [1, 28],\n      24: [1, 27],\n    },\n    {\n      22: [2, 20],\n      24: [2, 20],\n    },\n    {\n      14: [2, 14],\n      18: [2, 14],\n      22: [2, 14],\n      24: [2, 14],\n    },\n    {\n      3: 20,\n      4: [1, 12],\n      20: 29,\n    },\n    {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      13: 30,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15],\n    },\n    {\n      14: [2, 19],\n      18: [2, 19],\n      22: [2, 19],\n      24: [2, 19],\n    },\n    {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      13: 31,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15],\n    },\n    {\n      18: [2, 17],\n      22: [2, 17],\n    },\n    {\n      18: [2, 15],\n      22: [2, 15],\n    },\n    {\n      22: [2, 21],\n      24: [2, 21],\n    },\n  ],\n  defaultActions: {\n    16: [2, 6],\n  },\n  parseError: function parseError(str, hash) {\n    throw new Error(str);\n  },\n  parse: function parse(input) {\n    var self = this,\n      stack = [0],\n      vstack = [null], // semantic value stack\n      lstack = [], // location stack\n      table = this.table,\n      yytext = '',\n      yylineno = 0,\n      yyleng = 0,\n      recovering = 0,\n      TERROR = 2,\n      EOF = 1;\n\n    //this.reductionCount = this.shiftCount = 0;\n\n    this.lexer.setInput(input);\n    this.lexer.yy = this.yy;\n    this.yy.lexer = this.lexer;\n    if (typeof this.lexer.yylloc == 'undefined') this.lexer.yylloc = {};\n    var yyloc = this.lexer.yylloc;\n    lstack.push(yyloc);\n\n    if (typeof this.yy.parseError === 'function') this.parseError = this.yy.parseError;\n\n    function popStack(n) {\n      stack.length = stack.length - 2 * n;\n      vstack.length = vstack.length - n;\n      lstack.length = lstack.length - n;\n    }\n\n    function lex() {\n      var token;\n      token = self.lexer.lex() || 1; // $end = 1\n      // if token isn't its numeric value, convert\n      if (typeof token !== 'number') {\n        token = self.symbols_[token] || token;\n      }\n      return token;\n    }\n\n    var symbol,\n      preErrorSymbol,\n      state,\n      action,\n      a,\n      r,\n      yyval = {},\n      p,\n      len,\n      newState,\n      expected;\n    while (true) {\n      // retreive state number from top of stack\n      state = stack[stack.length - 1];\n\n      // use default actions if available\n      if (this.defaultActions[state]) {\n        action = this.defaultActions[state];\n      } else {\n        if (symbol == null) symbol = lex();\n        // read action for current state and first input\n        action = table[state] && table[state][symbol];\n      }\n\n      // handle parse error\n      _handle_error: if (typeof action === 'undefined' || !action.length || !action[0]) {\n        if (!recovering) {\n          // Report error\n          expected = [];\n          for (p in table[state])\n            if (this.terminals_[p] && p > 2) {\n              expected.push(\"'\" + this.terminals_[p] + \"'\");\n            }\n          var errStr = '';\n          if (this.lexer.showPosition) {\n            errStr =\n              'Parse error on line ' +\n              (yylineno + 1) +\n              ':\\n' +\n              this.lexer.showPosition() +\n              '\\nExpecting ' +\n              expected.join(', ') +\n              \", got '\" +\n              this.terminals_[symbol] +\n              \"'\";\n          } else {\n            errStr =\n              'Parse error on line ' +\n              (yylineno + 1) +\n              ': Unexpected ' +\n              (symbol == 1 /*EOF*/\n                ? 'end of input'\n                : \"'\" + (this.terminals_[symbol] || symbol) + \"'\");\n          }\n          this.parseError(errStr, {\n            text: this.lexer.match,\n            token: this.terminals_[symbol] || symbol,\n            line: this.lexer.yylineno,\n            loc: yyloc,\n            expected: expected,\n          });\n        }\n\n        // just recovered from another error\n        if (recovering == 3) {\n          if (symbol == EOF) {\n            throw new Error(errStr || 'Parsing halted.');\n          }\n\n          // discard current lookahead and grab another\n          yyleng = this.lexer.yyleng;\n          yytext = this.lexer.yytext;\n          yylineno = this.lexer.yylineno;\n          yyloc = this.lexer.yylloc;\n          symbol = lex();\n        }\n\n        // try to recover from error\n        while (1) {\n          // check for error recovery rule in this state\n          if (TERROR.toString() in table[state]) {\n            break;\n          }\n          if (state == 0) {\n            throw new Error(errStr || 'Parsing halted.');\n          }\n          popStack(1);\n          state = stack[stack.length - 1];\n        }\n\n        preErrorSymbol = symbol; // save the lookahead token\n        symbol = TERROR; // insert generic error symbol as new lookahead\n        state = stack[stack.length - 1];\n        action = table[state] && table[state][TERROR];\n        recovering = 3; // allow 3 real symbols to be shifted before reporting a new error\n      }\n\n      // this shouldn't happen, unless resolve defaults are off\n      if (action[0] instanceof Array && action.length > 1) {\n        throw new Error(\n          'Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol\n        );\n      }\n\n      switch (action[0]) {\n        case 1: // shift\n          //this.shiftCount++;\n\n          stack.push(symbol);\n          vstack.push(this.lexer.yytext);\n          lstack.push(this.lexer.yylloc);\n          stack.push(action[1]); // push state\n          symbol = null;\n          if (!preErrorSymbol) {\n            // normal execution/no error\n            yyleng = this.lexer.yyleng;\n            yytext = this.lexer.yytext;\n            yylineno = this.lexer.yylineno;\n            yyloc = this.lexer.yylloc;\n            if (recovering > 0) recovering--;\n          } else {\n            // error just occurred, resume old lookahead f/ before error\n            symbol = preErrorSymbol;\n            preErrorSymbol = null;\n          }\n          break;\n\n        case 2: // reduce\n          //this.reductionCount++;\n\n          len = this.productions_[action[1]][1];\n\n          // perform semantic action\n          yyval.$ = vstack[vstack.length - len]; // default to $$ = $1\n          // default location, uses first token for firsts, last for lasts\n          yyval._$ = {\n            first_line: lstack[lstack.length - (len || 1)].first_line,\n            last_line: lstack[lstack.length - 1].last_line,\n            first_column: lstack[lstack.length - (len || 1)].first_column,\n            last_column: lstack[lstack.length - 1].last_column,\n          };\n          r = this.performAction.call(\n            yyval,\n            yytext,\n            yyleng,\n            yylineno,\n            this.yy,\n            action[1],\n            vstack,\n            lstack\n          );\n\n          if (typeof r !== 'undefined') {\n            return r;\n          }\n\n          // pop off stack\n          if (len) {\n            stack = stack.slice(0, -1 * len * 2);\n            vstack = vstack.slice(0, -1 * len);\n            lstack = lstack.slice(0, -1 * len);\n          }\n\n          stack.push(this.productions_[action[1]][0]); // push nonterminal (reduce)\n          vstack.push(yyval.$);\n          lstack.push(yyval._$);\n          // goto new state = table[STATE][NONTERMINAL]\n          newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n          stack.push(newState);\n          break;\n\n        case 3: // accept\n          return true;\n      }\n    }\n\n    return true;\n  },\n};\n/* Jison generated lexer */\nvar lexer = (function() {\n  var lexer = {\n    EOF: 1,\n    parseError: function parseError(str, hash) {\n      if (this.yy.parseError) {\n        this.yy.parseError(str, hash);\n      } else {\n        throw new Error(str);\n      }\n    },\n    setInput: function(input) {\n      this._input = input;\n      this._more = this._less = this.done = false;\n      this.yylineno = this.yyleng = 0;\n      this.yytext = this.matched = this.match = '';\n      this.conditionStack = ['INITIAL'];\n      this.yylloc = {\n        first_line: 1,\n        first_column: 0,\n        last_line: 1,\n        last_column: 0,\n      };\n      return this;\n    },\n    input: function() {\n      var ch = this._input[0];\n      this.yytext += ch;\n      this.yyleng++;\n      this.match += ch;\n      this.matched += ch;\n      var lines = ch.match(/\\n/);\n      if (lines) this.yylineno++;\n      this._input = this._input.slice(1);\n      return ch;\n    },\n    unput: function(ch) {\n      this._input = ch + this._input;\n      return this;\n    },\n    more: function() {\n      this._more = true;\n      return this;\n    },\n    less: function(n) {\n      this._input = this.match.slice(n) + this._input;\n    },\n    pastInput: function() {\n      var past = this.matched.substr(0, this.matched.length - this.match.length);\n      return (past.length > 20 ? '...' : '') + past.substr(-20).replace(/\\n/g, '');\n    },\n    upcomingInput: function() {\n      var next = this.match;\n      if (next.length < 20) {\n        next += this._input.substr(0, 20 - next.length);\n      }\n      return (next.substr(0, 20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, '');\n    },\n    showPosition: function() {\n      var pre = this.pastInput();\n      var c = new Array(pre.length + 1).join('-');\n      return pre + this.upcomingInput() + '\\n' + c + '^';\n    },\n    next: function() {\n      if (this.done) {\n        return this.EOF;\n      }\n      if (!this._input) this.done = true;\n\n      var token, match, tempMatch, index, col, lines;\n      if (!this._more) {\n        this.yytext = '';\n        this.match = '';\n      }\n      var rules = this._currentRules();\n      for (var i = 0; i < rules.length; i++) {\n        tempMatch = this._input.match(this.rules[rules[i]]);\n        if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n          match = tempMatch;\n          index = i;\n          if (!this.options.flex) break;\n        }\n      }\n      if (match) {\n        lines = match[0].match(/\\n.*/g);\n        if (lines) this.yylineno += lines.length;\n        this.yylloc = {\n          first_line: this.yylloc.last_line,\n          last_line: this.yylineno + 1,\n          first_column: this.yylloc.last_column,\n          last_column: lines\n            ? lines[lines.length - 1].length - 1\n            : this.yylloc.last_column + match[0].length,\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.yyleng = this.yytext.length;\n        this._more = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(\n          this,\n          this.yy,\n          this,\n          rules[index],\n          this.conditionStack[this.conditionStack.length - 1]\n        );\n        if (this.done && this._input) this.done = false;\n        if (token) return token;\n        else return;\n      }\n      if (this._input === '') {\n        return this.EOF;\n      } else {\n        this.parseError(\n          'Lexical error on line ' +\n            (this.yylineno + 1) +\n            '. Unrecognized text.\\n' +\n            this.showPosition(),\n          {\n            text: '',\n            token: null,\n            line: this.yylineno,\n          }\n        );\n      }\n    },\n    lex: function lex() {\n      var r = this.next();\n      if (typeof r !== 'undefined') {\n        return r;\n      } else {\n        return this.lex();\n      }\n    },\n    begin: function begin(condition) {\n      this.conditionStack.push(condition);\n    },\n    popState: function popState() {\n      return this.conditionStack.pop();\n    },\n    _currentRules: function _currentRules() {\n      return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n    },\n    topState: function() {\n      return this.conditionStack[this.conditionStack.length - 2];\n    },\n    pushState: function begin(condition) {\n      this.begin(condition);\n    },\n  };\n  lexer.options = {};\n  lexer.performAction = function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {\n    var YYSTATE = YY_START;\n    switch ($avoiding_name_collisions) {\n      case 0:\n        /* skip whitespace */\n        break;\n      case 1:\n        return 6;\n        break;\n      case 2:\n        yy_.yytext = yy_.yytext.substr(1, yy_.yyleng - 2);\n        return 4;\n        break;\n      case 3:\n        return 17;\n        break;\n      case 4:\n        return 18;\n        break;\n      case 5:\n        return 23;\n        break;\n      case 6:\n        return 24;\n        break;\n      case 7:\n        return 22;\n        break;\n      case 8:\n        return 21;\n        break;\n      case 9:\n        return 10;\n        break;\n      case 10:\n        return 11;\n        break;\n      case 11:\n        return 8;\n        break;\n      case 12:\n        return 14;\n        break;\n      case 13:\n        return 'INVALID';\n        break;\n    }\n  };\n  lexer.rules = [\n    /^(?:\\s+)/,\n    /^(?:(-?([0-9]|[1-9][0-9]+))(\\.[0-9]+)?([eE][-+]?[0-9]+)?\\b)/,\n    /^(?:\"(?:\\\\[\\\\\"bfnrt/]|\\\\u[a-fA-F0-9]{4}|[^\\\\\\0-\\x09\\x0a-\\x1f\"])*\")/,\n    /^(?:\\{)/,\n    /^(?:\\})/,\n    /^(?:\\[)/,\n    /^(?:\\])/,\n    /^(?:,)/,\n    /^(?::)/,\n    /^(?:true\\b)/,\n    /^(?:false\\b)/,\n    /^(?:null\\b)/,\n    /^(?:$)/,\n    /^(?:.)/,\n  ];\n  lexer.conditions = {\n    INITIAL: {\n      rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\n      inclusive: true,\n    },\n  };\n\n  return lexer;\n})();\nparser.lexer = lexer;\n\nexport default parser;\n","// adapted from the official javascript-hint addon\n\n/* eslint-disable */\n\nimport CodeMirror from 'codemirror';\n\nlet Pos = CodeMirror.Pos;\n\nfunction arrayContains(arr, item) {\n  if (!Array.prototype.indexOf) {\n    let i = arr.length;\n    while (i--) {\n      if (arr[i] === item) {\n        return true;\n      }\n    }\n    return false;\n  }\n  return arr.indexOf(item) != -1;\n}\n\nfunction scriptHint(editor, keywords, getToken, options) {\n  // Find the token at the cursor\n  let cur = editor.getCursor();\n  let token = getToken(editor, cur);\n  if (/\\b(?:string|comment)\\b/.test(token.type)) return;\n  token.state = CodeMirror.innerMode(editor.getMode(), token.state).state;\n\n  // If it's not a 'word-style' token, ignore the token.\n  if (!/^[\\w$_]*$/.test(token.string)) {\n    token = {\n      start: cur.ch,\n      end: cur.ch,\n      string: '',\n      state: token.state,\n      type: token.string == '.' ? 'property' : null,\n    };\n  } else if (token.end > cur.ch) {\n    token.end = cur.ch;\n    token.string = token.string.slice(0, cur.ch - token.start);\n  }\n\n  let tprop = token;\n  // If it is a property, find out what it is a property of.\n  while (tprop.type == 'property') {\n    tprop = getToken(editor, Pos(cur.line, tprop.start));\n    if (tprop.string != '.') return;\n    tprop = getToken(editor, Pos(cur.line, tprop.start));\n    if (!context) var context = [];\n    context.push(tprop);\n  }\n  return {\n    list: getCompletions(token, context, keywords, options),\n    from: Pos(cur.line, token.start),\n    to: Pos(cur.line, token.end),\n  };\n}\n\nfunction javascriptHint(editor, options) {\n  return scriptHint(\n    editor,\n    [],\n    function(e, cur) {\n      return e.getTokenAt(cur);\n    },\n    options\n  );\n}\nCodeMirror.registerHelper('hint', 'javascript', javascriptHint);\n\nfunction forAllProps(obj, callback) {\n  for (const name in obj) {\n    if (name === 'prototype') {\n      continue;\n    }\n\n    let displayText;\n    if (obj[name] && obj[name].prototype && obj[name].prototype.displayText) {\n      displayText = obj[name].prototype.displayText;\n    }\n    callback(name, displayText);\n  }\n}\n\nfunction getCompletions(token, context, keywords, options) {\n  let found = [],\n    start = token.string,\n    global = (options && options.globalScope) || window;\n  function maybeAdd(str, displayText) {\n    if (str.lastIndexOf(start, 0) == 0 && !arrayContains(found, str))\n      found.push({ text: str, displayText });\n  }\n  function gatherCompletions(obj) {\n    forAllProps(obj, maybeAdd);\n  }\n\n  if (context && context.length) {\n    // If this is a property, see if it belongs to some object we can\n    // find in the current environment.\n    let obj = context.pop(),\n      base;\n    if (obj.type && obj.type.indexOf('variable') === 0) {\n      if (options && options.additionalContext) base = options.additionalContext[obj.string];\n      if (!options || options.useGlobalScope !== false) base = base || global[obj.string];\n    } else if (obj.type == 'string') {\n      base = '';\n    } else if (obj.type == 'atom') {\n      base = 1;\n    } else if (obj.type == 'function') {\n      if (\n        global.jQuery != null &&\n        (obj.string == '$' || obj.string == 'jQuery') &&\n        typeof global.jQuery == 'function'\n      )\n        base = global.jQuery();\n      else if (global._ != null && obj.string == '_' && typeof global._ == 'function')\n        base = global._();\n    }\n    while (base != null && context.length) base = base[context.pop().string];\n    if (base != null) gatherCompletions(base);\n  } else {\n    if (!options || options.useGlobalScope !== false) gatherCompletions(global);\n  }\n  return found;\n}\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport { init, SimpleMDE } from '@stoplight/simplemde';\n\nimport { Renderer } from '@platform/utils/markdown';\n\nimport MarkdownViewer from '../MarkdownViewer';\n\nlet inited = false;\n\nclass SimpleMdEditor extends React.Component {\n  static propTypes = {\n    value: PropTypes.string,\n    className: PropTypes.string,\n    placeholder: PropTypes.string,\n    onChange: PropTypes.func.isRequired,\n    spellChecker: PropTypes.bool,\n    hideToolbar: PropTypes.bool,\n    extraKeys: PropTypes.array,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      previewOn: _.isUndefined(props.preview) ? true : props.preview,\n    };\n  }\n\n  componentWillMount() {\n    const { id } = this.props;\n    this.id = id || 'simplemde-editor-0';\n  }\n\n  componentDidMount() {\n    this.createEditor();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.simplemde.value()) {\n      this.simplemde.value(nextProps.value);\n    }\n  }\n\n  componentWillUpdate(nextProps) {\n    if (this.props.preview && this.props.preview !== nextProps.preview) {\n      setTimeout(() => this.createEditor(), 0);\n    }\n  }\n\n  togglePreview = () => {\n    this.setState({ previewOn: !this.state.previewOn });\n  };\n\n  createEditor() {\n    const { codeMirrorInstance, extraKeys, onChange, hideToolbar, ...options } = this.props;\n\n    if (!inited) {\n      init({\n        codeMirrorInstance,\n        marked: Renderer,\n      });\n\n      inited = true;\n    }\n\n    const defaultOptions = {\n      element: document.getElementById(this.id),\n      initialValue: this.props.value,\n      status: false,\n      // latest codemirror throwing error w spell checker\n      // not worth fixing since we're getting rid of simplemde anyways\n      spellChecker: false,\n      toolbar: hideToolbar\n        ? null\n        : [\n            'bold',\n            'italic',\n            'heading-1',\n            'heading-2',\n            'heading-3',\n            '|',\n            'quote',\n            'code',\n            'unordered-list',\n            'ordered-list',\n            '|',\n            'link',\n            'image',\n            '|',\n            {\n              name: 'preview',\n              action: () => {\n                this.togglePreview();\n              },\n              className: 'fa fa-eye',\n              title: 'Toggle Preview',\n            },\n          ],\n    };\n\n    this.simplemde = new SimpleMDE(Object.assign({}, defaultOptions, options));\n\n    if (extraKeys) {\n      // https://codemirror.net/doc/manual.html#keymaps\n      this.simplemde.codemirror.setOption('extraKeys', extraKeys);\n    }\n\n    this.simplemde.codemirror.on('change', () => {\n      onChange(this.simplemde.value());\n    });\n\n    this.simplemde.codemirror.on('blur', () => {\n      onChange(this.simplemde.value(), { immediate: true });\n    });\n\n    this.simplemde.codemirror.setOption('theme', 'default');\n  }\n\n  renderEditor() {\n    const { fill, className } = this.props;\n\n    return (\n      <div className={cn('SimpleMDE flex flex-col', className, { 'fill-space': fill })}>\n        <textarea id={this.id} />\n      </div>\n    );\n  }\n\n  renderPreview() {\n    return (\n      <MarkdownViewer\n        className=\"SimpleMDE-markdown ov-s h-full fill-space\"\n        value={this.props.value || 'preview will show here'}\n        context={this.props.context}\n      />\n    );\n  }\n\n  render() {\n    const { fill, hideToolbar } = this.props;\n\n    return (\n      <div\n        className={cn('SimpleMDE-wrapper flex h-full', {\n          'fill-space': fill,\n          'hide-toolbar': hideToolbar,\n        })}\n      >\n        <div\n          className={cn('SimpleMDE-editor flex-1 h-full pos-r', {\n            'w-full': !this.state.previewOn,\n            'w-50': this.state.previewOn,\n          })}\n        >\n          {this.renderEditor()}\n        </div>\n\n        {this.state.previewOn && (\n          <div className=\"SimpleMDE-preview flex-1 w-50 pos-r\">{this.renderPreview()}</div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default SimpleMdEditor;\n","import WebworkerPromise from 'webworker-promise';\n\nexport const createWorker = worker => {\n  return new WebworkerPromise(worker);\n};\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"67a76a49eb88b46344e0.worker.js\");\n};","import React from 'react';\nimport { inject } from 'mobx-react';\nimport _ from 'lodash';\n\nconst JsonPathCacheContainer = (props = {}) => BaseComponent => {\n  const { cacheKey, cacheKeyProp, path, pathProp, pure = true } = props;\n\n  class JsonPathCache extends React.Component {\n    componentWillMount() {\n      const { jsonPathContainerData = {} } = this.props;\n      const { store, cacheKey, path } = jsonPathContainerData;\n\n      // register if it does not already have an id\n      store.register({\n        cacheKey,\n        path,\n      });\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const data = this.props.jsonPathContainerData || {};\n      const nextData = nextProps.jsonPathContainerData || {};\n\n      const currentKey = data.cacheKey + data.id + data.path;\n      const nextKey = nextData.cacheKey + nextData.id + nextData.path;\n\n      if (currentKey !== nextKey) {\n        nextData.store.register({\n          cacheKey: nextData.cacheKey,\n          id: nextData.id,\n          path: nextData.path,\n        });\n      }\n    }\n\n    // shouldComponentUpdate(nextProps) {\n    //   const data = this.props.jsonPathContainerData || {};\n    //   const nextData = nextProps.jsonPathContainerData || {};\n\n    //   if (pure) {\n    //     return data.cache !== nextData.cache;\n    //   }\n\n    //   return true;\n    // }\n\n    render() {\n      const { jsonPathContainerData = {}, ...baseProps } = this.props;\n      const { store, cacheKey, path, updateCache } = jsonPathContainerData;\n\n      const cache = store.getCache({ cacheKey, path }) || {};\n\n      return (\n        <BaseComponent\n          {...baseProps}\n          id={cache.id}\n          cacheKey={cacheKey}\n          cache={cache.data}\n          updated={cache.updated}\n          updateCache={(t, p, v, options) => {\n            updateCache(t, p, v, options);\n            this.forceUpdate();\n          }}\n        />\n      );\n    }\n  }\n\n  let targetExport = JsonPathCache;\n  if (\n    typeof window !== 'undefined' &&\n    typeof localStorage !== 'undefined' &&\n    localStorage.debugRender\n  ) {\n    const debugRender = require('react-render-debugger');\n    targetExport = debugRender(targetExport);\n  }\n\n  return inject(({ jsonPathCache }, props) => {\n    const ck = cacheKey || _.get(props, cacheKeyProp);\n    const p = path || _.get(props, pathProp);\n\n    return {\n      jsonPathContainerData: {\n        store: jsonPathCache,\n        cacheKey: ck,\n        path: p,\n        cache: jsonPathCache.getCache({ cacheKey: ck, path: p }),\n        updateCache: jsonPathCache.updateCacheFactory({ cacheKey: ck, basePath: p }),\n      },\n    };\n  })(targetExport);\n};\n\nexport default JsonPathCacheContainer;\n","import React from 'react';\nimport cn from 'classnames';\nimport { Loader } from 'semantic-ui-react';\n\nexport default ({ className = undefined, children = null, text = 'Loading', ...extraProps }) => {\n  return (\n    <div className={cn('PageLoading', className)} style={{ padding: 50 }}>\n      <Loader inline=\"centered\" size=\"big\" active inverted {...extraProps}>\n        {children || text}\n      </Loader>\n    </div>\n  );\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { Button } from 'semantic-ui-react';\n\nimport { Link } from '@platform/utils/router';\nimport { isExternalLink } from '@platform/utils/url';\n\nimport HubSearch from '../HubSearch';\n\nconst BlockAction = ({ action, onChangeData, basePath, store, theme = {}, className }) => {\n  const { type = 'none', name, content, route = {} } = action;\n\n  let to = route.path;\n  if (!isExternalLink(to)) {\n    to = store.buildViewPath(to);\n  }\n\n  let actionElem = null;\n\n  const actionBgStyle = _.get(theme, ['background'], {});\n  const actionTextStyle = _.get(theme, ['text'], {});\n\n  switch (type) {\n    case 'button':\n      actionElem = (\n        <Link to={to}>\n          <Button\n            primary\n            size=\"large\"\n            content={name || 'Button text'}\n            style={{ ...actionBgStyle, ...actionTextStyle }}\n          />\n        </Link>\n      );\n      break;\n    case 'html':\n      actionElem = <div dangerouslySetInnerHTML={{ __html: content }} />;\n      break;\n    case 'search':\n      actionElem = <HubSearch />;\n      break;\n    default:\n      break;\n  }\n\n  return (\n    <div className={cn(`HubBlockAction HubBlockAction--${type}`, className)}>{actionElem}</div>\n  );\n};\n\nexport default BlockAction;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Renderer } from '@platform/utils/markdown';\n\nimport BlockAction from '../BlockAction/viewer';\n\nconst BarItem = props => {\n  const { child = {}, basePath, editor, theme = {}, childIndex } = props;\n  const { title, content, actions = [], relativePath } = child;\n\n  const childTextStyle = _.get(theme, ['styles', 'children', childIndex, 'text'], {});\n\n  return (\n    <div className=\"BarListBlock-child flex justify-center\">\n      <div className=\"BarListBlock-content flex items-center\">\n        <div className=\"BarListBlock-main w-1/3 pr-10\">\n          <div className=\"BarListBlock-title\" style={childTextStyle}>\n            {title}\n          </div>\n          <div className=\"BarListBlock-actions\">\n            {_.map(actions, (action, actionIndex) => {\n              const actionTheme = _.get(theme, [\n                'styles',\n                'children',\n                childIndex,\n                'actions',\n                actionIndex,\n              ]);\n              return (\n                <BlockAction\n                  className=\"pt-4\"\n                  key={actionIndex}\n                  action={action}\n                  basePath={basePath}\n                  store={editor}\n                  theme={actionTheme}\n                />\n              );\n            })}\n          </div>\n        </div>\n\n        {content ? (\n          <div\n            className=\"BarListBlock-body w-2/3\"\n            dangerouslySetInnerHTML={{ __html: Renderer(content, {}, { basePath, relativePath }) }}\n            style={childTextStyle}\n          />\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nconst BlockBarList = props => {\n  const { WrapperFactory, data = {}, basePath, relativePath, editor, theme = {} } = props;\n\n  const contentElem = _.map(data.children, (child, key) => {\n    const childBgStyle = _.get(theme, ['styles', 'children', key, 'background'], {});\n\n    return (\n      <div key={key} className=\"BarListBlock\" style={childBgStyle}>\n        <BarItem\n          child={child}\n          childIndex={key}\n          basePath={basePath}\n          relativePath={relativePath}\n          editor={editor}\n          theme={theme}\n        />\n      </div>\n    );\n  });\n\n  return (\n    <WrapperFactory {...props} contentElem={contentElem} className=\"flex flex-col justify-center\" />\n  );\n};\n\nexport default BlockBarList;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport MarkdownViewer from '@platform/components/MarkdownViewer';\n\nconst BlockCallout = props => {\n  const { WrapperFactory, data = {}, editor } = props;\n  const { type = 'info', title, body } = data;\n\n  const contentElem = [\n    <div key=\"b\" className=\"flex-1\">\n      {title ? <div className=\"HubBlock-content-title\">{title}</div> : null}\n      {body ? (\n        <MarkdownViewer\n          className=\"HubBlock-content-body\"\n          value={body || ''}\n          context={{\n            a({ href, title, target, children }) {\n              const props = {};\n\n              // pass internal paths through the store's buildViewPath function\n              if (editor && (_.startsWith(href, '/') || _.startsWith(href, '#'))) {\n                props.href = editor.buildViewPath(href);\n              }\n\n              return props;\n            },\n          }}\n        />\n      ) : null}\n    </div>,\n  ];\n\n  return (\n    <WrapperFactory\n      {...props}\n      headerElem={null}\n      contentClassName=\"flex\"\n      contentElem={contentElem}\n      className={`CalloutBlock--${type}`}\n    />\n  );\n};\n\nexport default BlockCallout;\n","export const defaultColor = '#000000';\nexport const defaultBackgroundColor = '#FAFAFA';\n\nexport const defaultTheme = {\n  styles: {\n    base: {\n      text: {\n        color: defaultColor,\n      },\n      background: {\n        backgroundColor: defaultBackgroundColor,\n      },\n    },\n  },\n};\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { Link } from '@platform/utils/router';\n\nimport { computeTheme } from '../../utils';\n\nimport { defaultTheme } from './index';\n\nconst CardChild = props => {\n  const { child = {}, store, theme = {}, childIndex } = props;\n\n  const {\n    image = '//react.semantic-ui.com/assets/images/wireframe/image.png',\n    title,\n    content,\n    route = {},\n  } = child;\n\n  const computedTheme = computeTheme({ theme, defaultTheme });\n  const cardBgStyle = _.get(computedTheme, ['styles', 'card', childIndex, 'background'], {});\n  const cardTextStyle = _.get(computedTheme, ['styles', 'card', childIndex, 'text'], {});\n\n  return (\n    <Link\n      className=\"CardListBlock-child flex items-center\"\n      to={store.buildViewPath(route.path)}\n      style={cardBgStyle}\n    >\n      <div className=\"CardListBlock-image\">\n        <img src={image} />\n      </div>\n\n      <div className=\"CardListBlock-content flex-1\">\n        <div className=\"CardListBlock-title font-bold\" style={cardTextStyle}>\n          {title}\n        </div>\n        <div className=\"CardListBlock-body\" style={cardTextStyle}>\n          {content}\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nconst BlockCardList = props => {\n  const { WrapperFactory, data = {}, theme = {}, header = {}, basePath, store } = props;\n\n  const { children = [] } = data;\n  const { title, subtitle } = header;\n\n  const computedTheme = computeTheme({ theme, defaultTheme });\n  const baseBgStyle = _.get(computedTheme, 'styles.base.background', {});\n  const baseTextStyle = _.get(computedTheme, 'styles.base.text', {});\n\n  const contentElem = [\n    <div key=\"h\" className=\"CardListBlock-header\">\n      {title ? (\n        <div className=\"HubBlock-content-title\" style={baseTextStyle}>\n          {title}\n        </div>\n      ) : null}\n\n      {subtitle ? (\n        <div className=\"HubBlock-content-body\" style={baseTextStyle}>\n          {subtitle}\n        </div>\n      ) : null}\n    </div>,\n\n    <div key=\"c\" className=\"CardListBlock-cards flex items-center justify-center flex-wrap\">\n      {_.map(children, (child, key) => (\n        <CardChild\n          key={key}\n          child={child}\n          childIndex={key}\n          basePath={basePath}\n          store={store}\n          theme={computedTheme}\n        />\n      ))}\n    </div>,\n  ];\n\n  return (\n    <WrapperFactory\n      {...props}\n      headerElem={null}\n      contentProps={{ style: baseBgStyle }}\n      contentElem={contentElem}\n      className=\"flex flex-col justify-center\"\n    />\n  );\n};\n\nexport default BlockCardList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport _ from 'lodash';\n\nimport Prism from '@platform/utils/highlight';\nimport { safeParse, safeStringify } from '@platform/utils/json';\n\nclass Highlight extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    innerHTML: PropTypes.bool,\n    immediate: PropTypes.bool,\n    mode: PropTypes.string,\n    style: PropTypes.object,\n    content: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    children: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  };\n\n  static defaultProps = {\n    style: {},\n    innerHTML: false,\n    immediate: false,\n    lineNumbers: true,\n  };\n\n  componentDidMount() {\n    this.highlightCode();\n  }\n\n  componentDidUpdate() {\n    this.highlightCode();\n  }\n\n  highlightCode = () => {\n    if (this.node) {\n      const nodes = this.node.querySelectorAll('code');\n      if (nodes.length > 0) {\n        for (let i = 0; i < nodes.length; i++) {\n          try {\n            Prism.highlightElement(nodes[i]);\n          } catch (error) {\n            console.error('Error with Prism.highlightElement', error);\n          }\n        }\n      }\n    }\n  };\n\n  getDataLines = () => {\n    const { highlightRange } = this.props;\n\n    let dataLines = [];\n\n    if (highlightRange) {\n      if (_.isArray(highlightRange)) {\n        _.forOwn(highlightRange, lineRange => {\n          let dataLine = lineRange.from;\n\n          if (lineRange.from !== lineRange.to) {\n            dataLine = `${lineRange.from}-${lineRange.to}`;\n          }\n\n          if (dataLine) {\n            dataLines.push(dataLine);\n          }\n        });\n      } else if (typeof highlightRange === 'string') {\n        dataLines = [highlightRange];\n      }\n    }\n\n    return dataLines.join(',');\n  };\n\n  getPrettyJson = () => {\n    const { content, children, immediate } = this.props;\n\n    const target = children || content;\n\n    let pretty = safeStringify(safeParse(target, target));\n\n    if (immediate && pretty) {\n      try {\n        pretty = Prism.highlight(pretty, Prism.languages.json);\n      } catch (error) {\n        console.error('Error with Prism.highlight', error);\n      }\n    }\n\n    return pretty;\n  };\n\n  render() {\n    const { className, mode, lineNumbers, immediate, innerHTML, style } = this.props;\n\n    // Check if it's json, if it is, make sure it's indented.\n    // Else just pass the response to the highlighter\n    const pretty = this.getPrettyJson();\n\n    // Get the extra highlighted lines\n    const dataLines = this.getDataLines();\n\n    const codeClassNames = cn(className, `language-${mode || 'json'}`);\n    const preClassNames = cn({\n      'line-numbers': lineNumbers,\n    });\n\n    let code = null;\n    if (immediate) {\n      if (pretty) {\n        code = (\n          <pre className={preClassNames} data-line={dataLines}>\n            <code dangerouslySetInnerHTML={{ __html: pretty }} className={codeClassNames} />\n          </pre>\n        );\n      }\n    } else if (innerHTML) {\n      code = (\n        <div>\n          <div dangerouslySetInnerHTML={{ __html: pretty }} className={codeClassNames} />\n        </div>\n      );\n    } else {\n      code = (\n        <pre className={preClassNames} data-line={dataLines}>\n          <code className={codeClassNames}>{pretty}</code>\n        </pre>\n      );\n    }\n\n    return (\n      <div\n        className={cn('Highlight', { 'line-numbers': lineNumbers })}\n        style={style}\n        ref={node => {\n          this.node = node;\n        }}\n      >\n        {code}\n      </div>\n    );\n  }\n}\n\nexport default Highlight;\n","import React from 'react';\nimport Highlight from '@platform/components/Highlight';\n\nconst CodeBlock = props => {\n  const { id, WrapperFactory, data = '', config = {} } = props;\n  const { mode, lineNumbers, highlightRange } = config;\n\n  const contentElem = (\n    <Highlight\n      id={id}\n      content={data}\n      mode={mode}\n      lineNumbers={lineNumbers}\n      highlightRange={highlightRange}\n      immediate\n    />\n  );\n\n  return <WrapperFactory {...props} contentElem={contentElem} />;\n};\n\nexport default CodeBlock;\n","export const defaultColor = '#000000';\nexport const defaultBackgroundColor = '#FAFAFA';\n\nexport const defaultTheme = {\n  styles: {\n    base: {\n      text: {\n        color: defaultColor,\n      },\n      background: {\n        backgroundColor: defaultBackgroundColor,\n      },\n    },\n  },\n};\n","import React from 'react';\nimport _ from 'lodash';\n\nimport BlockAction from '../BlockAction/viewer';\n\nimport { defaultTheme } from './index';\nimport { computeTheme } from '../../utils';\n\nconst BlockHero = props => {\n  const { WrapperFactory, data = {}, theme = {}, basePath, editor } = props;\n  const { title, body, actions = [] } = data;\n\n  const computedTheme = computeTheme({ theme, defaultTheme });\n  const baseBgStyle = _.get(computedTheme, 'styles.base.background');\n  const baseTextStyle = _.get(computedTheme, 'styles.base.text');\n\n  const contentElem = [\n    <div key=\"t\" className=\"HubBlock-content-title\" style={baseTextStyle}>\n      {title}\n    </div>,\n\n    <div key=\"b\" className=\"HubBlock-content-body\" style={baseTextStyle}>\n      {body}\n    </div>,\n\n    <div key=\"a\" className=\"HubBlock-content-actions text-center\">\n      {_.map(actions, (action, actionIndex) => {\n        const actionTheme = _.get(computedTheme, ['styles', 'actions', actionIndex]);\n\n        return (\n          <BlockAction\n            key={actionIndex}\n            action={action}\n            basePath={basePath}\n            store={editor}\n            theme={actionTheme}\n          />\n        );\n      })}\n    </div>,\n  ];\n\n  return (\n    <WrapperFactory\n      {...props}\n      className=\"flex flex-col justify-center\"\n      headerElem={null}\n      contentClassName=\"flex flex-col items-center\"\n      contentProps={{ style: baseBgStyle }}\n      contentElem={contentElem}\n    />\n  );\n};\n\nexport default BlockHero;\n","import React from 'react';\nimport _ from 'lodash';\nimport HtmlViewer from '@platform/components/HtmlViewer';\nimport ErrorMessage from '@platform/components/ErrorMessage';\nimport { getConfigVar } from '@platform/utils/config';\n\nconst HtmlBlock = props => {\n  const { WrapperFactory, config = {}, data = '', editor } = props;\n\n  let contentClassName;\n  if (!config.plain) {\n    contentClassName = 'MarkdownViewer markdown-body';\n  }\n\n  let contentElem;\n  if (!_.isEmpty(data)) {\n    const err = _.get(data, '__error');\n    if (err) {\n      contentElem = <ErrorMessage error={err} />;\n    } else {\n      contentElem = (\n        <HtmlViewer\n          value={\n            _.isObject(data) ? 'block.data must be a string for html blocks' : data || 'no content'\n          }\n          context={{\n            a({ href, title, target, children }) {\n              const props = {};\n\n              // pass internal paths through the store's buildViewPath function\n              if (editor && (_.startsWith(href, '/') || _.startsWith(href, '#'))) {\n                props.href = editor.buildViewPath(href);\n              }\n\n              return props;\n            },\n          }}\n        />\n      );\n    }\n  }\n\n  return (\n    <WrapperFactory {...props} contentClassName={contentClassName} contentElem={contentElem} />\n  );\n};\n\nexport default HtmlBlock;\n","import React from 'react';\nimport { Image } from 'semantic-ui-react';\n\nconst ImageBlock = props => {\n  const { WrapperFactory, header = {}, data = '', config = {} } = props;\n\n  const style = {};\n  if (config.maxWidth) {\n    style.maxWidth = `${String(config.maxWidth)}px`;\n  }\n  if (config.maxHeight) {\n    style.maxHeight = `${String(config.maxHeight)}px`;\n  }\n\n  const contentElem = (\n    <div className={config.centered ? 'justify-center text-center' : ''}>\n      {header.title ? <div className=\"ImageBlock-title\">{header.title}</div> : null}\n\n      <Image\n        src={data}\n        alt={header.title || header.subtitle}\n        centered={config.centered}\n        fluid={config.fluid}\n        bordered={config.bordered}\n        style={style}\n      />\n\n      {header.subtitle ? <div className=\"ImageBlock-subtitle\">{header.subtitle}</div> : null}\n    </div>\n  );\n\n  return <WrapperFactory {...props} headerElem={null} contentElem={contentElem} />;\n};\n\nexport default ImageBlock;\n","import React from 'react';\nimport _ from 'lodash';\nimport { alert } from '@platform/utils/alert';\nimport cn from 'classnames';\nimport copy from 'copy-to-clipboard';\nimport pluralize from 'pluralize';\nimport PropTypes from 'prop-types';\n\nimport { faCaretDown } from '@fortawesome/pro-solid-svg-icons/faCaretDown';\nimport { faCaretRight } from '@fortawesome/pro-solid-svg-icons/faCaretRight';\nimport { faCopy } from '@fortawesome/pro-solid-svg-icons/faCopy';\n\nimport { Button, Icon } from '@core/ui';\n\nimport { safeStringify, safeParse } from '@platform/utils/json';\nimport { dereferenceSchema, isSchemaViewerEmpty } from '@platform/utils/schemas';\n\nimport mergeAllOf from 'json-schema-merge-allof';\n\nimport MarkdownViewer from '../MarkdownViewer';\nimport ErrorMessage from '../ErrorMessage';\n\nconst isCombiner = prop => {\n  return prop.anyOf || prop.oneOf ? true : false;\n};\n\nconst pickValidations = prop => {\n  const validations = {};\n  if (prop.enum && prop.enum.join) {\n    validations['Allowed Values'] = prop.enum.join(', ');\n  } else if (prop.enum) {\n    validations['Allowed Values'] = prop.enum;\n  } else if (prop.items && !_.isEmpty(prop.items.enum)) {\n    validations['Allowed Values'] = prop.items.enum.join(', ');\n  }\n\n  _.merge(\n    validations,\n    _.omit(\n      prop,\n      'title',\n      'description',\n      'type',\n      'enum',\n      'properties',\n      'items',\n      'additionalProperties',\n      '$ref',\n      '_active',\n      '_isOpen',\n      'required',\n      'xml',\n      'patternProperties',\n      '__inheritedFrom',\n      '__error'\n    )\n  );\n\n  return validations;\n};\n\nconst PropValidations = ({ className, prop }) => {\n  if (!isCombiner(prop)) {\n    const validations = pickValidations(prop);\n\n    const elems = [];\n    for (const k in validations) {\n      if (!Object.prototype.hasOwnProperty.call(validations, k)) {\n        continue;\n      }\n\n      let v = validations[k];\n\n      let type = typeof v;\n\n      if (k === 'default' && _.includes(['object', 'boolean'], type)) {\n        v = safeStringify(v);\n\n        type = typeof v;\n      }\n\n      if (type === 'object') {\n        continue;\n      } else if (type === 'boolean') {\n        elems.push(\n          <div key={k} className={className}>\n            <b>{k}:</b> {v.toString()}\n          </div>\n        );\n      } else {\n        elems.push(\n          <div key={k} className={className}>\n            <b>{k}:</b> {v}\n          </div>\n        );\n      }\n    }\n\n    if (elems.length) {\n      return elems;\n    }\n  }\n\n  return null;\n};\n\nconst validationText = prop => {\n  if (!isCombiner(prop)) {\n    const validationCount = Object.keys(pickValidations(prop)).length;\n\n    if (validationCount) {\n      return `${validationCount} ${pluralize('validation', validationCount)}`;\n    }\n  }\n\n  return '';\n};\n\nconst getProps = ({ parsed = {} }) => {\n  const target = parsed.items || parsed;\n\n  let props = target.properties || {};\n  if (target.patternProperties) {\n    if (props) {\n      props = _.merge(target.patternProperties, props);\n    } else {\n      props = target.patternProperties;\n    }\n  }\n\n  return props;\n};\n\nconst renderProp = ({\n  schemas,\n  level,\n  parentName,\n  rowElems,\n  propName,\n  prop,\n  required,\n  toggleExpandRow,\n  expandedRows,\n  defaultExpandedDepth,\n  forApiDocs,\n  hideInheritedFrom,\n  jsonPath,\n  hideRoot,\n}) => {\n  const position = rowElems.length;\n  const name = propName;\n  const rowKey = jsonPath;\n\n  if (!prop) {\n    rowElems.push(\n      <div key={position} className={`text-negative py-2 JSV-row--${level}`}>\n        Could not render prop. Is it valid? If it is a $ref, does the $ref exist?\n      </div>\n    );\n    return rowElems;\n  }\n\n  let propType;\n  let childPropType;\n  let isBasic = false;\n  let expandable = false;\n  const expanded = _.has(expandedRows, rowKey)\n    ? expandedRows[rowKey]\n    : expandedRows.all || level <= defaultExpandedDepth;\n\n  if (prop.items) {\n    propType = prop.type;\n    if (prop.items.anyOf) {\n      childPropType = 'anyOf';\n    } else if (prop.items.oneOf) {\n      childPropType = 'oneOf';\n    } else if (prop.items.type) {\n      childPropType = prop.items.type;\n    }\n\n    propType = prop.type;\n    isBasic = true;\n\n    if (\n      prop.items.properties ||\n      prop.items.patternProperties ||\n      prop.items.oneOf ||\n      prop.items.anyOf\n    ) {\n      expandable = true;\n    }\n  } else if (prop.oneOf) {\n    propType = 'oneOf';\n    expandable = !_.isEmpty(prop.oneOf);\n  } else if (prop.anyOf) {\n    propType = 'anyOf';\n    expandable = !_.isEmpty(prop.anyOf);\n  } else {\n    propType = prop.type;\n    isBasic = prop.properties || prop.patternProperties || propType === 'object';\n\n    if (prop.properties || prop.patternProperties) {\n      expandable = true;\n    }\n  }\n\n  if (jsonPath === 'root') expandable = false;\n\n  let types = [];\n  if (_.isString(propType)) {\n    types = [propType];\n  } else {\n    types = propType;\n  }\n\n  let typeElems = [];\n  if (!_.isEmpty(types)) {\n    typeElems = types.reduce((acc, type, i) => {\n      acc.push(\n        <span key={i} className={`sl--${type}`}>\n          {type === 'array' && childPropType && childPropType !== 'array'\n            ? `array[${childPropType}]`\n            : type}\n        </span>\n      );\n\n      if (types[i + 1]) {\n        acc.push(\n          <span key={`${i}-sep`} className=\"c-muted\">\n            {' or '}\n          </span>\n        );\n      }\n\n      return acc;\n    }, []);\n  } else if (prop.$ref) {\n    typeElems.push(\n      <span key=\"prop-ref\" className=\"sl--ref\">\n        {`{${prop.$ref}}`}\n      </span>\n    );\n  } else if (prop.__error || isBasic) {\n    typeElems.push(\n      <span key=\"no-types\" className=\"c-negative\">\n        {prop.__error || 'ERROR_NO_TYPE'}\n      </span>\n    );\n  }\n\n  let requiredElem;\n\n  const vt = validationText(prop);\n  let showVt = !expanded && vt;\n\n  if (required || vt) {\n    requiredElem = (\n      <div>\n        {showVt ? <span className=\"text-muted\">{vt}</span> : null}\n        {showVt && required ? <span className=\"text-muted\"> + </span> : null}\n        {required ? <span className=\"font-bold\">required</span> : null}\n      </div>\n    );\n  }\n\n  const showInheritedFrom = !hideInheritedFrom && !_.isEmpty(prop.__inheritedFrom);\n\n  if (!(hideRoot && jsonPath === 'root')) {\n    rowElems.push(\n      <div\n        key={position}\n        className={cn(`JSV-row JSV-row--${level} flex relative py-2`, {\n          'cursor-pointer': vt || expandable,\n          'is-expanded': expanded,\n        })}\n        onClick={() => {\n          if (vt || expandable) {\n            toggleExpandRow(rowKey, !expanded);\n          }\n        }}\n      >\n        {expandable ? (\n          <div className=\"JSV-rowExpander w-4 -ml-6 flex justify-center mt-1\">\n            <Icon icon={expanded ? faCaretDown : faCaretRight} />\n          </div>\n        ) : null}\n\n        <div className=\"flex-1\">\n          <div className=\"flex items-baseline\">\n            {name && name !== 'root' ? <div className=\"mr-3\">{name}</div> : null}\n\n            {!_.isEmpty(typeElems) && (\n              <div\n                className={cn('JSV-rowType', {\n                  'JSV-namelessType': !name,\n                })}\n              >\n                {typeElems}\n              </div>\n            )}\n          </div>\n\n          {!_.isEmpty(prop.description) ? (\n            <MarkdownViewer className=\"text-muted text-sm\" value={prop.description} />\n          ) : null}\n        </div>\n\n        {requiredElem || showInheritedFrom || expanded ? (\n          <div className=\"text-right text-sm pr-3 max-w-sm\">\n            {requiredElem}\n\n            {showInheritedFrom ? (\n              <div className=\"text-muted\">{`$ref:${prop.__inheritedFrom.name}`}</div>\n            ) : null}\n\n            {expanded && <PropValidations className=\"text-muted\" prop={prop} />}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n\n  const properties = getProps({ parsed: prop });\n  const requiredElems = prop.items ? prop.items.required : prop.required;\n  const commonProps = {\n    schemas,\n    rowElems,\n    toggleExpandRow,\n    expandedRows,\n    defaultExpandedDepth,\n    forApiDocs,\n    parentName: name,\n    props: properties,\n    hideInheritedFrom,\n    jsonPath,\n    required: requiredElems || [],\n  };\n\n  if (expanded || jsonPath === 'root') {\n    if (properties && Object.keys(properties).length) {\n      rowElems = renderProps({\n        ...commonProps,\n        props: properties,\n        level: level + 1,\n      });\n    } else if (prop.items) {\n      if (prop.items.oneOf) {\n        rowElems = renderCombiner({\n          ...commonProps,\n          props: prop.items.oneOf,\n          level: level + 1,\n          defaultType: prop.items.type,\n        });\n      } else if (prop.items.anyOf) {\n        rowElems = renderCombiner({\n          ...commonProps,\n          props: prop.items.anyOf,\n          level: level + 1,\n          defaultType: prop.items.type,\n        });\n      }\n    } else if (prop.oneOf) {\n      rowElems = renderCombiner({\n        ...commonProps,\n        props: prop.oneOf,\n        level: level + 1,\n        defaultType: prop.type,\n      });\n    } else if (prop.anyOf) {\n      rowElems = renderCombiner({\n        ...commonProps,\n        props: prop.anyOf,\n        level: level + 1,\n        defaultType: prop.type,\n      });\n    }\n  }\n\n  return rowElems;\n};\n\nconst renderProps = ({\n  schemas,\n  level,\n  parentName,\n  rowElems,\n  props,\n  required,\n  toggleExpandRow,\n  expandedRows,\n  defaultExpandedDepth,\n  forApiDocs,\n  hideInheritedFrom,\n  jsonPath,\n}) => {\n  for (const h in props) {\n    if (!Object.prototype.hasOwnProperty.call(props, h)) {\n      continue;\n    }\n\n    rowElems = renderProp({\n      schemas,\n      level,\n      parentName,\n      rowElems,\n      toggleExpandRow,\n      expandedRows,\n      defaultExpandedDepth,\n      forApiDocs,\n      propName: h,\n      prop: props[h],\n      required: _.includes(required, h),\n      hideInheritedFrom,\n      jsonPath: `${jsonPath}.${h}`,\n    });\n  }\n  return rowElems;\n};\n\nconst renderRowDivider = ({ key, level, text }) => {\n  return (\n    <div key={`${key}-d`} className={`JSV-divider--${level} h-10 flex items-center`}>\n      <div className=\"c-muted pr-3 uppercase text-sm\">{text}</div>\n      <div className=\"h-px bg-grey-light flex-1 mr-4\" />\n    </div>\n  );\n};\n\nconst renderCombiner = ({\n  schemas,\n  level,\n  parentName,\n  defaultType,\n  rowElems,\n  props,\n  toggleExpandRow,\n  expandedRows,\n  defaultExpandedDepth,\n  forApiDocs,\n  hideInheritedFrom,\n  jsonPath,\n}) => {\n  for (const e in props) {\n    if (!Object.prototype.hasOwnProperty.call(props, e)) {\n      continue;\n    }\n\n    const elem = props[e];\n\n    if (!_.has(elem, 'type') && defaultType) {\n      _.set(elem, 'type', defaultType);\n    }\n\n    const key = `${parentName}-c-${level}-${e}`;\n\n    const nextLevel = level === 0 && (elem.properties || elem.items) ? 1 : level;\n    const commonProps = {\n      schemas,\n      parentName,\n      rowElems,\n      toggleExpandRow,\n      expandedRows,\n      defaultExpandedDepth,\n      level: nextLevel,\n      forApiDocs,\n      hideInheritedFrom,\n      jsonPath: `${jsonPath}.${e}`,\n    };\n\n    if (elem.properties) {\n      if (!elem.type) {\n        elem.type = 'object';\n      }\n      rowElems = renderProp({ ...commonProps, prop: elem });\n    } else if (elem.items) {\n      if (!elem.type) {\n        elem.type = 'array';\n      }\n      rowElems = renderProp({ ...commonProps, prop: elem });\n    } else {\n      rowElems = renderSchema({\n        ...commonProps,\n        schema: elem,\n        name: elem.properties || elem.items ? key : null,\n      });\n    }\n\n    if (props[parseInt(e) + 1]) {\n      rowElems.push(renderRowDivider({ key, level, text: 'or' }));\n    }\n  }\n\n  return rowElems;\n};\n\nconst renderSchema = ({\n  schemas,\n  schema,\n  level,\n  name,\n  rowElems,\n  toggleExpandRow,\n  expandedRows,\n  defaultExpandedDepth,\n  forApiDocs,\n  hideInheritedFrom,\n  jsonPath,\n  hideRoot,\n}) => {\n  let parsed = schema;\n\n  if (!parsed) {\n    return rowElems;\n  }\n\n  parsed = safeParse(parsed);\n  if (_.isEmpty(parsed)) {\n    return rowElems;\n  }\n\n  let nextLevel = level;\n  const commonProps = {\n    schemas,\n    rowElems,\n    toggleExpandRow,\n    expandedRows,\n    defaultExpandedDepth,\n    forApiDocs,\n    parentName: name,\n    propName: name,\n    required: _.includes(parsed.required || [], name),\n    hideInheritedFrom,\n    jsonPath,\n    hideRoot,\n  };\n\n  if (parsed.properties) {\n    const prop = {\n      ...parsed,\n      type: 'object',\n      description: parsed.description,\n    };\n\n    if (!hideInheritedFrom && parsed.__inheritedFrom) {\n      Object.assign(prop, _.pick(parsed, '__inheritedFrom'));\n    }\n\n    rowElems = renderProp({\n      ...commonProps,\n      level,\n      prop,\n    });\n  } else if (parsed.items) {\n    return renderProp({\n      ...commonProps,\n      level: nextLevel,\n      prop: parsed,\n    });\n  } else if (parsed.oneOf) {\n    return renderCombiner({\n      ...commonProps,\n      level: nextLevel,\n      props: parsed.oneOf,\n      defaultType: parsed.type,\n    });\n  } else if (parsed.anyOf) {\n    return renderCombiner({\n      ...commonProps,\n      level: nextLevel,\n      props: parsed.anyOf,\n      defaultType: parsed.type,\n    });\n  } else if (parsed.type) {\n    return renderProp({\n      ...commonProps,\n      level: nextLevel,\n      prop: parsed,\n    });\n  }\n\n  return rowElems;\n};\n\nclass JsonSchemaViewer extends React.Component {\n  static propTypes = {\n    name: PropTypes.string,\n    schemas: PropTypes.object,\n    schema: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    limitPropertyCount: PropTypes.number,\n    hideRoot: PropTypes.bool,\n    expanded: PropTypes.bool,\n\n    emptyText: PropTypes.string,\n    emptyClass: PropTypes.string,\n  };\n\n  state = {\n    showExtra: false,\n    expandedRows: {\n      all: false,\n    },\n    showCopied: false,\n  };\n\n  render() {\n    const {\n      name,\n      schema,\n      dereferencedSchema,\n      schemas = {},\n      limitPropertyCount,\n      hideRoot,\n      expanded,\n      defaultExpandedDepth = 1,\n      emptyText,\n      emptyClass = '',\n      forApiDocs,\n      hideInheritedFrom,\n    } = this.props;\n\n    const emptyElem = <div className=\"u-none c-muted\">{emptyText || 'No schema defined.'}</div>;\n\n    // an empty array or object is still a valid response, schema is ONLY really empty when a combiner type has no information\n    if (isSchemaViewerEmpty(schema)) {\n      return <div className={`${emptyClass}`}>{emptyElem}</div>;\n    }\n\n    let parsed = dereferencedSchema || schema;\n\n    try {\n      if (typeof parsed === 'string') {\n        parsed = safeParse(parsed);\n      }\n\n      if (!dereferencedSchema || _.isEmpty(dereferencedSchema)) {\n        parsed = dereferenceSchema(parsed, { definitions: schemas }, hideInheritedFrom);\n      }\n    } catch (e) {\n      console.error('JsonSchemaViewer dereference error', e);\n      return (\n        <ErrorMessage\n          error={`There is an error in your ${name} schema definition.`}\n          className=\"m-3\"\n        />\n      );\n    }\n\n    if (!parsed || !Object.keys(parsed).length) {\n      return emptyElem;\n    }\n\n    let rowElems;\n\n    const { expandedRows, showCopied } = this.state;\n    expandedRows.all = expanded;\n\n    try {\n      // resolve all allOfs\n      parsed = mergeAllOf(parsed, {\n        resolvers: {\n          defaultResolver: function(values, path, mergeSchemas, options) {\n            // Handle merging unknown properties\n            return _.merge(...values);\n          },\n        },\n      });\n\n      rowElems = renderSchema({\n        schemas,\n        expandedRows,\n        defaultExpandedDepth,\n        forApiDocs,\n        schema: parsed,\n        level: hideRoot && (parsed.type === 'object' || parsed.hasOwnProperty('allOf')) ? -1 : 0,\n        name: 'root',\n        rowElems: [],\n        toggleExpandRow: this.toggleExpandRow,\n        hideInheritedFrom,\n        jsonPath: 'root',\n        hideRoot,\n      });\n    } catch (e) {\n      console.error('JSV:error', e);\n      rowElems = <ErrorMessage error={e.message} className=\"m-3\" />;\n    }\n\n    const { showExtra } = this.state;\n    const propOverflowCount = rowElems.length - limitPropertyCount;\n\n    if (limitPropertyCount) {\n      if (!showExtra && propOverflowCount > 0) {\n        rowElems = _.dropRight(rowElems, propOverflowCount);\n      }\n    }\n\n    if (_.isEmpty(rowElems)) {\n      return emptyElem;\n    }\n\n    return (\n      <div className=\"JSV us-t u-schemaColors\">\n        {rowElems}\n\n        {showExtra || propOverflowCount > 0 ? (\n          <div\n            className={cn('JSV-toggleExtra', { 'is-on': showExtra })}\n            onClick={this.toggleShowExtra}\n          >\n            {showExtra ? 'collapse' : `...show ${propOverflowCount} more properties`}\n          </div>\n        ) : null}\n\n        <div className=\"JSV-copyToClipboard\">\n          <Button\n            disabled={showCopied}\n            title=\"Copy to clipboard\"\n            className={cn('mt-1/2 mr-1/2', { 'pr-1': !showCopied })}\n            icon={showCopied || faCopy}\n            onClick={this.copy}\n            transparent\n          >\n            {showCopied && 'Copied!'}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  toggleShowExtra = () => {\n    const { showExtra } = this.state;\n    this.setState({ showExtra: showExtra ? false : true });\n  };\n\n  toggleExpandRow = (rowKey, expanded) => {\n    const { expandedRows } = this.state;\n    const update = {};\n    update[rowKey] = expanded;\n    this.setState({ expandedRows: Object.assign({}, expandedRows, update) });\n  };\n\n  copy = () => {\n    try {\n      copy(JSON.stringify(this.props.schema, undefined, 2));\n      this.setState({ showCopied: true });\n      setTimeout(() => this.setState({ showCopied: false }), 2000);\n    } catch (e) {\n      alert.error(`Cannot copy to clipboard: ${e.message}`);\n    }\n\n  }\n}\n\nexport default JsonSchemaViewer;\n","import React from 'react';\nimport JsonSchemaViewer from '@platform/components/JsonSchemaViewer';\n\nclass JsonSchemaBlock extends React.Component {\n  getSchema = () => {\n    const { data = {}, dereferencedBlock = {} } = this.props;\n    return dereferencedBlock.data || data;\n  };\n\n  render = () => {\n    const { WrapperFactory, config = {} } = this.props;\n    const schema = this.getSchema();\n\n    const contentElem = (\n      <JsonSchemaViewer\n        schema={schema}\n        dereferencedSchema={schema}\n        hideRoot={config.hideRoot}\n        hideInheritedFrom\n        defaultExpandedDepth={config.expandedDepth || 0}\n      />\n    );\n\n    return <WrapperFactory {...this.props} contentElem={contentElem} />;\n  };\n}\n\nexport default JsonSchemaBlock;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport _ from 'lodash';\n\nimport Block from '../Block/viewer';\n\nconst RefBlock = props => {\n  const { WrapperFactory, data = {}, block = {}, dereferencedBlock = {}, editor, parsed } = props;\n\n  const blockId = _.replace(data.$ref, '#/blocks/', '');\n  const refBlock = _.find(editor.connectedBlocks, { id: blockId }) || {};\n  const refBlockDeref = _.cloneDeep(_.get(parsed, ['blocks', blockId], {}));\n\n  refBlock.input = _.unionBy(block.input, refBlock.input, 'name');\n  refBlockDeref.input = _.unionBy(dereferencedBlock.input, refBlockDeref.input, 'name');\n\n  const contentElem = <Block {...props} block={refBlock} dereferencedBlock={refBlockDeref} />;\n\n  return <WrapperFactory contentElem={contentElem} />;\n};\n\nexport default observer(RefBlock);\n","import React from 'react';\nimport { inject } from 'mobx-react';\nimport _ from 'lodash';\nimport { registerLogger } from '@platform/utils/logging';\nconst log = registerLogger('components', 'JsonPathCacheParentContainer');\n\nconst JsonPathCacheParentContainer = (props = {}) => BaseComponent => {\n  const {\n    cacheKey,\n    cacheKeyProp,\n    basePath,\n    basePathProp,\n    path,\n    pathProp,\n    children,\n    childrenProp,\n  } = props;\n\n  class JsonPathCacheParent extends React.Component {\n    componentWillMount() {\n      this.registerChildren(this.props);\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const data = this.props.jsonPathContainerData || {};\n      const nextData = nextProps.jsonPathContainerData || {};\n\n      if (\n        !_.isEqual(data.cacheKey, nextData.cacheKey) ||\n        !_.isEqual(data.basePath, nextData.basePath) ||\n        !_.isEqual(data.path, nextData.path) ||\n        !_.isEqual(_.size(data.children), _.size(nextData.children))\n      ) {\n        this.registerChildren(nextProps);\n      }\n    }\n\n    // sets up the cache for all the child blocks, so that we have their keys in\n    // advance to use\n    registerChildren(props) {\n      const { jsonPathContainerData = {} } = props;\n      const { store, cacheKey, basePath, path, children } = jsonPathContainerData;\n\n      store.registerChildren({\n        cacheKey,\n        basePath,\n        path,\n        children,\n      });\n    }\n\n    render() {\n      const { jsonPathContainerData = {}, ...baseProps } = this.props;\n      const { store, cacheKey, basePath, path } = jsonPathContainerData;\n\n      const childCacheIds = store.getChildrenCacheIds({ cacheKey, basePath, path });\n\n      log.debug(`passing childCacheIds to ${BaseComponent.displayName}`, childCacheIds, {\n        cacheKey,\n        basePath,\n        path,\n      });\n\n      return <BaseComponent {...baseProps} childCacheIds={childCacheIds} />;\n    }\n  }\n\n  return inject(({ jsonPathCache }, props) => {\n    const ck = cacheKey || _.get(props, cacheKeyProp);\n    const bp = basePath || _.get(props, basePathProp);\n    const p = path || _.get(props, pathProp);\n    const c = children || _.get(props, childrenProp);\n\n    return {\n      jsonPathContainerData: {\n        store: jsonPathCache,\n        cacheKey: ck,\n        basePath: bp,\n        path: p,\n        children: c,\n      },\n    };\n  })(JsonPathCacheParent);\n};\n\nexport default JsonPathCacheParentContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport cn from 'classnames';\n\nimport JsonPathCacheParentContainer from '@platform/components/JsonPathCacheParentContainer';\n\nimport { registerLogger } from '@platform/utils/logging';\n\nimport Block from '../Block/viewer';\n\nconst log = registerLogger('components', 'HubBlockList');\n\nclass HubBlockList extends React.Component {\n  static propTypes = {\n    store: PropTypes.object.isRequired,\n    blocks: PropTypes.array,\n    blockDereferenced: PropTypes.array,\n    parentPath: PropTypes.array, // json path to parent in tree\n    basePath: PropTypes.string, // base url path\n    relativePath: PropTypes.string, // relative url path (everything between basePath and the page we are on)\n    cache: PropTypes.object,\n    updateCache: PropTypes.func,\n    blockProps: PropTypes.object, // props to pass onto underlying blocks\n  };\n\n  blockPath = index => {\n    return this.props.parentPath.concat(['blocks', index]);\n  };\n\n  renderBlock = ({ id, block, index }) => {\n    const {\n      store,\n      blocks = [],\n      blocksDereferenced = [],\n      basePath,\n      relativePath,\n      blockProps = {},\n      slugger,\n    } = this.props;\n\n    const blockLength = _.size(blocks);\n    const isLast = parseInt(index) >= blockLength - 1;\n\n    return (\n      <Block\n        {...blockProps}\n        key={index}\n        id={id}\n        editor={store} // DEPRECATED\n        store={store}\n        block={block}\n        blockDereferenced={blocksDereferenced[index]}\n        blockIndex={index}\n        blockPath={this.blockPath(index)}\n        isLast={isLast}\n        isSolo={blockLength <= 1}\n        basePath={basePath}\n        relativePath={relativePath}\n        slugger={slugger}\n      />\n    );\n  };\n\n  render() {\n    const {\n      className,\n      blocks = [],\n      childCacheIds = [],\n      parentPath,\n      basePath,\n      relativePath,\n      blockProps,\n    } = this.props;\n\n    log.debug('Render', { blocks, parentPath, basePath, relativePath, blockProps });\n\n    let contentElems = [];\n\n    _.forEach(blocks, (block, index) => {\n      const id = childCacheIds[index];\n      contentElems.push(this.renderBlock({ id, block, index }));\n    });\n\n    return <div className={cn('HubBlockList', className)}>{contentElems}</div>;\n  }\n}\n\nexport default JsonPathCacheParentContainer({\n  cacheKeyProp: 'store.id',\n  basePathProp: 'parentPath',\n  path: ['blocks'],\n  childrenProp: 'blocks',\n})(HubBlockList);\n","import _ from 'lodash';\n\nexport const getActiveTab = props => {\n  const { data, cache = {}, childCacheIds = [], blockPath = [] } = props;\n\n  const { children = [] } = data;\n  let activeIndex = Math.max(_.indexOf(childCacheIds, cache.activeTabId || 0), 0);\n  const activeTab = children[activeIndex] || {};\n\n  return {\n    id: childCacheIds[activeIndex],\n    index: activeIndex,\n    path: blockPath.concat(['data', 'children', activeIndex]),\n    ...activeTab,\n  };\n};\n\nexport const handleChangeTab = ({ id, updateCache }) => {\n  updateCache('set', ['activeTabId'], id);\n};\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport _ from 'lodash';\nimport { Menu } from 'semantic-ui-react';\nimport JsonPathCacheParentContainer from '@platform/components/JsonPathCacheParentContainer';\n\nimport BlockList from '../BlockList/viewer';\n\nimport { getActiveTab, handleChangeTab } from './index';\n\nclass TabsBlock extends React.Component {\n  getActiveTab = () => {\n    return getActiveTab(this.props);\n  };\n\n  handleChangeTab = (e, { name }) => {\n    const { updateCache } = this.props;\n    handleChangeTab({ id: name, updateCache });\n  };\n\n  renderTabs = () => {\n    const { data = {}, childCacheIds, cache = {} } = this.props;\n    const { children = [] } = data;\n\n    if (!childCacheIds) {\n      return null;\n    }\n\n    const leftItems = [];\n\n    const tabs = _.map(children, (tab, index) => {\n      const id = childCacheIds[index];\n\n      return (\n        <Menu.Item\n          key={id}\n          name={id}\n          content={tab.title}\n          className=\"HubBlock-tab hover:text-active\"\n          active={cache.activeTabId ? id === cache.activeTabId : Number(index) === 0}\n          onClick={this.handleChangeTab}\n        />\n      );\n    });\n\n    const rightItems = [];\n\n    return leftItems.concat(tabs, rightItems);\n  };\n\n  render() {\n    const {\n      WrapperFactory,\n      editor,\n      cache,\n      updateCache,\n      basePath,\n      relativePath,\n      isNested,\n      slugger,\n    } = this.props;\n\n    const activeTab = this.getActiveTab();\n    const { blocks = [] } = activeTab;\n\n    const contentElem = [];\n    contentElem.push(\n      <Menu\n        key=\"ti\"\n        attached=\"top\"\n        className=\"HubBlock-tabs\"\n        secondary={!isNested}\n        pointing={!isNested}\n        size={isNested ? 'tiny' : undefined}\n      >\n        {this.renderTabs()}\n      </Menu>\n    );\n\n    if (activeTab.id) {\n      contentElem.push(\n        <div key=\"tc\" className=\"HubBlock-tab-content\">\n          <BlockList\n            store={editor}\n            blocks={blocks}\n            parentPath={activeTab.path}\n            basePath={basePath}\n            relativePath={relativePath}\n            cache={cache}\n            updateCache={updateCache}\n            blockProps={{ isNested: true }}\n            slugger={slugger}\n          />\n        </div>\n      );\n    }\n\n    return <WrapperFactory {...this.props} contentElem={contentElem} />;\n  }\n}\n\nTabsBlock.displayName = 'HubTabsBlock';\n\nexport default JsonPathCacheParentContainer({\n  cacheKeyProp: 'cacheKey',\n  basePathProp: 'blockPath',\n  path: ['data', 'children'],\n  childrenProp: 'data.children',\n})(observer(TabsBlock));\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport JsonPathCacheParentContainer from '@platform/components/JsonPathCacheParentContainer';\n\nimport BlockList from '../BlockList/viewer';\n\nclass ContainerBlock extends React.Component {\n  render() {\n    const {\n      WrapperFactory,\n      editor,\n      cache,\n      updateCache,\n      basePath,\n      relativePath,\n      data,\n      blockPath,\n      slugger,\n    } = this.props;\n\n    const contentElem = [];\n    contentElem.push(\n      <div key=\"tc\" className=\"HubBlock-tab-content\">\n        <BlockList\n          store={editor}\n          blocks={data.blocks || []}\n          parentPath={blockPath.concat('data')}\n          basePath={basePath}\n          relativePath={relativePath}\n          cache={cache}\n          updateCache={updateCache}\n          blockProps={{ isNested: true }}\n          slugger={slugger}\n        />\n      </div>\n    );\n\n    return <WrapperFactory {...this.props} contentElem={contentElem} />;\n  }\n}\n\nContainerBlock.displayName = 'HubContainerBlock';\n\nexport default JsonPathCacheParentContainer({\n  cacheKeyProp: 'cacheKey',\n  basePathProp: 'blockPath',\n  path: ['data', 'children'],\n  childrenProp: 'data.children',\n})(observer(ContainerBlock));\n","import React from 'react';\nimport _ from 'lodash';\n\nimport MarkdownViewer from '@platform/components/MarkdownViewer';\nimport ErrorMessage from '@platform/components/ErrorMessage';\n\nimport { safeStringify } from '@platform/utils/json';\n\nconst TextBlock = props => {\n  const { WrapperFactory, header, data, editor } = props;\n\n  const { token, title } = header || {};\n\n  let headerElem;\n  if (token || title) {\n    headerElem = (\n      <div className=\"TextBlock-header\">\n        <div className=\"flex flex-wrap items-center\">\n          {token ? (\n            <div className={`TextBlock-header-token token--${_.toLower(token)}`}>{token}</div>\n          ) : null}\n\n          {title ? <h1 className=\"TextBlock-header-title wb-bw\">{title}</h1> : null}\n        </div>\n      </div>\n    );\n  }\n\n  let contentElem;\n\n  // Don't render if undefined or null\n  if (!_.isNil(data)) {\n    // Only render data as object if it contains an error\n    if (typeof data === 'object') {\n      if (data.__error) {\n        contentElem = <ErrorMessage error={data.__error} />;\n      }\n    } else {\n      contentElem = (\n        <MarkdownViewer\n          value={data}\n          context={{\n            a({ href }) {\n              const props = {};\n\n              // pass internal paths through the store's buildViewPath function\n              if (editor && (_.startsWith(href, '/') || _.startsWith(href, '#'))) {\n                props.href = editor.buildViewPath(href);\n              }\n\n              return props;\n            },\n          }}\n        />\n      );\n    }\n  }\n\n  return <WrapperFactory {...props} headerElem={headerElem} contentElem={contentElem} />;\n};\n\nexport default TextBlock;\n","import React from 'react';\nimport _ from 'lodash';\n\nfunction customizer(objValue, othValue) {\n  if (_.isFunction(objValue) || _.isFunction(othValue)) {\n    return true;\n  }\n}\n\n// Use skipFunctions with care! It's easy to create subtle bugs.\nfunction deepCompare({ skipFunctions, debug } = {}) {\n  return WrappedComponent => {\n    return class extends React.Component {\n      componentWillMount = () => {\n        if (debug) {\n          console.log('deepCompare.componentWillMount', this.props);\n        }\n      };\n\n      shouldComponentUpdate = nextProps => {\n        let same;\n        if (skipFunctions) {\n          same = _.isEqualWith(this.props, nextProps, customizer);\n        } else {\n          same = _.isEqual(this.props, nextProps);\n        }\n\n        if (debug) {\n          console.log('deepCompare.shouldComponentUpdate?', !same, this.props, nextProps);\n        }\n\n        return !same;\n      };\n\n      render = () => {\n        return <WrappedComponent {...this.props} />;\n      };\n    };\n  };\n}\n\nexport default deepCompare;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { shallowEqual } from '../json';\n\nfunction pureCompare({ skipFunctions = true, debug } = {}) {\n  return WrappedComponent => {\n    return class extends React.Component {\n      componentWillMount = () => {\n        if (debug) {\n          console.log('pureCompare.componentWillMount', this.props);\n        }\n      };\n\n      shouldComponentUpdate = nextProps => {\n        const same = shallowEqual(this.props, nextProps);\n\n        if (debug) {\n          console.log('pureCompare.shouldComponentUpdate?', !same, this.props, nextProps);\n          const props = _.uniq(_.keys(this.props).concat(_.keys(nextProps)));\n          for (const p of props) {\n            if (this.props[p] === nextProps[p]) {\n              console.log(p, 'isEqual');\n            } else {\n              console.log(p, 'isNotEqual', this.props[p], nextProps[p]);\n            }\n          }\n          console.log('pureCompare.shouldComponentUpdate.end');\n        }\n\n        return !same;\n      };\n\n      render = () => {\n        return <WrappedComponent {...this.props} />;\n      };\n    };\n  };\n}\n\nexport default pureCompare;\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\n\nimport { deepCompare } from '@platform/utils/hoc';\nimport { Label } from 'semantic-ui-react';\n\nimport FormInputLabel from '../FormInputLabel';\nimport FormDropdown from '../FormDropdown';\n\n// import './styles.styl';\n\nclass FormSelect extends React.Component {\n  onChange = (e, option) => {\n    const { input = {}, onChange } = this.props;\n\n    if (input.onChange) {\n      input.onChange(onChange ? onChange(option.value, option) : option.value, option);\n    } else if (onChange) {\n      onChange(option.value, option);\n    }\n  };\n\n  render() {\n    const {\n      value,\n      input = {},\n      big,\n      size,\n      loc,\n      defaultValue = '',\n      className = '',\n      label,\n      tip,\n      required,\n      fluid,\n      options = [],\n      multiple,\n      allowAdditions,\n      search,\n      placeholder,\n      inline,\n      disabled,\n      readOnly,\n    } = this.props;\n\n    if (!_.isEmpty(input)) {\n      console.warn(\"Depricating prop 'input' in <FormSelect />\");\n    }\n\n    const classNames = ['FormSelect'];\n\n    if (big || ((size && size === 'big') || size === 'large')) {\n      classNames.push('is-big');\n    } else if (size) {\n      classNames.push(`is-${size}`);\n    }\n\n    if (loc) {\n      classNames.push(`is-${loc}`);\n    }\n\n    let v = input.value || value || defaultValue;\n    let computedOptions = options;\n    if (multiple) {\n      // remove null / undefined values, and always make sure current values are part of options\n      // use without instead of compact to keep zero values\n      v = _.without(_.isArray(v) ? v : [v], false, null, '', undefined, NaN);\n      computedOptions = _.uniq(\n        computedOptions.concat(\n          _.map(v, v2 => ({\n            text: v2,\n            value: v2,\n          }))\n        )\n      );\n    }\n\n    let labelElem;\n    let isFixedWidth;\n\n    if (_.isObject(label)) {\n      isFixedWidth = label.className === 'Label-fw';\n\n      labelElem = <Label {...label} className={cn(label.className, 'flex-1')} />;\n    } else {\n      labelElem = <FormInputLabel inline={inline} label={label} required={required} tip={tip} />;\n    }\n\n    return (\n      <div\n        className={cn(\n          'FormSelect',\n          className,\n          isFixedWidth ? 'flex items-center' : 'flex',\n          inline ? 'is-inline items-center' : 'flex-col'\n        )}\n      >\n        {labelElem}\n\n        <div className=\"flex-1\">\n          <FormDropdown\n            selection\n            fluid={fluid}\n            options={computedOptions}\n            multiple={multiple}\n            allowAdditions={allowAdditions}\n            search={search}\n            placeholder={placeholder}\n            disabled={disabled}\n            readOnly={readOnly}\n            {...input}\n            className={classNames.join(' ')}\n            value={v}\n            onChange={this.onChange}\n            clearSearchOnSelect\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default deepCompare()(FormSelect);\n","import React from 'react';\nimport _ from 'lodash';\n\nconst defaultConvertToTarget = value => value;\nconst defaultConvertFromTarget = value => value;\n\nconst DebounceContainer = (props = {}) => BaseComponent => {\n  const {\n    convertForTarget = defaultConvertToTarget,\n    convertFromTarget = defaultConvertFromTarget,\n    targetPropName = 'value',\n  } = props;\n\n  class Debouncer extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        value: convertForTarget(props.value, props),\n        externalValue: props.value,\n      };\n\n      this.persistChange = _.debounce(this.persistChange, 1000);\n    }\n\n    componentWillUpdate(nextProps, nextState) {\n      this.onExternalValueChange(nextProps, nextState);\n    }\n\n    componentWillUnmount() {\n      if (this.persistChange) {\n        this.persistChange.flush();\n      }\n    }\n\n    onExternalValueChange = (props, state) => {\n      if (state.internal) {\n        state.internal = false;\n      } else if (!_.isEqual(props.value, state.externalValue)) {\n        state.value = convertForTarget(props.value, props);\n        state.externalValue = props.value;\n      }\n    };\n\n    _persistChange = (value, options) => {\n      const { onChange } = this.props;\n\n      const nextVal = convertFromTarget(value, Object.assign({}, this.props));\n\n      this.setState({\n        value,\n        internal: true,\n        externalValue: nextVal,\n      });\n\n      if (onChange) {\n        onChange({ value: nextVal, options });\n      }\n    };\n\n    persistChange = (value, options) => {\n      this._persistChange(value, options);\n    };\n\n    onChange = (value, options = {}) => {\n      this.setState({\n        value,\n        internal: true,\n      });\n\n      if (options.immediate) {\n        this._persistChange(value, options);\n      } else {\n        this.persistChange(value, options);\n      }\n    };\n\n    render() {\n      const { value } = this.state || {};\n\n      const computedProps = {\n        [targetPropName]: value,\n      };\n\n      return <BaseComponent {...this.props} {...computedProps} onChange={this.onChange} />;\n    }\n  }\n\n  return Debouncer;\n};\n\nexport default DebounceContainer;\n","import React from 'react';\n\nimport DebounceContainer from '../DebounceContainer';\n\nlet CodeMirror;\nif (typeof window !== 'undefined' && window.localStorage) {\n  CodeMirror = require('../CodeMirror').default;\n}\n\nlet SimpleMDE;\nif (typeof window !== 'undefined' && window.localStorage) {\n  SimpleMDE = require('./editor').default;\n}\n\nconst SimpleMDEWrapper = props => {\n  return SimpleMDE ? (\n    <SimpleMDE codeMirrorInstance={CodeMirror} minHeight=\"0px\" {...props} />\n  ) : null;\n};\n\nexport default DebounceContainer()(SimpleMDEWrapper);\n\n// import React from 'react';\n// import dynamic from 'next/dynamic';\n\n// import DebounceContainer from '../DebounceContainer';\n// import PageLoading from '../PageLoading';\n// import CodeMirror from '../CodeMirror';\n\n// const SimpleMDE = dynamic(import('./editor'), { ssr: false, loading: () => <PageLoading /> });\n\n// const SimpleMDEWrapper = props => {\n//   return (\n//     <CodeMirror\n//       render={codeMirrorInstance => {\n//         return <SimpleMDE codeMirrorInstance={codeMirrorInstance} minHeight=\"0px\" {...props} />;\n//       }}\n//     />\n//   );\n// };\n\n// export default DebounceContainer()(SimpleMDEWrapper);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport { registerLogger } from '@platform/utils/logging';\n\nimport SimpleMdEditor from '../SimpleMdEditor';\n\nconst log = registerLogger('components', 'MarkdownEditor');\n\nlog.info('Load');\n\nclass MarkdownEditor extends React.Component {\n  static propTypes = {\n    value: PropTypes.string,\n    className: PropTypes.string,\n    placeholder: PropTypes.string,\n    onChange: PropTypes.func.isRequired,\n    preview: PropTypes.bool,\n    readOnly: PropTypes.bool,\n    spellCheck: PropTypes.bool,\n    toolbarHidden: PropTypes.bool,\n    toolbarOnFocus: PropTypes.bool,\n    size: PropTypes.oneOf(['large', 'medium', 'small']),\n  };\n\n  onChange = value => {\n    this.props.onChange(value);\n  };\n\n  render() {\n    const {\n      id,\n      className,\n      borderless,\n      size,\n      value = '',\n      preview = false,\n      onChange,\n      ...editorProps\n    } = this.props;\n\n    log.debug('Render', { value });\n\n    return (\n      <div\n        className={cn('MarkdownEditor', className, {\n          [`is-${size}`]: size,\n          'is-borderless': borderless,\n        })}\n      >\n        <SimpleMdEditor\n          id={id}\n          placeholder=\"Write markdown here...\"\n          value={value}\n          onChange={({ value: newValue }) => {\n            if (value !== newValue) {\n              onChange(newValue);\n            }\n          }}\n          preview={preview}\n          {...editorProps}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MarkdownEditor;\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Button } from 'semantic-ui-react';\n\nimport FormInput from '../FormInput';\nimport FormSelect from '../FormSelect';\nimport MarkdownEditor from '../MarkdownEditor';\n\nconst typeOptions = [\n  { text: 'HTTP', value: 'http' },\n  { text: 'Script', value: 'script' },\n  { text: 'Reference', value: 'ref' },\n  // {text: 'Lambda', value: 'lambda'},\n];\n\nfunction StepTypeSelector({ typeWhitelist, ...extraProps }) {\n  const options = [];\n  for (const o of typeOptions) {\n    if (_.isEmpty(typeWhitelist) || typeWhitelist[o.value]) {\n      options.push(o);\n    }\n  }\n\n  return (\n    <FormSelect options={options} defaultValue=\"http\" placeholder=\"choose one\" {...extraProps} />\n  );\n}\n\nconst createScriptFromHTTP = (before, after) => {\n  let script = '';\n\n  if (!_.isEmpty(before)) {\n    const beforeReg = new RegExp('// COPIED FROM BEFORE SCRIPT');\n    if (!beforeReg.test(before)) {\n      script = '// COPIED FROM BEFORE SCRIPT \\n';\n    }\n\n    script = `${script} ${before} \\n`;\n  }\n\n  if (!_.isEmpty(after)) {\n    const afterReg = new RegExp('// COPIED FROM AFTER SCRIPT');\n    if (!afterReg.test(after)) {\n      script = `${script} \\n // COPIED FROM AFTER SCRIPT \\n`;\n    }\n\n    script = `${script} ${after} \\n`;\n  }\n\n  return script;\n};\n\nconst StepBasics = props => {\n  const { ui, updateUi, step = {}, onChange, typeWhitelist = [], readOnly } = props;\n\n  return (\n    <div className=\"StepBasics\">\n      <div className=\"flex\">\n        <div className=\"StepBasics-docs\">\n          <Button\n            basic={!ui.docsOpen}\n            secondary={ui.docsOpen || !_.isEmpty(step.description)}\n            icon=\"book\"\n            onClick={() => {\n              updateUi('set', 'docsOpen', !ui.docsOpen);\n            }}\n          />\n        </div>\n\n        <StepTypeSelector\n          typeWhitelist={typeWhitelist}\n          disabled={readOnly}\n          value={step.type}\n          onChange={value => {\n            if (value === step.type) {\n              return;\n            }\n\n            const before = _.get(step, 'before.script', '');\n            const after = _.get(step, 'after.script', '');\n            const script = _.get(step, 'input.script', '');\n\n            if (step.type === 'script' && value !== 'script' && !_.isEmpty(script)) {\n              let newAfterScript = script;\n              if (!_.isEmpty(after)) {\n                newAfterScript = `${after} \\n ${script}`;\n              }\n\n              onChange('set', ['after', 'script'], newAfterScript);\n            }\n\n            onChange('set', ['type'], value);\n            switch (value) {\n              case 'http':\n                onChange('set', ['input'], { method: 'get', url: '' });\n                break;\n              case 'script':\n                onChange('set', ['input'], {\n                  script: createScriptFromHTTP(before, after),\n                });\n                onChange('unset', ['before']);\n                onChange('unset', ['after']);\n                break;\n              case 'ref':\n                onChange('set', ['input'], { ref: '' });\n                onChange('unset', ['before', 'assertions']);\n                onChange('unset', ['after', 'assertions']);\n                break;\n              default:\n                break;\n            }\n          }}\n        />\n\n        <FormInput\n          className=\"flex-1 ml-2\"\n          placeholder=\"step name\"\n          input={{\n            value: _.get(step, 'name', ''),\n            onChange(e) {\n              onChange('set', ['name'], e.target.value);\n            },\n            readOnly,\n          }}\n          fluid\n        />\n      </div>\n\n      {ui.docsOpen ? (\n        <div className=\"mt-4\">\n          <MarkdownEditor\n            className=\"StepBasics-notes\"\n            placeholder=\"Optional step notes...\"\n            value={_.get(step, 'description', '')}\n            readOnly={readOnly}\n            onChange={markdownVal => {\n              onChange('set', ['description'], markdownVal);\n            }}\n          />\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }) => ({\n  ...appStore.injectUi('basics-step'),\n}))(observer(StepBasics));\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { Icon } from 'semantic-ui-react';\nimport cn from 'classnames';\n\nconst EditorContentSection = props => {\n  const { title, canToggle = true, children, ui, updateUi } = props;\n\n  const classNames = cn('EditorContentSection', {\n    'can-toggle': canToggle,\n    'is-closed': ui.isClosed,\n  });\n\n  return (\n    <div className={classNames}>\n      {title ? (\n        <div\n          className=\"EditorContentSection-header flex items-center\"\n          onClick={() => {\n            if (canToggle) {\n              updateUi('set', 'isClosed', !ui.isClosed);\n            }\n          }}\n        >\n          <div className=\"EditorContentSection-title flex-1\">\n            <div className=\"EditorContentSection-title-inner\">\n              <Icon name={`caret ${ui.isClosed ? 'right' : 'down'}`} />\n              {title}\n              <Icon name={`caret ${ui.isClosed ? 'left' : 'down'}`} />\n            </div>\n          </div>\n        </div>\n      ) : null}\n\n      {!ui.isClosed ? <div className=\"EditorContentSection-content\">{children}</div> : null}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`${id}:EditorContentSection`),\n}))(observer(EditorContentSection));\n","let workerInstance;\n\nif (typeof window !== 'undefined') {\n  const createWorker = require('../workers').createWorker;\n  const worker = require('./lineNumbers.worker.js');\n  workerInstance = createWorker(worker());\n}\n\nexport default workerInstance;\n","export const modeObjs = {\n  c: 'text/x-csrc',\n  cpp: 'text/x-c++src',\n  csharp: 'text/x-csharp',\n  css: 'text/css',\n  go: 'text/x-go',\n  html: 'text/html',\n  http: 'message/http',\n  java: 'text/x-java',\n  js: 'text/javascript',\n  json: 'application/json',\n  jsx: 'text/jsx',\n  markdown: 'text/x-markdown',\n  objectivec: 'text/x-objectivec',\n  perl: 'text/x-perl',\n  php: 'text/x-php',\n  python: 'text/x-python',\n  ruby: 'text/x-ruby',\n  scala: 'text/x-scala',\n  shell: 'text/x-sh',\n  swift: 'text/x-swift',\n  xml: 'application/xml',\n  yaml: 'text/x-yaml',\n};\n\nexport const modeOptions = [\n  { text: 'C', value: 'c' },\n  { text: 'C++', value: 'cpp' },\n  { text: 'C#', value: 'csharp' },\n  { text: 'CSS', value: 'css' },\n  { text: 'Go', value: 'go' },\n  { text: 'HTML', value: 'html' },\n  { text: 'HTTP', value: 'http' },\n  { text: 'Java', value: 'java' },\n  { text: 'JavaScript', value: 'js' },\n  { text: 'JSON', value: 'json' },\n  { text: 'JSX', value: 'jsx' },\n  { text: 'Markdown', value: 'markdown' },\n  { text: 'Objective-C', value: 'objectivec' },\n  { text: 'Perl', value: 'perl' },\n  { text: 'PHP', value: 'php' },\n  { text: 'Python', value: 'python' },\n  { text: 'Ruby', value: 'ruby' },\n  { text: 'Scala', value: 'scala' },\n  { text: 'Shell', value: 'shell' },\n  { text: 'Swift', value: 'swift' },\n  { text: 'XML', value: 'xml' },\n  { text: 'YAML', value: 'yaml' },\n];\n","import Browser from 'bowser';\n\nexport const currentBrowser = Browser;\n\nexport const check = ({ browsers = {}, userAgent } = {}) => {\n  return Browser.check(browsers, userAgent);\n};\n\nexport const browser = ({ userAgent } = {}) => {\n  return Browser._detect(userAgent);\n};\n\n/**\n * Minimum browser version supported\n * If a browser is not listed then all its versions are supported\n * To test this, just change the minimum version to one higher than yours\n */\nexport const supportedBrowsers = () => {\n  return {\n    chrome: '50',\n    firefox: '45',\n    msie: '12', // IE 12 doesn't exist so we aren't supporting and IE versions\n    msedge: '14',\n    safari: '10',\n    opera: '32',\n  };\n};\n\nexport const isSupportedBrowser = ({ userAgent } = {}) => {\n  const re = new RegExp('electron', 'i');\n  const isElectron = re.test(userAgent);\n\n  return isElectron || !Browser.isUnsupportedBrowser(supportedBrowsers(), userAgent);\n};\n","/* eslint-disable */\n\n// adapted from\n// https://github.com/JedWatson/react-codemirror/blob/930600810e5ceb4ad426a66098ecf1404d9e32c3/src/Codemirror.js\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport cn from 'classnames';\nimport _ from 'lodash';\n\nimport LineNumberWorker from '@platform/utils/json/lineNumbers-worker';\n\nconst findDOMNode = ReactDOM.findDOMNode;\n\nfunction normalizeLineEndings(str) {\n  if (!str) return str;\n  return str.replace(/\\r\\n|\\r/g, '\\n');\n}\n\nconst setterFunc = () => {};\n_.set(setterFunc, 'prototype.displayText', 'set(key: String, val: any) OR set(val: any)');\n\nconst getterFunc = () => {};\n_.set(getterFunc, 'prototype.displayText', 'get(key: String) OR get()');\n\nconst buildRequest = (root, scopes) => {\n  let displayText;\n\n  if (!root && scopes.step) {\n    displayText = 'input    : The HTTP request this step will send.';\n  } else if (scopes.proxy) {\n    displayText =\n      'request  : The incoming HTTP request, before it is proxied to your upstream URL.';\n  } else {\n    displayText =\n      'request  : The incoming HTTP request. Only applicable when triggering the collection from URL.';\n  }\n\n  const obj = {\n    prototype: {\n      displayText,\n    },\n\n    method: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    url: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    body: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    headers: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    set: setterFunc,\n    get: getterFunc,\n  };\n\n  return obj;\n};\n\nconst buildResponse = (root, scopes) => {\n  let displayText;\n\n  if (!root && scopes.step) {\n    displayText = 'output   : The HTTP response returned from the request sent in this step.';\n  } else if (scopes.proxy) {\n    displayText = 'response : The HTTP response. This is sent back to the downstream consumer.';\n  } else {\n    displayText =\n      'response : The HTTP response. Only applicable when triggering the collection from URL.';\n  }\n\n  const obj = {\n    prototype: {\n      displayText,\n    },\n\n    status: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    body: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    headers: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    set: setterFunc,\n    get: getterFunc,\n  };\n\n  return obj;\n};\n\nconst buildDoubleDollar = scopes => {\n  let displayText;\n  let envDisplayText;\n\n  if (scopes.proxy) {\n    displayText = '$$       : Properties and functions to work with the current HTTP request.';\n    envDisplayText = \"env      : The instance's current environment properties.\";\n  } else {\n    displayText = '$$       : Properties and functions to work with the current collection run.';\n    envDisplayText = \"env      : The collection's current environment properties.\";\n  }\n\n  const obj = {\n    prototype: {\n      displayText,\n    },\n    env: {\n      prototype: {\n        displayText: envDisplayText,\n      },\n      get: getterFunc,\n      set: setterFunc,\n    },\n    request: buildRequest(true, scopes),\n    response: buildResponse(true, scopes),\n  };\n\n  return obj;\n};\n\nconst buildSingleDollar = scopes => {\n  let displayText;\n\n  const obj = {\n    prototype: {\n      displayText: '$        : Properties and functions to work with the current scenario.',\n    },\n\n    ctx: {\n      prototype: {\n        displayText:\n          'ctx      : The scenario context. Store temporary values here. They can be accessed in subsequent steps.',\n      },\n\n      get: getterFunc,\n      set: setterFunc,\n    },\n  };\n\n  return obj;\n};\n\nconst buildInput = scopes => {\n  let obj = {};\n\n  if (scopes.http) {\n    obj = buildRequest(false, scopes);\n  }\n\n  return obj;\n};\n\nconst buildOutput = scopes => {\n  let obj = {};\n\n  if (scopes.http) {\n    obj = buildResponse(false, scopes);\n  }\n\n  return obj;\n};\n\nconst buildGlobalScope = scopes => {\n  const globalScope = {\n    $$: buildDoubleDollar(scopes),\n    $: buildSingleDollar(scopes),\n  };\n\n  if (scopes.step) {\n    const input = buildInput(scopes);\n    if (!_.isEmpty(input)) {\n      globalScope.input = input;\n    }\n\n    const output = buildOutput(scopes);\n    if (!_.isEmpty(output)) {\n      globalScope.output = output;\n    }\n\n    if (scopes.conductor) {\n      globalScope.tests = {\n        prototype: {\n          displayText:\n            \"tests    : Set this object's properties to true or false to add assertions.\",\n        },\n      };\n    }\n  }\n\n  // helpers\n  globalScope.SL = {\n    prototype: {\n      displayText: 'SL       : Various helper functions.',\n    },\n\n    specs: {\n      prototype: {\n        displayText: 'specs : Functions to work with connected API specifications.',\n      },\n\n      buildResponse: {\n        prototype: {\n          displayText:\n            'buildResponse(method: String, url: String, statusCode: Number, contentType: String, exampleKey?: String) response',\n        },\n      },\n    },\n  };\n\n  // lodash\n  globalScope._ = {\n    prototype: {\n      displayText: '_        : Lodash library functions.',\n    },\n\n    // ..._, // DANGER, this causes ALL of lodash to be loaded into our bundle\n  };\n\n  return globalScope;\n};\n\nfunction buildOptions(props) {\n  const newOptions = props.options || {};\n\n  if (!_.isEmpty(props.autocompleteScopes)) {\n    const { autocompleteScopes } = props;\n\n    _.set(newOptions, ['extraKeys', 'Ctrl-Space'], 'autocomplete');\n    _.set(newOptions, ['extraKeys', \"'.'\"], cm => {\n      setTimeout(() => {\n        cm.execCommand('autocomplete');\n      }, 100);\n      return props.codeMirrorInstance.Pass; // tell CodeMirror we didn't handle the key\n    });\n\n    newOptions.hintOptions = {\n      completeSingle: false,\n      globalScope: buildGlobalScope(autocompleteScopes),\n    };\n  }\n\n  return newOptions;\n}\n\nclass CodeMirrorComponent extends React.Component {\n  static displayName = 'CodeMirror';\n\n  static propTypes = {\n    className: PropTypes.any,\n    codeMirrorInstance: PropTypes.func,\n    defaultValue: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocusChange: PropTypes.func,\n    onScroll: PropTypes.func,\n    options: PropTypes.object,\n    path: PropTypes.string,\n    value: PropTypes.string,\n    preserveScrollPosition: PropTypes.bool,\n    scopes: PropTypes.object,\n  };\n\n  static defaultProps = {\n    preserveScrollPosition: false,\n  };\n\n  state = {\n    isFocused: false,\n  };\n\n  currentHighlightLineNumbers = null;\n\n  getCodeMirrorInstance = () => {\n    return this.props.codeMirrorInstance;\n  };\n\n  componentWillMount() {\n    this.highlightLines = _.debounce(this.highlightLines, 500, {\n      leading: true,\n    });\n  }\n\n  componentDidMount() {\n    const { highlightPath, highlightRange, value, defaultValue } = this.props;\n\n    var textareaNode = findDOMNode(this.refs.textarea);\n    var codeMirrorInstance = this.getCodeMirrorInstance();\n    this.codeMirror = codeMirrorInstance.fromTextArea(textareaNode, buildOptions(this.props));\n    this.codeMirror.on('change', this.codemirrorValueChanged);\n    this.codeMirror.on('focus', this.focusChanged.bind(this, true));\n    this.codeMirror.on('blur', this.focusChanged.bind(this, false));\n    this.codeMirror.on('scroll', this.scrollChanged);\n    this.codeMirror.setValue(defaultValue || value || '');\n\n    if (highlightPath) {\n      this.highlightLines(value, highlightPath, { focus: true });\n    }\n\n    if (highlightRange) {\n      this.highlightLineNumbers(highlightRange);\n    }\n  }\n\n  componentWillUnmount() {\n    // is there a lighter-weight way to remove the cm instance?\n    if (this.codeMirror) {\n      this.codeMirror.toTextArea();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      this.codeMirror &&\n      nextProps.value !== undefined &&\n      normalizeLineEndings(this.codeMirror.getValue()) !== normalizeLineEndings(nextProps.value)\n    ) {\n      if (this.props.preserveScrollPosition) {\n        var prevScrollPosition = this.codeMirror.getScrollInfo();\n        this.codeMirror.setValue(nextProps.value);\n        this.codeMirror.scrollTo(prevScrollPosition.left, prevScrollPosition.top);\n      } else {\n        this.codeMirror.setValue(nextProps.value);\n      }\n    }\n\n    if (typeof nextProps.options === 'object') {\n      const options = buildOptions(nextProps);\n      for (var optionName in options) {\n        if (options.hasOwnProperty(optionName)) {\n          this.codeMirror.setOption(optionName, options[optionName]);\n        }\n      }\n    }\n\n    // if the highlightPath has changed, we need to recalculate\n    if (nextProps.highlightPath && !_.isEqual(this.props.highlightPath, nextProps.highlightPath)) {\n      this.highlightLines(nextProps.value, nextProps.highlightPath, { focus: true });\n    }\n\n    // if the highlightRange has changed, we need to recalculate\n    if (\n      nextProps.highlightRange &&\n      !_.isEqual(this.props.highlightRange, nextProps.highlightRange)\n    ) {\n      this.unHighlightLineNumbers(this.props.highlightRange);\n      this.highlightLineNumbers(nextProps.highlightRange);\n    }\n  }\n\n  highlightLines(data, propPath, opts = {}) {\n    if (_.isEmpty(propPath)) {\n      return;\n    }\n\n    const { focus } = opts;\n\n    LineNumberWorker.postMessage({ data, propPath })\n      .then(lineNumbers => {\n        if (!lineNumbers || _.get(lineNumbers, 'error')) {\n          // can't highlight if we can't parse the JSON in the first place\n          return;\n        }\n        const highlightStart = _.get(lineNumbers, 'from', 0);\n        const highlightEnd = _.get(lineNumbers, 'to', 0);\n\n        if (focus) {\n          const y = this.codeMirror.charCoords({ line: highlightStart - 1, ch: 0 }, 'local').top;\n          this.codeMirror.scrollTo(null, Math.max(y - 33, 0));\n        }\n\n        if (_.isEqual(this.currentHighlightLineNumbers, lineNumbers)) {\n          // if line numbers have not changed, we're set!\n          return;\n        }\n\n        if (this.currentHighlightLineNumbers) {\n          const prevHighlightStart = this.currentHighlightLineNumbers.from;\n          const prevHighlightEnd = this.currentHighlightLineNumbers.to;\n          this.unHighlightLineNumbers([{ from: prevHighlightStart, to: prevHighlightEnd }]);\n        }\n\n        this.highlightLineNumbers([{ from: highlightStart, to: highlightEnd }]);\n\n        this.currentHighlightLineNumbers = lineNumbers;\n      })\n      .catch(e => {\n        console.error('LineNumberWorker:error', { error: e, data, propPath });\n      });\n  }\n\n  unHighlightLineNumbers = lineNumbers => {\n    _.forEach(lineNumbers, lineNumber => {\n      this.codeMirror.eachLine(Math.max(lineNumber.from - 1, 0), lineNumber.to, line => {\n        this.codeMirror.removeLineClass(line, 'wrap', 'CodeMirror-highlightedText');\n      });\n    });\n  };\n\n  highlightLineNumbers = lineNumbers => {\n    _.forEach(lineNumbers, lineNumber => {\n      this.codeMirror.eachLine(Math.max(lineNumber.from - 1, 0), lineNumber.to, line => {\n        this.codeMirror.addLineClass(line, 'wrap', 'CodeMirror-highlightedText');\n      });\n    });\n  };\n\n  getCodeMirror = () => {\n    return this.codeMirror;\n  };\n\n  focus = () => {\n    if (this.codeMirror) {\n      this.codeMirror.focus();\n    }\n  };\n\n  focusChanged = focused => {\n    const { onFocusChange } = this.props;\n\n    this.setState({\n      isFocused: focused,\n    });\n\n    onFocusChange && onFocusChange(this.getCodeMirror().doc.getValue(), focused);\n  };\n\n  scrollChanged = cm => {\n    const { onScroll } = this.props;\n    onScroll && onScroll(cm.getScrollInfo());\n  };\n\n  codemirrorValueChanged = (doc, change) => {\n    const { highlightPath, onChange } = this.props;\n\n    const value = doc.getValue();\n\n    this.highlightLines(value, highlightPath);\n\n    if (onChange && change.origin !== 'setValue') {\n      onChange(value, change);\n    }\n  };\n\n  render() {\n    const { path, value, className } = this.props;\n    const { isFocused } = this.state;\n\n    var editorClassName = cn('ReactCodeMirror', className, {\n      'ReactCodeMirror--focused': isFocused,\n    });\n\n    return (\n      <div className={editorClassName}>\n        <textarea ref=\"textarea\" name={path} defaultValue={value} autoComplete=\"off\" />\n      </div>\n    );\n  }\n}\n\nexport default CodeMirrorComponent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { modeObjs } from '@platform/utils/codeMirror';\n// import { asyncComponent } from 'react-async-component';\nimport { registerLogger } from '@platform/utils/logging';\nimport { currentBrowser } from '@platform/utils/browser';\n\n// import PageLoading from '../PageLoading';\nimport ErrorBoundary from '../ErrorBoundary';\n\nimport Editor from './editor';\n\nconst log = registerLogger('components', 'CodeEditor');\n\n// NOTE: we have been using \"name\" as a unique identifier.. we are transitioning to use \"id\"\n\nlet CodeMirror;\nif (typeof window !== 'undefined' && window.localStorage) {\n  CodeMirror = require('../CodeMirror').default;\n}\n// const Editor = asyncComponent({\n//   serverMode: 'defer',\n//   resolve: () => System.import('./editor'),\n//   LoadingComponent: () => <PageLoading inverted={false} />, // Optional\n//   ErrorComponent: ({ error }) => <div>{error.message}</div>, // Optional\n// });\n\nclass CodeEditor extends React.Component {\n  static propTypes = {\n    id: PropTypes.string,\n    name: PropTypes.string, // DEPRECATED\n    mode: PropTypes.string,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array]),\n    keyMap: PropTypes.string,\n    lineWrapping: PropTypes.bool,\n    lineNumbers: PropTypes.bool,\n    readOnly: PropTypes.bool,\n    placeholder: PropTypes.string,\n    lint: PropTypes.bool,\n    tabSize: PropTypes.number,\n    highlightLines: PropTypes.object,\n    preserveScrollPosition: PropTypes.bool,\n    noDebounce: PropTypes.bool,\n    theme: PropTypes.string,\n    autoRefresh: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  };\n\n  static defaultProps = {\n    mode: 'json',\n    keyMap: 'sublime',\n    lineWrapping: true,\n    lineNumbers: true,\n    readOnly: false,\n    placeholder: 'Type here...',\n    lint: true,\n    tabSize: 2,\n  };\n\n  state = {\n    lastBroadcastedValue: null,\n    broadcasting: false,\n  };\n\n  checkId(props) {\n    if (!props.id && !props.name) {\n      log.warn(\n        'CodeEditor requires that an id or name be passed in (note that name is deprecated)'\n      );\n    }\n  }\n\n  componentWillMount() {\n    this.checkId(this.props);\n    if (!this.props.noDebounce) {\n      this.onChange = _.debounce(this.onChange, 500, {\n        leading: true,\n      });\n    }\n  }\n\n  onChange = (val, change) => {\n    this.setState({\n      lastBroadcastedValue: val,\n      broadcasting: true,\n    });\n\n    if (this.props.onChange) {\n      this.props.onChange(val, change);\n    }\n  };\n\n  componentWillUpdate(nextProps, nextState) {\n    this.checkId(nextProps);\n    nextState.broadcasting = false;\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const shouldUpdate =\n      this.props.id !== nextProps.id ||\n      this.props.name !== nextProps.name ||\n      (!nextState.broadcasting && nextState.lastBroadcastedValue !== nextProps.value);\n\n    nextState.broadcasting = false;\n\n    return shouldUpdate;\n  }\n\n  parseValue = value => {\n    const { mode = 'json' } = this.props;\n\n    let val = value;\n    if (mode === 'json') {\n      if (typeof value === 'string') {\n        try {\n          val = JSON.parse(value);\n        } catch (e) {}\n      }\n\n      if (typeof val === 'object') {\n        val = JSON.stringify(val, null, 2);\n      }\n    } else {\n      val = value;\n    }\n\n    if (val && typeof val !== 'string') {\n      val = JSON.stringify(val, null, 2);\n    }\n\n    return val || '';\n  };\n\n  renderEditor = codeMirrorInstance => {\n    const {\n      mode = 'json',\n      value,\n      keyMap,\n      tabSize,\n      lineWrapping,\n      lineNumbers,\n      readOnly,\n      placeholder,\n      lint,\n      autocompleteScopes,\n      preserveScrollPosition,\n      highlightPath,\n      highlightRange,\n      onFocus,\n      onBlur,\n      theme,\n      autoRefresh,\n    } = this.props;\n\n    const modeObj = modeObjs[mode] || mode;\n    let fullPlaceholder = placeholder;\n    if (!_.isEmpty(autocompleteScopes)) {\n      fullPlaceholder = `${placeholder} Press ctrl + spacebar to show autocomplete list.`;\n    }\n\n    return (\n      <Editor\n        codeMirrorInstance={codeMirrorInstance}\n        value={this.parseValue(value)}\n        onChange={this.onChange}\n        onFocusChange={(v, focused) => {\n          if (focused && onFocus) {\n            onFocus(v);\n          } else if (!focused && onBlur) {\n            onBlur(v);\n          }\n        }}\n        highlightPath={highlightPath}\n        highlightRange={highlightRange}\n        autocompleteScopes={autocompleteScopes}\n        preserveScrollPosition={preserveScrollPosition}\n        options={{\n          mode: modeObj,\n          keyMap,\n          tabSize,\n          lineWrapping,\n          lineNumbers,\n          readOnly,\n          autoRefresh,\n          // disable in safari, because it locks the browser for large strings\n          lint: currentBrowser.safari ? false : lint,\n          theme: theme || 'default',\n          placeholder: fullPlaceholder,\n          extraKeys: {\n            'Alt-F': 'findPersistent',\n          },\n          styleSelectedText: true,\n          matchBrackets: true,\n          autoCloseBrackets: true,\n          highlightSelectionMatches: true,\n          foldGutter: true,\n          gutters: ['CodeMirror-lint-markers', 'CodeMirror-linenumbers', 'CodeMirror-foldgutter'],\n        }}\n      />\n    );\n  };\n\n  render() {\n    const { autogrow, maxLines, className = '', styles = {}, noFill } = this.props;\n\n    const classes = ['CodeEditor'];\n    if (!noFill) {\n      classes.push('fill-space');\n    }\n    if (autogrow) {\n      classes.push('autogrow');\n    }\n    if (maxLines) {\n      classes.push(`autogrow-${maxLines}`);\n    }\n    if (className) {\n      classes.push(className);\n    }\n\n    return (\n      <ErrorBoundary>\n        <div className={classes.join(' ')} style={styles.root || {}}>\n          {CodeMirror ? this.renderEditor(CodeMirror) : null}\n        </div>\n      </ErrorBoundary>\n    );\n  }\n}\n\nexport default CodeEditor;\n","import React from 'react';\n\nimport FormInputLabel from '../FormInputLabel';\nimport CodeEditor from '../CodeEditor';\n\nconst FormCodeEditor = props => {\n  const { id, label, tip, required, mode = 'json', className = '', input, ...extraProps } = props;\n\n  return (\n    <div className={`FormCodeEditor ${className}`}>\n      <FormInputLabel label={label} tip={tip} required={required} />\n\n      <CodeEditor id={id} mode={mode} autogrow noFill {...input} {...extraProps} />\n    </div>\n  );\n};\n\nexport default FormCodeEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { Button } from 'semantic-ui-react';\n\nimport FormInput from '../FormInput';\n\n// NOTE: cloneDeep is needed in the _.set, _unset below to\n// not break shouldComponentUpdate in other components\n\nclass FormInputMap extends React.Component {\n  static propTypes = {\n    fields: PropTypes.object,\n    className: PropTypes.string,\n    handleUpdate: PropTypes.func.isRequired,\n    noAdd: PropTypes.bool,\n    noUnset: PropTypes.bool, // don't unset value if empty fields array (just set to empty array)\n    renderFactory: PropTypes.func,\n    size: PropTypes.string,\n  };\n\n  state = {\n    externalFields: '',\n    fields: [],\n  };\n\n  componentWillMount() {\n    if (!_.isEmpty(this.props.fields)) {\n      this.onExternalValueChange(this.props, this.state);\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    this.onExternalValueChange(nextProps, nextState);\n  }\n\n  convertExternalValue = (externalFields = {}) => {\n    const fields = [];\n\n    if (externalFields) {\n      _.map(externalFields, (value, name) => {\n        if (typeof value === 'object') {\n          fields.push({\n            name,\n            ...value,\n          });\n        } else {\n          fields.push({\n            name,\n            value,\n          });\n        }\n      });\n    }\n\n    return fields;\n  };\n\n  onExternalValueChange = (props, state) => {\n    if (state.internal) {\n      this.setState({\n        internal: false,\n      });\n    } else if (!_.isEqual(props.fields, state.externalFields)) {\n      this.setState({\n        externalFields: props.fields,\n        fields: this.convertExternalValue(props.fields),\n      });\n    }\n  };\n\n  onChange = fields => {\n    const externalFields = {};\n    for (const i of fields) {\n      const { name, ...extra } = i;\n      if (_.size(extra) <= 1 && extra.hasOwnProperty('value')) {\n        externalFields[i.name] = extra.value || '';\n      } else {\n        externalFields[name] = extra;\n      }\n    }\n\n    this.setState({\n      internal: true,\n      externalFields,\n      fields,\n    });\n\n    if (!this.props.noUnset && _.isEmpty(externalFields)) {\n      this.props.handleUpdate('unset', []);\n    } else {\n      this.props.handleUpdate('set', [], externalFields);\n    }\n  };\n\n  render() {\n    const {\n      className = '',\n      addText = 'Add',\n      namePlaceholder = '',\n      valuePlaceholder = '',\n      meta = {},\n      renderFactory,\n      noAdd,\n      readOnly,\n      size,\n    } = this.props;\n\n    let contentElem;\n    if (_.isEmpty(this.state.fields) && renderFactory) {\n      contentElem = <div className=\"c-muted\">none</div>;\n    } else if (renderFactory) {\n      contentElem = renderFactory({\n        fields: this.state.fields,\n        onChange: (t, p, v) => {\n          const fields = _.cloneDeep(this.state.fields);\n\n          switch (t) {\n            case 'set':\n              _.set(fields, p, v);\n              break;\n            case 'unset':\n              _.unset(fields, p);\n              break;\n          }\n\n          this.onChange(fields);\n        },\n        onRemove: index => {\n          const fields = _.cloneDeep(this.state.fields);\n          _.pullAt(fields, index);\n          this.onChange(fields);\n        },\n      });\n    } else {\n      contentElem = this.state.fields.map((field, index) => {\n        return (\n          <div key={index} className=\"mt-3\">\n            <div className=\"flex items-center\">\n              <FormInput\n                id={`FormInputMapKey-${index}`}\n                input={{\n                  value: field.name,\n                  onChange: (e, { value }) => {\n                    const fields = _.cloneDeep(this.state.fields);\n                    _.set(fields, [index, 'name'], value);\n                    this.onChange(fields);\n                  },\n                }}\n                disabled={meta.submitting}\n                placeholder={namePlaceholder}\n                className=\"flex-1 mr-2\"\n                readOnly={readOnly}\n                size={size}\n                fluid\n              />\n\n              <b>:</b>\n\n              <FormInput\n                id={`FormInputMapValue-${index}`}\n                input={{\n                  value: field.value,\n                  onChange: (e, { value }) => {\n                    const fields = _.cloneDeep(this.state.fields);\n                    _.set(fields, [index, 'value'], value);\n                    this.onChange(fields);\n                  },\n                }}\n                disabled={meta.submitting}\n                placeholder={valuePlaceholder}\n                className=\"flex-1 ml-2\"\n                readOnly={readOnly}\n                size={size}\n                fluid\n              />\n              {readOnly ? null : (\n                <div className=\"ml-3\">\n                  <Button\n                    icon=\"trash\"\n                    size={size}\n                    onClick={() => {\n                      const fields = _.cloneDeep(this.state.fields);\n                      _.pullAt(fields, index);\n                      this.onChange(fields);\n                    }}\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      });\n    }\n\n    return (\n      <div className={`FormInputList ${className}`}>\n        {noAdd || readOnly ? null : (\n          <Button\n            onClick={() => {\n              const fields = _.cloneDeep(this.state.fields);\n              fields.push({ name: '', value: '' });\n              this.onChange(fields);\n            }}\n            basic\n            disabled={readOnly}\n            size={size}\n          >\n            {addText}\n          </Button>\n        )}\n\n        {contentElem}\n      </div>\n    );\n  }\n}\n\nexport default FormInputMap;\n","import React from 'react';\nimport cn from 'classnames';\nimport { Radio } from 'semantic-ui-react';\n\nimport FormInputLabel from '../FormInputLabel';\n\nconst FormRadio = props => {\n  const {\n    checked,\n    onChange,\n    className = '',\n    label,\n    tip,\n    required,\n    labelProps,\n    ...extraProps\n  } = props;\n\n  return (\n    <div\n      className={cn('FormRadio flex', className, {\n        'FormRadio-labeled': label,\n      })}\n    >\n      <Radio\n        className={cn({ 'pr-2': label })}\n        checked={checked}\n        onChange={onChange}\n        {...extraProps}\n      />\n\n      <FormInputLabel label={label} tip={tip} required={required} {...labelProps} />\n    </div>\n  );\n};\n\nexport default FormRadio;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport FormCodeEditor from '../FormCodeEditor';\nimport FormInputMap from '../FormInputMap';\nimport FormRadio from '../FormRadio';\nimport FormDropdown from '../FormDropdown';\n\nconst FormHttpBodyEditor = ({ id, className = '', input = {}, handleUpdate, readOnly }) => {\n  const handleUpdateContentType = (updateStep, headers = {}, contentType) => {\n    const newHeaders = _.map(headers, (value, name) => ({ name, value }));\n    const contentTypeIndex = _.findIndex(newHeaders, val => {\n      return val.name.toLowerCase() === 'content-type';\n    });\n\n    if (contentTypeIndex >= 0) {\n      let setHeaders = false;\n      if (contentType) {\n        newHeaders[contentTypeIndex].value = contentType;\n        setHeaders = true;\n      } else if (newHeaders.length === 1) {\n        updateStep('unset', ['input', 'headers']);\n      } else {\n        _.pullAt(newHeaders, contentTypeIndex);\n        setHeaders = true;\n      }\n\n      if (setHeaders) {\n        const headerMap = {};\n        for (const h of newHeaders) {\n          headerMap[h.name] = h.value;\n        }\n        updateStep('set', ['input', 'headers'], headerMap);\n      }\n    } else if (contentType) {\n      updateStep('set', ['input', 'headers'], {\n        ...headers,\n        'Content-Type': contentType,\n      });\n    }\n  };\n\n  const headers = input.headers || {};\n  const contentType = headers['content-type'] || headers['Content-Type'];\n  const paramContentTypes = ['application/x-www-form-urlencoded', 'multipart/form-data'];\n\n  let raw;\n  if (!_.includes(paramContentTypes, contentType)) {\n    raw = true;\n  }\n\n  let mode = 'text';\n  if (!_.isEmpty(contentType)) {\n    if (contentType.match(/json/)) {\n      mode = 'json';\n    } else if (contentType.match(/xml/)) {\n      mode = 'xml';\n    } else if (contentType.match(/html/)) {\n      // mode = 'html'; // we don't have the html ace editor stuff loaded right now\n    }\n  }\n\n  let bodyEditorContent;\n  if (raw) {\n    bodyEditorContent = (\n      <FormCodeEditor\n        id={id}\n        readOnly={readOnly}\n        input={{\n          value: input.body || '',\n          onChange(value) {\n            handleUpdate('set', ['input', 'body'], value);\n          },\n        }}\n        mode={mode}\n      />\n    );\n  } else {\n    bodyEditorContent = (\n      <FormInputMap\n        id={id}\n        fields={typeof input.body === 'object' ? input.body : {}}\n        handleUpdate={(t, p, v) => {\n          handleUpdate(t, ['input', 'body'].concat(p), v);\n        }}\n        addText=\"Add Property\"\n        namePlaceholder=\"param name\"\n        valuePlaceholder=\"param value\"\n        readOnly={readOnly}\n        size=\"tiny\"\n      />\n    );\n  }\n\n  return (\n    <div className={`FormHttpBodyEditor ${className}`}>\n      <div className=\"flex mb-6 items-center\">\n        <FormDropdown\n          className=\"mr-6\"\n          text={contentType || 'no content type'}\n          button\n          basic\n          disabled={readOnly}\n          size=\"tiny\"\n          options={[\n            { text: 'no content type', value: null },\n            { text: 'Text (text/plain)', value: 'text/plain' },\n            { text: 'JSON (application/json)', value: 'application/json' },\n            { text: 'Javascript (application/javascript)', value: 'application/javascript' },\n            { text: 'XML (application/xml)', value: 'application/xml' },\n            { text: 'XML (text/xml)', value: 'text/xml' },\n            { text: 'HTML (text/html)', value: 'text/html' },\n          ]}\n          onChange={(e, { value }) => {\n            handleUpdateContentType(handleUpdate, input.headers, value);\n          }}\n        />\n\n        <div className=\"mr-6\">\n          <FormRadio\n            label=\"raw\"\n            labelProps={{ className: 'text-sm font-normal' }}\n            name=\"contentType\"\n            value=\"\"\n            checked={raw}\n            onChange={() => {\n              handleUpdateContentType(handleUpdate, input.headers, '');\n            }}\n            disabled={readOnly}\n          />\n        </div>\n\n        <div className=\"mr-6\">\n          <FormRadio\n            label=\"x-www-form-urlencoded\"\n            labelProps={{ className: 'text-sm font-normal' }}\n            name=\"contentType\"\n            value=\"application/x-www-form-urlencoded\"\n            checked={contentType === 'application/x-www-form-urlencoded'}\n            onChange={() => {\n              handleUpdateContentType(\n                handleUpdate,\n                input.headers,\n                'application/x-www-form-urlencoded'\n              );\n            }}\n            disabled={readOnly}\n          />\n        </div>\n\n        <div className=\"mr-6\">\n          <FormRadio\n            label=\"form-data\"\n            labelProps={{ className: 'text-sm font-normal' }}\n            name=\"contentType\"\n            value=\"multipart/form-data\"\n            checked={contentType === 'multipart/form-data'}\n            onChange={() => {\n              handleUpdateContentType(handleUpdate, input.headers, 'multipart/form-data');\n            }}\n            disabled={readOnly}\n          />\n        </div>\n      </div>\n\n      {bodyEditorContent}\n    </div>\n  );\n};\n\nexport default FormHttpBodyEditor;\n","import React from 'react';\nimport cn from 'classnames';\nimport { Checkbox } from 'semantic-ui-react';\n\nimport FormInputLabel from '../FormInputLabel';\n\nconst FormCheckbox = props => {\n  const {\n    checked,\n    onChange,\n    label,\n    labelPosition = 'left',\n    labelClassname,\n    labelStyle,\n    tip,\n    required,\n    className = '',\n    inline,\n    checkboxProps,\n    inverted,\n    transparent,\n    ...extraProps\n  } = props;\n\n  const labelComponent = (\n    <FormInputLabel\n      inline={inline}\n      label={label}\n      tip={tip}\n      required={required}\n      className={labelClassname}\n      style={labelStyle}\n      inverted={inverted || transparent}\n    />\n  );\n\n  return (\n    <div\n      className={cn(\n        'FormCheckbox',\n        className,\n        'flex',\n        inline ? 'is-inline items-center' : 'flex-col',\n        {\n          transparent,\n        }\n      )}\n    >\n      {labelPosition === 'left' && labelComponent}\n\n      <Checkbox\n        checked={checked ? true : false}\n        onChange={(name, e) => {\n          if (onChange) onChange(e.checked);\n        }}\n        {...checkboxProps}\n        {...extraProps}\n      />\n\n      {labelPosition === 'right' && labelComponent}\n    </div>\n  );\n};\n\nexport default FormCheckbox;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Button, Modal } from 'semantic-ui-react';\n\nexport default class SLModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { modalOpen: props.initialOpen };\n  }\n\n  handleOpen = e => {\n    this.props.onOpen ? this.props.onOpen() : null;\n\n    this.setState({\n      modalOpen: true,\n    });\n  };\n\n  handleClose = () => {\n    if (this.props.onClose) this.props.onClose();\n\n    if (!this.props.forceOpen) {\n      this.setState({\n        modalOpen: false,\n      });\n    }\n  };\n\n  render() {\n    const {\n      className = '',\n      title,\n      content,\n      contentFactory,\n      forceOpen,\n      triggerFactory,\n      triggerButton,\n      cancelButton,\n      confirmButton,\n      size = 'small',\n      contentProps = {},\n      ...otherProps\n    } = this.props;\n\n    const modalProps = _.omit(otherProps, ['initialOpen']);\n    const { modalOpen } = this.state;\n\n    const open = modalOpen || forceOpen;\n\n    let triggerElem;\n    if (triggerButton) {\n      triggerElem = (\n        <Button\n          {...triggerButton}\n          onClick={e => {\n            triggerButton.onClick ? triggerButton.onClick(e, this) : this.handleOpen(e);\n          }}\n        />\n      );\n    } else if (triggerFactory) {\n      triggerElem = triggerFactory({ handleOpen: this.handleOpen });\n    }\n\n    const modalActions = [];\n\n    if (cancelButton) {\n      modalActions.push(\n        <Button\n          key=\"modal-cancelButton\"\n          {...cancelButton}\n          onClick={e => {\n            cancelButton.onClick ? cancelButton.onClick(e, this) : this.handleClose(e);\n          }}\n        />\n      );\n    }\n\n    if (confirmButton) {\n      modalActions.push(\n        <Button\n          key=\"modal-confirmButton\"\n          {...confirmButton}\n          onClick={e => {\n            confirmButton.onClick ? confirmButton.onClick(e, this) : this.handleClose(e);\n          }}\n        />\n      );\n    }\n\n    return (\n      <Modal\n        {...modalProps}\n        className={className}\n        trigger={triggerElem}\n        open={open || false}\n        onClose={this.handleClose}\n        size={size}\n        style={{ top: '10%' }}\n      >\n        {title && <Modal.Header>{title}</Modal.Header>}\n\n        <Modal.Content {...contentProps}>\n          <Modal.Description>{open ? contentFactory(this) : content}</Modal.Description>\n        </Modal.Content>\n\n        {modalActions.length > 0 && <Modal.Actions>{modalActions}</Modal.Actions>}\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport cn from 'classnames';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Popup, Icon } from 'semantic-ui-react';\n\nimport { authUrlOptions, accessUrlOptions } from '@platform/utils/authorization';\nimport { alert } from '@platform/utils/alert';\n\nimport ErrorMessage from '../ErrorMessage';\nimport Modal from '../Modal';\nimport FormInput from '../FormInput';\nimport FormSelect from '../FormSelect';\n\nclass OAuth2TokenFormModal extends React.Component {\n  render() {\n    const { readOnly, tokenStore, className, oauth2 = {} } = this.props;\n\n    const {\n      credentials = {},\n      authorizationMethod,\n      authConfig = {},\n      isValid,\n      isCreatingToken,\n      getToken,\n      updateCredentials,\n      updateIsCreatingToken,\n      error,\n      clearError,\n    } = tokenStore;\n\n    const { flow = 'accessCode' } = credentials;\n\n    return (\n      <Modal\n        title=\"Get Access Token\"\n        size=\"tiny\"\n        triggerButton={{ secondary: true, content: 'Get Access Token', size: 'tiny' }}\n        cancelButton={{\n          negative: true,\n          content: 'Cancel',\n        }}\n        onClose={() => {\n          updateIsCreatingToken(false);\n          clearError();\n        }}\n        confirmButton={{\n          positive: true,\n          disabled: isCreatingToken || !isValid,\n          loading: isCreatingToken,\n          content: 'Get Access Token',\n          onClick: (e, modal) => {\n            clearError();\n\n            getToken({\n              onSuccess: () => {\n                modal.handleClose();\n                alert.success('Access Token Created.');\n              },\n            });\n          },\n        }}\n        contentFactory={() => (\n          <div className={cn('text-sm', className)}>\n            {error && (\n              <ErrorMessage\n                className=\"mb-6\"\n                error=\"Error getting access token, check the developer console for more details.\"\n              />\n            )}\n\n            {!readOnly && (\n              <div className=\"mb-2\">\n                <FormInput\n                  value={_.get(credentials, 'name', '')}\n                  placeholder=\"My OAuth token\"\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'name', value);\n                  }}\n                  label={{\n                    content: 'Token Name',\n                    basic: true,\n                    className: 'Label-fw',\n                  }}\n                  fluid\n                />\n              </div>\n            )}\n\n            {!readOnly && (\n              <div className=\"mb-2\">\n                <FormSelect\n                  value={flow}\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'flow', value);\n                  }}\n                  options={[\n                    {\n                      text: 'Authorization Code',\n                      value: 'accessCode',\n                    },\n                    {\n                      text: 'Implicit',\n                      value: 'implicit',\n                    },\n                    {\n                      text: 'Password Credentials',\n                      value: 'password',\n                    },\n                    {\n                      text: 'Client Credentials',\n                      value: 'application',\n                    },\n                  ]}\n                  label={{\n                    content: 'Grant Type',\n                    basic: true,\n                    className: 'Label-fw',\n                  }}\n                  inline\n                  fluid\n                />\n              </div>\n            )}\n\n            {flow === 'password' && [\n              <div className=\"mb-2\" key=\"username\">\n                <FormInput\n                  value={_.get(credentials, 'username', '')}\n                  placeholder=\"username\"\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'username', value);\n                  }}\n                  label={{\n                    content: 'Username*',\n                    basic: true,\n                    className: 'Label-fw',\n                  }}\n                  fluid\n                />\n              </div>,\n\n              <div className=\"mb-2\" key=\"password\">\n                <FormInput\n                  type=\"password\"\n                  value={_.get(credentials, 'password', '')}\n                  placeholder=\"****************************************\"\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'password', value);\n                  }}\n                  label={{\n                    content: 'Password*',\n                    basic: true,\n                    className: 'Label-fw',\n                  }}\n                  fluid\n                />\n              </div>,\n            ]}\n\n            <div className=\"mb-2\">\n              <FormInput\n                value={_.get(credentials, 'client_id', '')}\n                placeholder=\"12345123451234512345\"\n                onChange={(e, { value }) => {\n                  updateCredentials('set', 'client_id', value);\n                }}\n                label={{\n                  content: 'Client ID*',\n                  basic: true,\n                  className: 'Label-fw',\n                }}\n                fluid\n              />\n            </div>\n\n            <div className=\"mb-2\">\n              <FormInput\n                type=\"password\"\n                value={_.get(credentials, 'client_secret', '')}\n                placeholder=\"****************************************\"\n                onChange={(e, { value }) => {\n                  updateCredentials('set', 'client_secret', value);\n                }}\n                label={{\n                  content: 'Client Secret*',\n                  basic: true,\n                  className: 'Label-fw',\n                }}\n                fluid\n              />\n            </div>\n\n            {!readOnly && (\n              <div className=\"mb-2\">\n                <FormInput\n                  value={_.get(credentials, 'scope', '')}\n                  placeholder=\"scope1, scope2\"\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'scope', value);\n                  }}\n                  label={{\n                    basic: true,\n                    className: 'Label-fw',\n                    children: (\n                      <div>\n                        Scopes (optional)\n                        <span className=\"FormInputTip\">\n                          <Popup\n                            trigger={<Icon name=\"question\" size=\"small\" />}\n                            content=\"Seperate scopes by a comma. Ex &quot;scope1, scope2&quot;\"\n                            size=\"small\"\n                            wide=\"very\"\n                          />\n                        </span>\n                      </div>\n                    ),\n                  }}\n                  fluid\n                />\n              </div>\n            )}\n\n            {(flow === 'accessCode' || flow === 'authorizationCode' || flow === 'implicit') &&\n              // on readOnly we want to hide the drop down options and still make the entry editable\n              (readOnly ? (\n                <div className=\"mb-2\">\n                  <FormInput\n                    value={_.get(credentials, 'authorize_url', '')}\n                    placeholder=\"https://provider.com/oauth/authorize\"\n                    onChange={(e, { value }) => {\n                      updateCredentials('set', 'authorize_url', value);\n                    }}\n                    label={{\n                      content: 'Authorize URL*',\n                      basic: true,\n                      className: 'Label-fw',\n                    }}\n                    fluid\n                  />\n                </div>\n              ) : (\n                <div className=\"mb-2\">\n                  <FormSelect\n                    value={_.get(credentials, 'authorize_url', '')}\n                    placeholder=\"https://provider.com/oauth/authorize\"\n                    onChange={(e, { value }) => {\n                      updateCredentials('set', 'authorize_url', value);\n                    }}\n                    label={{\n                      content: 'Authorize URL*',\n                      basic: true,\n                      className: 'Label-fw',\n                    }}\n                    options={_.uniqBy(\n                      _.concat(authUrlOptions.map(u => ({ text: u, value: u })), [\n                        { text: credentials.authorize_url, value: credentials.authorize_url },\n                      ]),\n                      'value'\n                    )}\n                    inline\n                    fluid\n                  />\n                </div>\n              ))}\n\n            {flow !== 'implicit' &&\n              // on readOnly we want to hide the drop down options and still make the entry editable\n              (readOnly ? (\n                <div className=\"mb-2\">\n                  <FormInput\n                    value={_.get(credentials, 'access_token_url', '')}\n                    placeholder=\"https://provider.com/oauth/access_token\"\n                    onChange={(e, { value }) => {\n                      updateCredentials('set', 'access_token_url', value);\n                    }}\n                    label={{\n                      content: 'Access Token URL*',\n                      basic: true,\n                      className: 'Label-fw',\n                    }}\n                    fluid\n                  />\n                </div>\n              ) : (\n                <div className=\"mb-2\">\n                  <FormSelect\n                    value={_.get(credentials, 'access_token_url', '')}\n                    placeholder=\"https://provider.com/oauth/access_token\"\n                    onChange={(e, { value }) => {\n                      updateCredentials('set', 'access_token_url', value);\n                    }}\n                    label={{\n                      content: 'Access Token URL*',\n                      basic: true,\n                      className: 'Label-fw',\n                    }}\n                    options={_.uniqBy(\n                      _.concat(accessUrlOptions.map(u => ({ text: u, value: u })), [\n                        { text: credentials.access_token_url, value: credentials.access_token_url },\n                      ]),\n                      'value'\n                    )}\n                    inline\n                    fluid\n                  />\n                </div>\n              ))}\n\n            {(flow === 'accessCode' || flow === 'authorizationCode' || flow === 'implicit') &&\n              !readOnly && (\n                <div className=\"mb-4\">\n                  <FormInput\n                    value={authConfig.redirectUri}\n                    label={{\n                      basic: true,\n                      className: 'Label-fw',\n                      children: (\n                        <div>\n                          Callback URL{' '}\n                          <span className=\"FormInputTip\">\n                            <Popup\n                              trigger={<Icon name=\"question\" size=\"small\" />}\n                              content=\"Enter this in the application settings of your API provider.\"\n                              size=\"small\"\n                              wide=\"very\"\n                            />\n                          </span>\n                        </div>\n                      ),\n                    }}\n                    readOnly\n                    fluid\n                  />\n                </div>\n              )}\n\n            <div className=\"mb-2\">\n              <FormSelect\n                value={authorizationMethod}\n                onChange={(e, { value }) => {\n                  updateCredentials('set', 'authorization_method', value);\n                }}\n                label={{\n                  content: 'Client Authentication',\n                  basic: true,\n                  className: 'Label-fw',\n                }}\n                options={[\n                  {\n                    text: 'Send as Basic Auth header',\n                    value: 'header',\n                  },\n                  {\n                    text: 'Send client credentials in body',\n                    value: 'body',\n                  },\n                ]}\n                inline\n                fluid\n              />\n            </div>\n          </div>\n        )}\n        onOpen={() => {\n          if (!_.isEmpty(oauth2.credentials)) {\n            updateCredentials('set', [], oauth2.credentials || {});\n          }\n        }}\n      />\n    );\n  }\n}\n\nexport default inject(stores => {\n  const { oauthTokenStore, userService, projectService } = stores;\n\n  const userId = _.get(userService, 'authorizedUser.id');\n  const projectId = _.get(projectService, 'current.id');\n\n  const tokenStore = oauthTokenStore.getOrRegisterInstance(userId, projectId);\n\n  return {\n    tokenStore,\n  };\n})(observer(OAuth2TokenFormModal));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { inject, observer } from 'mobx-react';\nimport { Icon, Button, Popup } from 'semantic-ui-react';\n\nconst EntityEditorGroup = props => {\n  const {\n    id,\n    name,\n    className = '',\n    children,\n    contentFactory,\n    contentClassName = '',\n    padded,\n    active,\n    warning,\n    error,\n    subtitle,\n    defaultOpen,\n    ui,\n    updateUi,\n    actions = [],\n    tipFactory,\n    onToggle,\n    forceOpen,\n  } = props;\n\n  let isOpen;\n  if (onToggle) {\n    if (forceOpen) {\n      isOpen = true;\n    }\n  } else if (ui.open || (!ui.hasOwnProperty('open') && (defaultOpen || ui.forceOpen))) {\n    // should be open if the user said it should be, by default it is, or if\n    // it was originally forcedOpen and the user has not closed it\n    isOpen = true;\n  }\n\n  const actionElems = _.map(actions, (action, index) => {\n    return (\n      <div className=\"EntityEditorGroup-action\" key={index}>\n        <Button basic compact size=\"mini\" {...action} />\n      </div>\n    );\n  });\n\n  return (\n    <div\n      id={id}\n      className={cn('EntityEditorGroup', className, {\n        'is-active': active,\n        'is-open': isOpen,\n      })}\n    >\n      <div\n        className=\"EntityEditorGroup-header flex items-center\"\n        onClick={e => {\n          if (isOpen && _.get(e, 'target.tagName', '').toLowerCase() === 'button') {\n            return;\n          }\n\n          updateUi('set', ['open'], !isOpen);\n\n          if (onToggle) {\n            onToggle(!isOpen);\n          }\n        }}\n      >\n        <div className=\"EntityEditorGroup-toggle\">\n          <Icon name={cn('caret', isOpen ? 'down' : 'right')} />\n        </div>\n\n        <div className=\"EntityEditorGroup-name\">{name}</div>\n\n        {!_.isEmpty(subtitle) ? <div className=\"EntityEditorGroup-subtitle\">{subtitle}</div> : null}\n\n        <div className=\"EntityEditorGroup-actions flex items-center\">{actionElems}</div>\n\n        {active ? (\n          <div className=\"EntityEditorGroup-status c-positive\">\n            <Icon name=\"check\" />\n          </div>\n        ) : null}\n\n        {warning ? (\n          <div className=\"EntityEditorGroup-status c-warning\">\n            <Icon name=\"exclamation circle\" />\n          </div>\n        ) : null}\n\n        {error ? (\n          <div className=\"EntityEditorGroup-status c-error\">\n            <Icon name=\"exclamation circle\" />\n          </div>\n        ) : null}\n\n        <div className=\"flex-1\" />\n\n        {tipFactory ? (\n          <Popup\n            trigger={\n              <div>\n                <Icon className=\"c-muted\" name=\"question circle\" />\n              </div>\n            }\n            size=\"small\"\n            position=\"top center\"\n            hoverable\n            wide\n          >\n            {tipFactory()}\n          </Popup>\n        ) : null}\n      </div>\n\n      <div className=\"EntityEditorGroup-content\">\n        <div className={cn(contentClassName, { 'p-3': padded })}>\n          {isOpen ? children || contentFactory() : null}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id, forceOpen }) => ({\n  ...appStore.injectUi(`EntityEditorGroup-${id}`, {\n    forceOpen,\n  }),\n}))(observer(EntityEditorGroup));\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport _ from 'lodash';\nimport pluralize from 'pluralize';\nimport { safeParse } from '@platform/utils/json';\n\nimport EntityEditorGroup from '../EntityEditorGroup';\nimport FormInput from '../FormInput';\n\nfunction UsedPathParams({ name, editor = {}, className = '', showEmptyMessage }) {\n  const pathParams = editor.currentStepPathParams;\n  const hasParams = !_.isEmpty(pathParams);\n\n  if (!hasParams && !showEmptyMessage) return null;\n\n  let subtitle;\n  let active;\n  let warning;\n  let notSetCount = 0;\n\n  _.forEach(pathParams, v => {\n    if (_.isUndefined(v) || (typeof v === 'string' && _.isEmpty(v))) {\n      notSetCount += 1;\n    }\n  });\n\n  if (notSetCount > 0) {\n    warning = true;\n    subtitle = `${notSetCount} path ${pluralize('param', notSetCount)} not set`;\n  } else {\n    active = true;\n  }\n\n  let contents;\n  if (hasParams) {\n    contents = _.map(pathParams, (value, key) => {\n      return (\n        <FormInput\n          key={key}\n          value={_.isUndefined(value) ? '' : `${value}`}\n          className=\"EntityEditorGroup-input\"\n          placeholder=\"value\"\n          onChange={e => {\n            const newVal = safeParse(e.target.value, e.target.value);\n            const newParams = _.cloneDeep(pathParams);\n            _.set(newParams, key, _.isObject(newVal) && _.isEmpty(newVal) ? '' : newVal);\n            editor.updateCurrentStepPathParams(newParams);\n          }}\n          label={{ content: key, basic: true, className: 'Label-fw' }}\n          fluid\n        />\n      );\n    });\n  } else if (showEmptyMessage) {\n    contents = <div className=\"p-4\">{showEmptyMessage}</div>;\n  }\n\n  return (\n    <EntityEditorGroup\n      id=\"used-path-params\"\n      className={`PathParamEditor ${className}`}\n      name={name || 'Path Params'}\n      active={active}\n      warning={warning}\n      subtitle={subtitle}\n      forceOpen={warning}\n      defaultOpen\n      contentFactory={() => <div>{contents}</div>}\n    />\n  );\n}\n\nexport default inject(({ collectionEditorStore }, { editorId }) => ({\n  editor: collectionEditorStore.getEditor({ id: editorId }),\n}))(observer(UsedPathParams));\n","import React from 'react';\nimport cn from 'classnames';\n\nimport { faBook } from '@fortawesome/pro-solid-svg-icons/faBook';\n\nimport { Icon } from '@core/ui';\n\nimport { Link } from '@platform/utils/router';\n\nconst featuresToArticles = {\n  releasing: '/platform/versioning/releases',\n  versioning: '/platform/versioning/versions',\n  embedding: '/documentation/embed-your-hub',\n  auth0: '/documentation/authorizations/auth0',\n  '/documentation/variables-hubs': '/documentation/variables-hubs',\n  'custom-css': '/documentation/design/custom-css',\n  '$.ctx': '/testing/using-variables/context',\n  'contract-testing': '/testing/leveraging-openapi/contract-testing',\n  'referencing-other-scenarios': '/testing/referencing-other-scenarios',\n  'fair-use-billing': '/platform/getting-started/billing#fair-use-billing-policy',\n  'run-a-simple-mock-server': '/mocking/introduction#run-a-simple-mock-server',\n  'run-in-terminal': '/testing/running-tests/in-the-terminal',\n  'sending-http-requests': '/modeling/modeling-with-openapi/sending-http-requests',\n};\n\nconst LearnMore = props => {\n  const { className, feature, children } = props;\n\n  if (!feature || !featuresToArticles[feature]) {\n    return null;\n  }\n\n  const to = 'https://docs.stoplight.io' + (featuresToArticles[feature] || '');\n\n  return (\n    <Link className={cn('truncate', className)} to={to}>\n      {children ? (\n        children\n      ) : (\n        <span>\n          <Icon className=\"text-sm\" icon={faBook} />\n          <span className=\"ml-1\">Learn More</span>\n        </span>\n      )}\n    </Link>\n  );\n};\n\nexport default LearnMore;\n","import React from 'react';\nimport _ from 'lodash';\nimport pluralize from 'pluralize';\nimport { inject, observer } from 'mobx-react';\n\nimport { safeStringify, safeParse } from '@platform/utils/json';\n\nimport EntityEditorGroup from '../EntityEditorGroup';\nimport FormInput from '../FormInput';\nimport LearnMore from '../LearnMore';\n\nfunction UsedCtxVariables({ name, editor = [], className = '' }) {\n  const variables = editor.currentPopulatedCtxVariables;\n\n  if (_.isEmpty(variables)) {\n    return null;\n  }\n\n  let subtitle;\n  let notSetCount = 0;\n  let active;\n  let warning;\n  _.forEach(variables, v => {\n    if (_.isUndefined(v) || (typeof v === 'string' && _.isEmpty(v))) {\n      notSetCount += 1;\n    }\n  });\n  if (notSetCount > 0) {\n    warning = true;\n    subtitle = `${notSetCount} ${pluralize('variable', notSetCount)} not set`;\n  } else {\n    active = true;\n  }\n\n  return (\n    <EntityEditorGroup\n      id=\"used-ctx\"\n      className={`CtxVariableEditor ${className}`}\n      name={name || '$.ctx'}\n      active={active}\n      warning={warning}\n      subtitle={subtitle}\n      forceOpen={warning}\n      defaultOpen\n      tipFactory={() => (\n        <div>\n          $.ctx makes it easy to pass data between steps. These inputs will display the last $.ctx\n          values saved in this scenario. You can also edit them and re-run this step for easy\n          debugging.\n          <br />\n          <LearnMore className=\"mt-2 d-b\" feature=\"$.ctx\" />\n        </div>\n      )}\n      contentFactory={() => (\n        <div>\n          {_.map(variables, (v, k) => {\n            return (\n              <FormInput\n                key={k}\n                value={safeStringify(v, 0)}\n                className=\"EntityEditorGroup-input\"\n                placeholder=\"value\"\n                onChange={e => {\n                  const newVal = safeParse(e.target.value, e.target.value);\n                  const newVars = _.cloneDeep(variables);\n                  _.set(newVars, k, _.isObject(newVal) && _.isEmpty(newVal) ? '' : newVal);\n                  editor.updateCurrentCtxVariables(newVars);\n                }}\n                label={{ content: k, basic: true, className: 'Label-fw' }}\n                fluid\n              />\n            );\n          })}\n        </div>\n      )}\n    />\n  );\n}\n\nexport default inject(({ collectionEditorStore }, { editorId }) => ({\n  editor: collectionEditorStore.getEditor({ id: editorId }),\n}))(observer(UsedCtxVariables));\n","import React from 'react';\nimport _ from 'lodash';\nimport pluralize from 'pluralize';\nimport { inject, observer } from 'mobx-react';\nimport { safeStringify, safeParse } from '@platform/utils/json';\n\nimport EntityEditorGroup from '../EntityEditorGroup';\nimport FormInput from '../FormInput';\n\nconst UsedEnvironmentVariables = props => {\n  const { name, currentEditor, className, showEmptyMessage } = props;\n\n  const variables = currentEditor.currentPopulatedEnvVariables;\n\n  // prepare list of env variables which should be obscured\n  const obscuredFields = [];\n  const auth = _.get(currentEditor, 'currentStep.data.input.auth', {});\n  if (auth.type === 'basic') {\n    const matches = auth.password.match(/{\\$\\$\\.env\\.(.+)}/);\n    if (matches) {\n      obscuredFields.push(matches[1]);\n    }\n  }\n\n  const hasVariables = !_.isEmpty(variables);\n\n  if (!hasVariables && !showEmptyMessage) return null;\n\n  const newVars = _.cloneDeep(variables);\n  let subtitle;\n  let notSetCount = 0;\n  let active;\n  let warning;\n\n  _.forEach(variables, v => {\n    if (_.isUndefined(v) || (typeof v === 'string' && _.isEmpty(v))) {\n      notSetCount += 1;\n    }\n  });\n\n  if (notSetCount > 0) {\n    warning = true;\n    subtitle = `${notSetCount} ${pluralize('variable', notSetCount)} not set`;\n  } else {\n    active = true;\n  }\n\n  let contents;\n\n  if (hasVariables) {\n    contents = _.map(variables, (variable, key) => {\n      return (\n        <FormInput\n          key={key}\n          value={safeStringify(variable, 0)}\n          className=\"EntityEditorGroup-input\"\n          placeholder=\"value\"\n          type={_.includes(obscuredFields, key) ? 'password' : 'text'}\n          onChange={(e, { value }) => {\n            let newVal = safeParse(value, value);\n\n            if (_.isObject(newVal) && _.isEmpty(newVal)) {\n              newVal = '';\n            }\n\n            _.set(newVars, key, newVal);\n\n            currentEditor.updateVariables(newVars);\n          }}\n          label={{ content: key, basic: true, className: 'Label-fw' }}\n          fluid\n        />\n      );\n    });\n  } else if (showEmptyMessage) {\n    contents = <div className=\"p-4\">{showEmptyMessage}</div>;\n  }\n\n  return (\n    <EntityEditorGroup\n      id=\"used-env\"\n      className={`EnvVariableEditor ${className}`}\n      name={name || '$$.env'}\n      active={active}\n      warning={warning}\n      subtitle={subtitle}\n      forceOpen={warning}\n      defaultOpen\n      contentFactory={() => <div>{contents}</div>}\n    />\n  );\n};\n\nexport default inject(({ collectionEditorStore }, { editorId }) => {\n  const currentEditor = collectionEditorStore.getEditor({ id: editorId });\n\n  return {\n    currentEditor,\n  };\n})(observer(UsedEnvironmentVariables));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport FormCheckbox from '@platform/components/FormCheckbox';\nimport OAuth2TokenFormModal from '@platform/components/OAuth2TokenFormModal';\nimport UsedPathParams from '@platform/components/UsedPathParams';\nimport UsedCtxVariables from '@platform/components/UsedCtxVariables';\nimport UsedEnvironmentVariables from '@platform/components/UsedEnvironmentVariables';\nimport LearnMore from '@platform/components/LearnMore';\n\nconst Settings = props => {\n  const { editorId, standalone, currentEnv, updateVariables, oauth2, modeling } = props;\n\n  const elems = [];\n\n  if (standalone) {\n    elems.push(\n      <FormCheckbox\n        key=\"skipPrism\"\n        className=\"mt-4\"\n        checked={currentEnv.skipPrism}\n        onChange={() => {\n          updateVariables({\n            ...currentEnv,\n            skipPrism: !currentEnv.skipPrism,\n          });\n        }}\n        label=\"Send requests directly from the browser (CORS must be enabled)\"\n        labelPosition=\"left\"\n        labelStyle={{ color: 'black' }}\n        tip={\n          <div>\n            Disabling this option will proxy HTTP requests through Prism in order to bypass Cross\n            Origin Resource Sharing (CORS). <LearnMore feature=\"sending-http-requests\" />\n          </div>\n        }\n        inline\n      />\n    );\n  }\n\n  elems.push(\n    <UsedPathParams key=\"1\" editorId={editorId} name=\"Path Params\" className=\"text-sm mt-4\" />\n  );\n\n  if (!modeling) {\n    elems.push(\n      <UsedCtxVariables key=\"2\" editorId={editorId} name=\"$.ctx\" className=\"text-sm mt-4\" />\n    );\n  }\n\n  elems.push(\n    <UsedEnvironmentVariables\n      key=\"3\"\n      editorId={editorId}\n      name=\"$$.env\"\n      className=\"text-sm mt-4\"\n      showEmptyMessage=\"No $$.env variables are being used in this request.\"\n    />\n  );\n\n  if (oauth2) {\n    elems.push(\n      <div key=\"4\" className=\"mt-4\">\n        <OAuth2TokenFormModal oauth2={oauth2} readOnly />\n      </div>\n    );\n  }\n\n  return elems;\n};\n\nexport default Settings;\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport copy from 'copy-to-clipboard';\nimport TimeAgo from 'react-timeago';\nimport { inject, observer } from 'mobx-react';\nimport { Button, Table, Popup, Dropdown } from 'semantic-ui-react';\n\nimport { alert } from '@platform/utils/alert';\n\nimport OAuth2TokenFormModal from '../../../../OAuth2TokenFormModal';\nimport EntityEditorGroup from '../../../../EntityEditorGroup';\n\nimport { updateInputWithAuth } from '@platform/utils/authorization';\n\nconst OAuth2 = props => {\n  const {\n    ui = {},\n    uiScope,\n    updateUi,\n\n    userId,\n    handleUpdate,\n    currentVariables,\n    activeToken,\n    input = {},\n    config = {},\n    editor,\n    tokenStore,\n  } = props;\n\n  const tokens = tokenStore.tokenList;\n\n  return (\n    <div>\n      <OAuth2TokenFormModal oauth2={config.oauth2} />\n\n      <EntityEditorGroup\n        id=\"oath-Tokens\"\n        className=\"text-sm mt-6\"\n        name=\"Tokens\"\n        active={activeToken}\n        error={!activeToken}\n        forceOpen={!activeToken}\n        subtitle={!activeToken ? 'No active token' : null}\n        contentFactory={() =>\n          !_.isEmpty(tokens) ? (\n            <div className=\"p-4\">\n              <Table\n                basic=\"very\"\n                tableData={tokens}\n                compact=\"very\"\n                headerRow={\n                  <Table.Row>\n                    <Table.HeaderCell />\n                    <Table.HeaderCell>Name</Table.HeaderCell>\n                    <Table.HeaderCell>Value</Table.HeaderCell>\n                    <Table.HeaderCell>Scope</Table.HeaderCell>\n                    <Table.HeaderCell>Created At</Table.HeaderCell>\n                    <Table.HeaderCell />\n                  </Table.Row>\n                }\n                renderBodyRow={(token, index) => {\n                  const active = activeToken === token.access_token;\n\n                  return (\n                    <Table.Row key={index}>\n                      <Table.Cell className=\"oauth-add\">\n                        <Dropdown\n                          className={active ? 'active-token' : null}\n                          trigger={\n                            <div\n                              disabled={true}\n                              className={cn(\n                                'text-sm px-2 py-1/2 text-white rounded',\n                                active\n                                  ? 'bg-green cursor-default'\n                                  : 'bg-blue cursor-pointer hover:opacity-100 opacity-85'\n                              )}\n                            >\n                              {active ? 'Active' : 'Set Active'}\n                            </div>\n                          }\n                        >\n                          <Dropdown.Menu>\n                            <Dropdown.Item\n                              text=\"Add To Headers\"\n                              onClick={() => {\n                                handleUpdate(\n                                  'set',\n                                  ['input'],\n                                  updateInputWithAuth(\n                                    input,\n                                    {\n                                      access_token: token.access_token,\n                                      useHeader: true,\n                                      type: 'oauth2',\n                                    },\n                                    currentVariables\n                                  )\n                                );\n\n                                if (editor) {\n                                  editor.updateVariables(\n                                    { oauth_access_token: token.access_token },\n                                    { preserveShared: true }\n                                  );\n                                }\n\n                                alert.success('Access token added to headers.');\n                              }}\n                            />\n                            <Dropdown.Item\n                              text=\"Add To Query\"\n                              onClick={() => {\n                                handleUpdate(\n                                  'set',\n                                  ['input'],\n                                  updateInputWithAuth(\n                                    input,\n                                    {\n                                      access_token: token.access_token,\n                                      type: 'oauth2',\n                                    },\n                                    currentVariables\n                                  )\n                                );\n\n                                if (editor) {\n                                  editor.updateVariables(\n                                    { oauth_access_token: token.access_token },\n                                    { preserveShared: true }\n                                  );\n                                }\n\n                                alert.success('Access token added to query.');\n                              }}\n                            />\n                          </Dropdown.Menu>\n                        </Dropdown>\n                      </Table.Cell>\n                      <Table.Cell>{token.name}</Table.Cell>\n                      <Table.Cell>\n                        <Popup\n                          size=\"mini\"\n                          trigger={\n                            <a\n                              href=\"#\"\n                              onClick={e => {\n                                e.preventDefault();\n                                copy(token.access_token);\n                                updateUi('set', uiScope.concat(['copy']), 'Copied!');\n                              }}\n                            >\n                              {`****${token.access_token.slice(-4)}`}{' '}\n                            </a>\n                          }\n                          content={ui.copy}\n                          onClose={() =>\n                            updateUi(\n                              'set',\n                              uiScope.concat(['copy']),\n                              'Click to copy token value to clipboard'\n                            )\n                          }\n                          onOpen={() =>\n                            updateUi(\n                              'set',\n                              uiScope.concat(['copy']),\n                              'Click to copy token value to clipboard'\n                            )\n                          }\n                          inverted\n                        />\n                      </Table.Cell>\n                      <Table.Cell>{token.scope}</Table.Cell>\n                      <Table.Cell>\n                        <TimeAgo date={token.created_at} minPeriod={60} />\n                      </Table.Cell>\n                      <Table.Cell textAlign=\"right\">\n                        <Button\n                          icon=\"trash\"\n                          color=\"red\"\n                          size=\"tiny\"\n                          onClick={() => {\n                            if (!tokenStore) return;\n\n                            const r = window.confirm('Are you sure you want to delete this token?');\n                            if (!r) return;\n\n                            const remove = tokenStore.remove(token.id, {\n                              userId,\n                            });\n\n                            if (window.Electron && remove) {\n                              remove\n                                .then(() => {\n                                  alert.warning('Token removed');\n                                })\n                                .catch(e => {\n                                  alert.error(`Error removing token: ${String(e)}`);\n                                });\n                            }\n                          }}\n                        />\n                      </Table.Cell>\n                    </Table.Row>\n                  );\n                }}\n              />\n            </div>\n          ) : (\n            <div className=\"text-sm p-4 text-muted\">You have no tokens</div>\n          )\n        }\n      />\n    </div>\n  );\n};\n\nexport default inject((stores, props) => {\n  const { oauthTokenStore, userService, projectService } = stores;\n\n  const userId = _.get(userService, 'authorizedUser.id');\n  const projectId = _.get(projectService, 'current.id');\n\n  const tokenStore = oauthTokenStore.getOrRegisterInstance(userId, projectId);\n\n  return {\n    tokenStore,\n  };\n})(observer(OAuth2));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Button, Checkbox } from 'semantic-ui-react';\n\nimport { updateInputWithAuth } from '@platform/utils/authorization';\n\nimport FormInput from '../../../../FormInput';\nimport FormCheckbox from '../../../../FormCheckbox';\nimport FormSelect from '../../../../FormSelect';\n\nimport OAuth2 from './oauth2';\n\nconst OAuth1SignatureSelector = props => {\n  return (\n    <FormSelect\n      {...props}\n      header=\"Signature Method\"\n      options={[\n        { text: 'HMAC-SHA1', value: 'HMAC-SHA1' },\n        { text: 'HMAC-SHA256', value: 'HMAC-SHA256' },\n        { text: 'PLAINTEXT', value: 'PLAINTEXT' },\n      ]}\n      defaultValue=\"HMAC-SHA1\"\n      placeholder=\"OAuth1 Signature Method\"\n      size=\"tiny\"\n    />\n  );\n};\n\nconst AuthSelector = props => {\n  return (\n    <FormSelect\n      {...props}\n      options={[\n        { text: 'No Auth', value: 'none' },\n        { text: 'Basic Auth', value: 'basic' },\n        { text: 'Digest Auth', value: 'digest' },\n        { text: 'OAuth 1.0', value: 'oauth1' },\n        { text: 'OAuth 2.0', value: 'oauth2' },\n        { text: 'AWS Signature', value: 'aws' },\n      ]}\n      placeholder=\"Auth Type\"\n      size=\"tiny\"\n    />\n  );\n};\n\nclass AuthTab extends React.Component {\n  renderAws = () => {\n    const { input = {}, handleUpdate, readOnly } = this.props;\n\n    const { auth = {} } = input;\n\n    return (\n      <div className=\"text-sm\">\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['accessKey']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'accessKey'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Access Key',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['secretKey']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'secretKey'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Secret Key',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['region']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'region'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'AWS Region',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            placeholder=\"for example, `us-east-1`\"\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['service']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'service'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Service Name',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            placeholder=\"for example, `sqs`\"\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['sessionToken']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'sessionToken'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Session Token',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            placeholder=\"optional\"\n            fluid\n          />\n        </div>\n      </div>\n    );\n  };\n\n  renderBasicAuth = () => {\n    const { input = {}, handleUpdate, ui = {}, uiScope, updateUi, readOnly } = this.props;\n\n    const { auth = {} } = input;\n\n    return (\n      <div className=\"text-sm max-w-md\">\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['username']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'username'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Username',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <FormInput\n            input={{\n              type: ui.showPassword ? 'text' : 'password',\n              value: _.get(auth, ['password']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'password'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Password',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div>\n          <Checkbox\n            label=\"Show Password\"\n            value={String(ui.showPassword)}\n            onChange={(name, e) => {\n              updateUi('set', uiScope.concat(['showPassword']), e.checked);\n            }}\n            disabled={readOnly}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  renderOAuth1 = () => {\n    const { input = {}, handleUpdate, readOnly } = this.props;\n\n    const { auth = {} } = input;\n\n    return (\n      <div className=\"text-sm max-w-md\">\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['consumerKey']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'consumerKey'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Consumer Key',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['consumerSecret']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'consumerSecret'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Consumer Secret',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['token']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'token'], value);\n              },\n              readOnly,\n            }}\n            label={{ content: 'Token', basic: true, className: 'Label-fw' }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['tokenSecret']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'tokenSecret'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Token Secret',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['nonceLength']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'nonceLength'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Nonce Length',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            placeholder=\"if blank, generates a 32 character nonce\"\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <OAuth1SignatureSelector\n            value={_.get(auth, ['signatureMethod'])}\n            onChange={val => {\n              handleUpdate('set', ['input', 'auth', 'signatureMethod'], val);\n            }}\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormCheckbox\n            label=\"Add as header\"\n            disabled={readOnly}\n            checked={_.get(auth, ['useHeader'])}\n            onChange={checked => {\n              if (checked) {\n                handleUpdate('set', ['input', 'auth', 'useHeader'], checked);\n              } else {\n                handleUpdate('unset', ['input', 'auth', 'useHeader']);\n              }\n            }}\n          />\n        </div>\n\n        <div>\n          <FormCheckbox\n            label=\"Encode OAuth Signature\"\n            disabled={readOnly}\n            checked={_.get(auth, ['encode'])}\n            onChange={checked => {\n              if (checked) {\n                handleUpdate('set', ['input', 'auth', 'encode'], checked);\n              } else {\n                handleUpdate('unset', ['input', 'auth', 'encode']);\n              }\n            }}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const {\n      input = {},\n      handleUpdate,\n      submitting,\n      currentVariables,\n      readOnly,\n      ui,\n      uiScope,\n      updateUi,\n      userId,\n      activeToken,\n      editor,\n      config,\n    } = this.props;\n\n    const { auth = {} } = input;\n\n    // MM TODO: these auth sections should be in their own components\n\n    let canUpdateAuth = false;\n\n    let contentElem;\n\n    switch (auth.type) {\n      case 'basic':\n        canUpdateAuth = true;\n        contentElem = this.renderBasicAuth();\n        break;\n\n      case 'digest':\n        contentElem = <div className=\"text-sm\">Coming soon.</div>;\n        break;\n\n      case 'oauth1':\n        canUpdateAuth = true;\n        contentElem = this.renderOAuth1();\n        break;\n\n      case 'oauth2':\n        contentElem = (\n          <OAuth2\n            ui={ui}\n            uiScope={uiScope}\n            updateUi={updateUi}\n            userId={userId}\n            input={input}\n            config={config}\n            editor={editor}\n            activeToken={activeToken}\n            currentVariables={currentVariables}\n            handleUpdate={handleUpdate}\n          />\n        );\n        break;\n\n      case 'aws':\n        canUpdateAuth = true;\n        contentElem = this.renderAws();\n        break;\n\n      default:\n        contentElem = null;\n    }\n\n    return (\n      <div>\n        <div className={`flex content-center ${auth.type ? 'mb-6' : ''}`}>\n          <AuthSelector\n            className=\"mr-6\"\n            value={auth.type}\n            disabled={readOnly}\n            onChange={e => {\n              switch (e) {\n                case 'basic':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'basic',\n                    username: '',\n                    password: '',\n                  });\n                  break;\n                case 'digest':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'digest',\n                  });\n                  break;\n                case 'oauth1':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'oauth1',\n                    consumerKey: '',\n                    consumerSecret: '',\n                    token: '',\n                    tokenSecret: '',\n                    nonceLength: '',\n                    signatureMethod: 'HMAC-SHA1',\n                    encode: true,\n                  });\n                  break;\n                case 'oauth2':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'oauth2',\n                  });\n                  break;\n                case 'aws':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'aws',\n                  });\n                  break;\n                default:\n                  handleUpdate('unset', ['input', 'auth']);\n              }\n            }}\n          />\n\n          {canUpdateAuth ? (\n            <Button\n              disabled={submitting}\n              onClick={() => {\n                handleUpdate('set', ['input'], updateInputWithAuth(input, auth, currentVariables));\n              }}\n              compact\n              basic\n              size=\"tiny\"\n            >\n              Update Request\n            </Button>\n          ) : null}\n        </div>\n\n        {contentElem}\n      </div>\n    );\n  }\n}\n\nexport default inject((stores, props) => {\n  const { userService, projectService } = stores;\n\n  return {\n    projectId: _.get(projectService, 'current.id'),\n    userId: _.get(userService, 'authorizedUser.id'),\n  };\n})(observer(AuthTab));\n","import React from 'react';\nimport _ from 'lodash';\n\nimport FormSelect from '../../../FormSelect';\n\nconst LogicLocation = ({ locations, ...extraProps }) => {\n  return (\n    <FormSelect\n      placeholder=\"choose a location\"\n      options={_.map(locations, l => ({ text: l, value: l }))}\n      {...extraProps}\n    />\n  );\n};\n\nexport default LogicLocation;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Menu, Button, Icon, Popup } from 'semantic-ui-react';\nimport { combinePathSelectors } from '@platform/utils/general';\nimport { splitLogicPath } from '@platform/utils/collections';\n\nimport FormInput from '../../../FormInput';\nimport LearnMore from '../../../LearnMore';\n\nimport LogicLocation from './logic-location';\n\nexport const CapturesTabItem = ({ step, active, onClick }) => {\n  const captures = _.get(step, 'after.transforms');\n  let captureName = 'Captures';\n  if (!_.isEmpty(captures)) {\n    captureName = (\n      <span>\n        Captures{' '}\n        <b>\n          <span className=\"ml-2 text-active\">[{captures.length}]</span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"captures\" active={active} onClick={onClick}>\n      {captureName}\n    </Menu.Item>\n  );\n};\n\nconst Captures = ({ logicLocations, fields = [], handleUpdate, readOnly }) => {\n  return (\n    <div>\n      <div className={`${!_.isEmpty(fields) ? 'mb-3' : ''}`}>\n        <Button\n          onClick={() => handleUpdate('push', [], { target: '$.ctx', source: 'output.body' })}\n          basic\n          disabled={readOnly}\n          size=\"tiny\"\n        >\n          Add Capture\n        </Button>\n\n        <span className=\"c-muted ml-2\">\n          <Popup\n            trigger={<Icon name=\"question circle\" />}\n            size=\"small\"\n            position=\"top center\"\n            hoverable\n            wide\n          >\n            Save output values to the temporary $.ctx object to re-use them in subsequent steps,\n            within a single run.\n            <br />\n            <LearnMore className=\"mt-2 d-b\" feature=\"referencing-other-scenarios\" />\n          </Popup>\n        </span>\n      </div>\n\n      {_.map(fields, (field, index) => {\n        const { location: targetLocation, path: targetPath } = splitLogicPath({\n          locations: logicLocations,\n          path: field.target,\n        });\n        const { location: sourceLocation, path: sourcePath } = splitLogicPath({\n          locations: logicLocations,\n          path: field.source,\n        });\n\n        return (\n          <div key={index} className=\"mt-2 text-sm\">\n            <div className=\"flex items-center\">\n              <LogicLocation\n                className=\"pr-2\"\n                disabled={readOnly}\n                value={targetLocation}\n                onChange={value => {\n                  handleUpdate('set', [index, 'target'], combinePathSelectors([value, targetPath]));\n                }}\n                placeholder=\"target location\"\n                locations={logicLocations}\n                search\n              />\n\n              <FormInput\n                className=\"flex-1\"\n                input={{\n                  value: targetPath,\n                  readOnly,\n                  onChange(e, { value }) {\n                    handleUpdate(\n                      'set',\n                      [index, 'target'],\n                      combinePathSelectors([targetLocation, value])\n                    );\n                  },\n                }}\n                placeholder=\"path to property to save, ie `userId`\"\n                fluid\n              />\n\n              <div className=\"ml-3 mr-3 font-bold\">=</div>\n\n              <LogicLocation\n                className=\"pr-2\"\n                disabled={readOnly}\n                value={sourceLocation}\n                onChange={value => {\n                  handleUpdate('set', [index, 'source'], combinePathSelectors([value, sourcePath]));\n                }}\n                placeholder=\"source location\"\n                locations={logicLocations}\n                search\n              />\n\n              <FormInput\n                className=\"flex-1\"\n                input={{\n                  value: sourcePath,\n                  readOnly,\n                  onChange(e, { value }) {\n                    handleUpdate(\n                      'set',\n                      [index, 'source'],\n                      combinePathSelectors([sourceLocation, value])\n                    );\n                  },\n                }}\n                placeholder=\"path to property to capture, ie `users[0].id`\"\n                fluid\n              />\n\n              <div className=\"ml-3\">\n                <Button\n                  icon=\"trash\"\n                  disabled={readOnly}\n                  onClick={() => {\n                    if (fields.length === 1) {\n                      handleUpdate('unset', []);\n                    } else {\n                      handleUpdate('pull', [], index);\n                    }\n                  }}\n                  size=\"tiny\"\n                />\n              </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Captures;\n","import _ from 'lodash';\nimport HTTPSnippet from 'httpsnippet';\n\nimport { safeStringify, safeParse } from '../json';\nimport { replacePathParams } from '../url';\nimport { replaceVariables } from '../variables';\n\nexport const languages = [\n  {\n    text: 'Shell',\n    value: 'shell',\n    mode: 'bash',\n    codechoice: 'shell',\n    libraries: [\n      { text: 'cURL', librarychoice: 'curl', value: 'curl' },\n      { text: 'HTTPie', librarychoice: 'httpie', value: 'httpie' },\n      { text: 'Wget', librarychoice: 'wget', value: 'wget' },\n    ],\n  },\n  {\n    text: 'Go',\n    value: 'go',\n    mode: 'go',\n    codechoice: 'go',\n    librarychoice: null,\n  },\n  {\n    text: 'Java',\n    value: 'java',\n    mode: 'java',\n    codechoice: 'java',\n    libraries: [\n      { text: 'Unirest', librarychoice: 'unirest', value: 'unirest' },\n      { text: 'OkHttp', librarychoice: 'okhttp', value: 'okhttp' },\n    ],\n  },\n  {\n    text: 'Javascript',\n    value: 'javascript',\n    mode: 'javascript',\n    codechoice: 'javascript',\n    libraries: [\n      { text: 'XMLHttpRequest', librarychoice: 'xmlhttprequest', value: 'xmlhttprequest' },\n      { text: 'jQuery', librarychoice: 'jquery', value: 'jquery' },\n    ],\n  },\n  {\n    text: 'Node',\n    value: 'node',\n    mode: 'javascript',\n    codechoice: 'node',\n    libraries: [\n      { text: 'Native', librarychoice: 'native', value: 'native' },\n      { text: 'Request', librarychoice: 'request', value: 'request' },\n      { text: 'Unirest', librarychoice: 'unirest', value: 'unirest' },\n    ],\n  },\n  {\n    text: 'Obj-C',\n    value: 'objc',\n    mode: 'objectivec',\n    codechoice: 'objc',\n    librarychoice: null,\n  },\n  {\n    text: 'PHP',\n    value: 'php',\n    mode: 'php',\n    codechoice: 'php',\n    libraries: [\n      { text: 'ext-curl', librarychoice: 'curl', value: 'curl' },\n      { text: 'pecl/http v1', librarychoice: 'http1', value: 'http1' },\n      { text: 'pecl/http v2', librarychoice: 'http2', value: 'http2' },\n    ],\n  },\n  {\n    text: 'Python',\n    value: 'python',\n    mode: 'python',\n    codechoice: 'python',\n    libraries: [\n      { text: 'Python 3', librarychoice: 'python3', value: 'python3' },\n      { text: 'Requests', librarychoice: 'requests', value: 'requests' },\n    ],\n  },\n  {\n    text: 'Powershell',\n    value: 'powershell',\n    mode: 'powershell',\n    codechoice: 'powershell',\n    libraries: [\n      { text: 'WebRequest', librarychoice: 'webrequest', value: 'webrequest' },\n      { text: 'RestMethod', librarychoice: 'restmethod', value: 'restmethod' },\n    ],\n  },\n  {\n    text: 'Ruby',\n    value: 'ruby',\n    mode: 'ruby',\n    codechoice: 'ruby',\n    librarychoice: null,\n  },\n  {\n    text: 'Swift',\n    value: 'swift',\n    mode: 'swift',\n    codechoice: 'swift',\n    librarychoice: null,\n  },\n  {\n    text: 'C#',\n    value: 'csharp',\n    mode: 'csharp',\n    codechoice: 'csharp',\n    librarychoice: null,\n  },\n  {\n    text: 'C',\n    value: 'c',\n    mode: 'cpp',\n    codechoice: 'c',\n    librarychoice: null,\n  },\n];\n\nexport const buildSnippet = (props = {}, options = {}) => {\n  const { method, url, headers = {}, body = {}, auth = {}, params = {}, schemes = [] } = props;\n\n  let snippet;\n  let data = {};\n  let computedHeaders = [];\n  let u = url;\n  let postData = {};\n\n  if (!method || _.isEmpty(u)) {\n    return { error: 'Enter a valid URL, and request method, to see code generation' };\n  }\n\n  if (!_.isEmpty(params)) {\n    const paramVals = _.values(params);\n    if (paramVals.length !== _.without(paramVals, false, null, '', undefined, NaN).length) {\n      return { error: 'One or more variables not set' };\n    }\n  }\n\n  if (!_.isEmpty(headers)) {\n    computedHeaders = _.map(headers, (value, key) => {\n      if (value) {\n        return { name: key, value };\n      }\n    });\n\n    if (_.has(headers, 'Content-Type')) {\n      _.set(postData, 'mimeType', headers['Content-Type']);\n    }\n  }\n\n  const replacedAuth = replaceVariables(auth, params);\n  if (replacedAuth.type === 'basic' && replacedAuth.username) {\n    const basicAuth = window.btoa(`${replacedAuth.username}:${replacedAuth.password}`);\n    computedHeaders.push({\n      name: 'Authorization',\n      value: `Basic ${basicAuth}`,\n    });\n  }\n\n  // postData params is only relevant to form-urlencoded\n  if (!_.isEmpty(body)) {\n    if (\n      _.isObject(body) &&\n      _.get(headers, 'Content-Type') === 'application/x-www-form-urlencoded'\n    ) {\n      const params = _.map(body, (value, key) => {\n        return { name: key, value };\n      });\n      _.set(postData, 'params', params);\n    } else {\n      _.set(postData, 'text', safeStringify(safeParse(body), 0));\n    }\n  }\n\n  // params need to be strings. http-snippet will choke if use a number as a header value, for example.\n  for (const k in params) {\n    params[k] = String(params[k]);\n  }\n\n  _.set(data, 'method', method.toUpperCase());\n  _.set(data, 'url', replacePathParams(safeStringify(u), params));\n  _.set(data, 'headers', replaceVariables(_.compact(computedHeaders), params));\n  _.set(data, 'postData', replaceVariables(postData, params));\n\n  if (!/^[a-z]+:\\/\\//i.test(data.url)) {\n    data.url = (schemes[0] || 'http') + '://' + data.url;\n  }\n\n  try {\n    snippet = new HTTPSnippet(data);\n\n    const { codechoice, librarychoice } = options;\n\n    snippet = snippet.convert(codechoice, librarychoice);\n  } catch (err) {\n    console.error('code generation error', { props, options, err });\n    return { error: 'Could not generate code. More information in the developer console.' };\n  }\n\n  return snippet;\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { inject, observer } from 'mobx-react';\n\nimport { languages, buildSnippet } from '@platform/utils/httpsnippet';\nimport Highlight from '../Highlight';\nimport FormDropdown from '../FormDropdown';\n\nconst CodeGenerator = props => {\n  const { className, updateUi, ui, data = {} } = props;\n\n  const selected = _.get(ui, 'selected') || _.head(languages);\n  const libraries = selected.libraries;\n\n  const { librarychoice, codechoice, mode } = selected;\n\n  const snippet = buildSnippet(data, { codechoice, librarychoice });\n\n  let code;\n\n  if (_.has(snippet, 'error')) {\n    code = <div className=\"c-muted p-2\">{snippet.error}</div>;\n  } else {\n    code = (\n      <div className=\"bg-white\">\n        <Highlight mode={mode}>{snippet}</Highlight>\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn('CodeGenerator', className)}>\n      <div className=\"flex mb-6 items-center\">\n        <div className=\"pr-2 font-bold\">Language</div>\n        <FormDropdown\n          className=\"flex-1\"\n          fluid\n          value={selected.value}\n          options={languages}\n          onChange={(e, { value }) => {\n            const selected = _.find(languages, function(o) {\n              return o.value === value;\n            });\n\n            updateUi('set', 'selected', selected);\n          }}\n          selection\n          search\n        />\n        {libraries\n          ? [\n              <div className=\"pl-6 font-bold\" key=\"library-label\">\n                Library\n              </div>,\n\n              <FormDropdown\n                className=\"flex-1 pl-2\"\n                key=\"library-dropdown\"\n                fluid\n                value={_.get(selected, 'librarychoice') || _.get(selected, 'libraries.0.value')}\n                options={libraries}\n                onChange={(e, { value }) => {\n                  const selected = _.find(libraries, function(o) {\n                    return o.value === value;\n                  });\n\n                  updateUi('set', 'selected.librarychoice', selected.librarychoice);\n                }}\n                selection\n                search\n              />,\n            ]\n          : null}\n      </div>\n\n      {code}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { editorId }) => ({\n  ...appStore.injectUi(`codegen-${editorId}`),\n}))(observer(CodeGenerator));\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport _ from 'lodash';\n\nimport CodeGenerator from '../../../CodeGenerator';\n\nimport { buildQueryString } from '@platform/utils/url';\n\nfunction CodeGen(props) {\n  const { step, vars, specs } = props;\n\n  let data = _.cloneDeep(step.input);\n\n  if (!data) {\n    return null;\n  }\n\n  const newUrl = buildQueryString({ url: data.url, params: data.query }).url;\n\n  const params = {};\n\n  _.forEach(vars, (sub, type) => {\n    if (!_.isEmpty(sub)) {\n      _.forEach(sub, (value, param) => {\n        let p;\n        switch (type) {\n          case 'ctx':\n            p = `$.ctx.${param}`;\n            break;\n          case 'env':\n            p = `$$.env.${param}`;\n            break;\n          default:\n            p = param;\n        }\n\n        params[p] = value;\n      });\n    }\n  });\n\n  _.set(data, 'params', params);\n  _.set(data, 'url', newUrl);\n\n  const schemes = specs.reduce((schemes, spec) => {\n      (spec.data.schemes || []).forEach(scheme =>\n          !schemes.includes(scheme) && schemes.push(scheme));\n      return schemes;\n  }, []);\n\n  _.set(data, 'schemes', schemes);\n\n  return <CodeGenerator className=\"text-sm\" data={data} />;\n}\n\nexport default inject(({ collectionEditorStore }, { editorId }) => {\n  const editor = collectionEditorStore.getEditor({ id: editorId });\n\n  const vars = {\n    env: editor.currentPopulatedEnvVariables,\n    ctx: editor.currentPopulatedCtxVariables,\n    path: editor.currentStepPathParams,\n  };\n\n  return {\n    vars,\n    specs: editor.connectedSpecs,\n  };\n})(observer(CodeGen));\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { Menu } from 'semantic-ui-react';\n\nimport FormInputMap from '../../../FormInputMap';\n\nexport const HeadersTabItem = ({ step, active, onClick }) => {\n  const headers = _.get(step, 'input.headers');\n\n  let headerName = 'Headers';\n  if (!_.isEmpty(headers)) {\n    headerName = (\n      <span>\n        Headers{' '}\n        <b>\n          <span className=\"ml-2 text-active\">[{_.size(headers)}]</span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"headers\" active={active} onClick={onClick}>\n      {headerName}\n    </Menu.Item>\n  );\n};\n\nconst Headers = ({ step, handleUpdate, readOnly }) => {\n  return [\n    <FormInputMap\n      key=\"headersList\"\n      fields={_.get(step, 'headers')}\n      handleUpdate={(t, p, v) => {\n        handleUpdate(t, ['input', 'headers'].concat(p), v);\n      }}\n      addText=\"Add Header\"\n      namePlaceholder=\"header name\"\n      valuePlaceholder=\"header value\"\n      size=\"tiny\"\n      readOnly={readOnly}\n    />,\n  ];\n};\n\nexport default Headers;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { Menu } from 'semantic-ui-react';\n\nimport FormInputMap from '../../../FormInputMap';\n\nexport const QueryTabItem = ({ step, active, onClick }) => {\n  const query = _.get(step, 'input.query');\n\n  let headerName = 'Query';\n  if (!_.isEmpty(query)) {\n    headerName = (\n      <span>\n        Query{' '}\n        <b>\n          <span className=\"ml-2 text-active\">[{_.size(query)}]</span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"query\" active={active} onClick={onClick}>\n      {headerName}\n    </Menu.Item>\n  );\n};\n\nconst Query = ({ step, handleUpdate, readOnly }) => {\n  return [\n    <FormInputMap\n      key=\"queryList\"\n      fields={_.get(step, 'query', {})}\n      handleUpdate={(t, p, v) => {\n        handleUpdate(t, ['input', 'query'].concat(p), v);\n      }}\n      addText=\"Add Query\"\n      namePlaceholder=\"query name\"\n      valuePlaceholder=\"query value\"\n      size=\"tiny\"\n      readOnly={readOnly}\n    />,\n  ];\n};\n\nexport default Query;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Menu, Button, Icon, Popup } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nimport Highlight from '../../../Highlight';\nimport FormCodeEditor from '../../../FormCodeEditor';\n\nexport const ScriptsTabItem = ({ step, active, onClick }) => {\n  let scriptName = 'Scripts';\n  let hasScripts;\n  if (!_.isEmpty(_.get(step, 'before.script'))) {\n    hasScripts = true;\n  }\n  if (!_.isEmpty(_.get(step, 'after.script'))) {\n    hasScripts = true;\n  }\n  if (hasScripts) {\n    scriptName = (\n      <span>\n        {scriptName}{' '}\n        <b>\n          <span className=\"ml-2 text-active\">\n            <Icon name=\"check\" />\n          </span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"scripts\" active={active} onClick={onClick}>\n      {scriptName}\n    </Menu.Item>\n  );\n};\n\nconst cheatsheet = `// save back to your current environment\n$$.env.set('apiKey', output.body.get('apiKey'));\n\n// add a test (you can also make assertions in the tests UI tab)\ntests['it should return a 200 status code'] = output.status.get() === 200;\n\n// use lodash\ntests['test some object equality'] = _.isEqual({foo: 'bar'}, output.body.get());\n\n// share temporary data with subsequent steps by setting on the ctx object\n$.ctx.set('targetId', _.random(1, 100));\n\n// manipulate the request in a before script\ninput.headers.set('Authorization', 'Bearer ' + $$.env.get('apiKey'));\ninput.method.set('post');`;\n\nconst Scripts = props => {\n  const {\n    scenarioId,\n    stepIndex,\n    step,\n    handleUpdate,\n    ui = {},\n    updateUi,\n    readOnly,\n    autocompleteScopes,\n  } = props;\n\n  const { activeItem = 'after' } = ui;\n  const beforeScript = _.get(step, 'before.script', '');\n  const afterScript = _.get(step, 'after.script', '');\n\n  const handleItemClick = (e, { name }) => {\n    updateUi('set', ['activeItem'], name);\n  };\n\n  let contentElem;\n  switch (activeItem) {\n    case 'before':\n      contentElem = (\n        <FormCodeEditor\n          name={`${scenarioId}-${stepIndex}-before`}\n          mode=\"javascript\"\n          readOnly={readOnly}\n          autocompleteScopes={autocompleteScopes}\n          input={{\n            value: beforeScript,\n            onChange(value) {\n              if (_.isEmpty(value)) {\n                handleUpdate('unset', ['before', 'script']);\n              } else {\n                handleUpdate('set', ['before', 'script'], value);\n              }\n            },\n          }}\n        />\n      );\n      break;\n    case 'after':\n      contentElem = (\n        <FormCodeEditor\n          name={`${scenarioId}-${stepIndex}-after`}\n          mode=\"javascript\"\n          readOnly={readOnly}\n          autocompleteScopes={autocompleteScopes}\n          input={{\n            value: afterScript,\n            onChange(value) {\n              if (_.isEmpty(value)) {\n                handleUpdate('unset', ['after', 'script']);\n              } else {\n                handleUpdate('set', ['after', 'script'], value);\n              }\n            },\n          }}\n        />\n      );\n      break;\n    default:\n      contentElem = <div>select an option above</div>;\n  }\n\n  let beforeName = 'Before';\n  if (!_.isEmpty(beforeScript)) {\n    beforeName = (\n      <span>\n        {beforeName}{' '}\n        <span className=\"ml-2 text-active\">\n          <Icon name=\"check\" />\n        </span>\n      </span>\n    );\n  }\n\n  let afterName = 'After';\n  if (!_.isEmpty(afterScript)) {\n    afterName = (\n      <span>\n        {afterName}{' '}\n        <span className=\"ml-2 text-active\">\n          <Icon name=\"check\" />\n        </span>\n      </span>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"mb-6 flex items-center\">\n        <div>\n          <Menu secondary pointing size=\"tiny\">\n            <Menu.Item header>Step Stage</Menu.Item>\n\n            <Menu.Item name=\"before\" active={activeItem === 'before'} onClick={handleItemClick}>\n              {beforeName}\n            </Menu.Item>\n\n            <Menu.Item name=\"after\" active={activeItem === 'after'} onClick={handleItemClick}>\n              {afterName}\n            </Menu.Item>\n          </Menu>\n        </div>\n\n        <div className=\"ml-6\">\n          <Button\n            compact\n            size=\"tiny\"\n            onClick={() => {\n              updateUi('set', ['showCheatsheet'], !ui.showCheatsheet);\n            }}\n            basic\n          >\n            {ui.showCheatsheet ? 'Hide Cheatsheet' : 'Show Cheatsheet'}\n          </Button>\n\n          <span className=\"c-muted ml-2\">\n            <Popup\n              trigger={<Icon name=\"question circle\" />}\n              size=\"small\"\n              position=\"top center\"\n              hoverable\n              wide\n            >\n              <a\n                className=\"d-b\"\n                href=\"https://help.stoplight.io/scenarios/overview/scripting\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <Icon name=\"book\" /> Learn more about scripting.\n              </a>\n            </Popup>\n          </span>\n        </div>\n      </div>\n\n      {ui.showCheatsheet ? (\n        <Highlight className=\"ScenarioEditor-cheatsheet mb-6\" mode=\"javascript\" immediate>\n          {cheatsheet}\n        </Highlight>\n      ) : null}\n\n      {contentElem}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }) => ({\n  ...appStore.injectUi('scenario-scripts-tab'),\n}))(observer(Scripts));\n","import React from 'react';\nimport _ from 'lodash';\nimport { Icon, Menu } from 'semantic-ui-react';\nimport { toJS } from 'mobx';\nimport { inject, observer } from 'mobx-react';\nimport { getResponseSchemaFromOperation } from '@platform/utils/specs/swagger';\n\nimport JsonSchemaViewer from '../JsonSchemaViewer';\n\nclass ScenarioContractTest extends React.Component {\n  render() {\n    const {\n      method = '',\n      url,\n      codes = [],\n      endpoint,\n      connectedSpecs,\n      ui = {},\n      updateUi = {},\n    } = this.props;\n\n    const activeCode = ui.activeCode || codes[0];\n    const responseElems = [];\n    let schema;\n\n    if (activeCode && endpoint) {\n      const connectedSpec = _.find(connectedSpecs, { id: endpoint.specId }) || {};\n\n      if (connectedSpec) {\n        schema = getResponseSchemaFromOperation({\n          spec: toJS(connectedSpec),\n          method,\n          path: endpoint.path,\n          code: activeCode,\n        });\n\n        const linkToSpec = (\n          <b>{connectedSpec.local ? connectedSpec.filePath : connectedSpec.name}</b>\n        );\n\n        responseElems.push(\n          <div key=\"response\">\n            <span className=\"mr-2 c-positive\">\n              <Icon name=\"check\" />\n            </span>\n            Response codes found in {linkToSpec}\n          </div>\n        );\n      }\n    } else if (_.isEmpty(connectedSpecs)) {\n      responseElems.push(\n        <div key=\"endpoint\">\n          <span className=\"mr-2 c-muted\">\n            <Icon name=\"circle outline\" />\n          </span>\n          <b>No OAS2 files connected.</b>\n          <br />\n          <br />\n          Connect a file in the <b>Contract Test Settings</b> for this scenario collection,\n          accessible via the Swagger/OAS link in the editor sidebar.\n        </div>\n      );\n    } else {\n      responseElems.push(\n        <div key=\"endpoint\">\n          <span className=\"mr-2 c-negative\">\n            <Icon name=\"remove\" />\n          </span>\n          <b>\n            {_.toUpper(method)} {url}\n          </b>{' '}\n          did NOT match any operations in the connected OAS2 specifications.\n        </div>\n      );\n    }\n\n    if (_.isEmpty(codes)) {\n      return <div>{responseElems}</div>;\n    }\n\n    return (\n      <div>\n        {responseElems}\n\n        <Menu\n          items={codes.map(c => ({\n            key: c,\n            name: c,\n            active: c === activeCode,\n            onClick() {\n              updateUi('set', 'activeCode', c);\n            },\n          }))}\n          secondary\n        />\n\n        <JsonSchemaViewer name=\"contract-test\" schema={schema} />\n      </div>\n    );\n  }\n}\n\nexport default inject(({ appStore }, { scenarioId, stepId }) => ({\n  ...appStore.injectUi(`scenario-step-contract-test-${scenarioId}-${stepId}`),\n}))(observer(ScenarioContractTest));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Icon, Button, Header, Popup } from 'semantic-ui-react';\n\nimport { safeStringify, safeParse } from '@platform/utils/json';\nimport { splitLogicPath } from '@platform/utils/collections';\nimport { combinePathSelectors } from '@platform/utils/general';\nimport { getEndpointFromSpecs } from '@platform/utils/specs/swagger';\n\nimport FormSelect from '../../../FormSelect';\nimport FormInput from '../../../FormInput';\nimport LearnMore from '../../../LearnMore';\nimport ScenarioContractTest from '../../../ScenarioContractTest';\n\nimport LogicLocation from './logic-location';\n\nconst AssertionOpSelector = props => {\n  return (\n    <FormSelect\n      placeholder=\"choose an operation\"\n      options={[\n        { text: 'equals', value: 'eq' },\n        { text: 'greater than', value: 'gt' },\n        { text: 'greater than or equals', value: 'gte' },\n        { text: 'less than', value: 'lt' },\n        { text: 'less than or equals', value: 'lte' },\n        { text: 'not equal', value: 'ne' },\n        { text: 'exists', value: 'exists' },\n        { text: 'length equals', value: 'length' },\n        { text: 'contains', value: 'contains' },\n        { text: 'validate pass', value: 'validate.pass' },\n        { text: 'validate fail', value: 'validate.fail' },\n      ]}\n      {...props}\n    />\n  );\n};\n\nexport const TestsTabItem = ({ step, active, onClick }) => {\n  const after = _.get(step, 'after') || {};\n  let testName = 'Tests';\n  const testIcons = [];\n  if (!_.isEmpty(after.assertions)) {\n    const contractTest = _.find(after.assertions, { op: 'validate.contract' });\n\n    testIcons.push(<span key=\"1\">[{after.assertions.length}]</span>);\n    if (contractTest) {\n      testIcons.push(\n        <span key=\"2\" className=\"ml-2 text-active\">\n          <Icon name=\"flask\" />\n        </span>\n      );\n    }\n  }\n  if (!_.isEmpty(testIcons)) {\n    testName = (\n      <span>\n        Tests{' '}\n        <b>\n          <span className=\"ml-2 text-active\">{testIcons}</span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"tests\" active={active} onClick={onClick}>\n      {testName}\n    </Menu.Item>\n  );\n};\n\nexport const AssertionList = props => {\n  const {\n    scenarioId,\n    stepId,\n    input = {},\n    fields = [],\n    handleUpdate,\n    connectedSpecs,\n    variables,\n    logicLocations,\n    readOnly,\n  } = props;\n\n  // let statusField;\n  // let statusIndex;\n\n  // Build basic assertions\n\n  const assertionElems = fields.map((field, index) => {\n    // if (field.target === 'output.status') {\n    //   statusField = field;\n    //   statusIndex = index;\n    //   return null;\n    // }\n\n    const { location, path } = splitLogicPath({ locations: logicLocations, path: field.target });\n    const locationDisabled = location.match(/status|time/) ? true : false;\n    const expectedDisabled = field && field.op && field.op.match(/exists/) ? true : false;\n\n    let expected = _.isUndefined(field.expected) ? '' : field.expected;\n    // if this is a number that they are forcing as a string, add quotes to indicate that\n    if (typeof expected === 'string' && _.isNumber(safeParse(expected))) {\n      expected = `\"${expected}\"`;\n    }\n\n    // Cast value to string to allow 0 number\n    if (_.isNumber(safeParse(expected))) {\n      expected = String(expected);\n    }\n\n    expected = safeStringify(expected);\n\n    return (\n      <div key={index} className=\"mt-2\">\n        <div className=\"flex\">\n          <LogicLocation\n            className=\"pr-2\"\n            disabled={readOnly}\n            value={location}\n            onChange={value => {\n              let newPath;\n              if (value.match(/status|time/)) {\n                newPath = [value];\n              } else {\n                newPath = [value, path];\n              }\n\n              handleUpdate('set', [index, 'target'], combinePathSelectors(newPath));\n            }}\n            locations={logicLocations}\n            search\n          />\n\n          <FormInput\n            className=\"flex-1 pr-2\"\n            input={{\n              value: `${path}`,\n              readOnly,\n              onChange(e, { value }) {\n                handleUpdate('set', [index, 'target'], combinePathSelectors([location, value]));\n              },\n            }}\n            disabled={locationDisabled}\n            placeholder={locationDisabled ? 'n/a' : 'path to property ie `data[0].id`'}\n            fluid\n          />\n\n          <AssertionOpSelector\n            className=\"pr-2\"\n            disabled={readOnly}\n            value={field.op}\n            onChange={value => {\n              handleUpdate('set', [index, 'op'], value);\n\n              if (value.match(/exists/)) {\n                handleUpdate('unset', [index, 'expected']);\n              }\n            }}\n          />\n\n          <FormInput\n            className=\"flex-1\"\n            input={{\n              value: `${expected}`,\n              readOnly,\n              onChange(e, { value }) {\n                let val = value ? safeParse(value, value) : '';\n\n                // stringify if they are trying to force string\n                if (value && value.charAt(0) === '\"') {\n                  val = String(val);\n                }\n\n                handleUpdate('set', [index, 'expected'], val);\n              },\n            }}\n            disabled={expectedDisabled}\n            placeholder={expectedDisabled ? 'n/a' : 'expected value'}\n            fluid\n          />\n\n          <div className=\"ml-3\">\n            <Button\n              icon=\"trash\"\n              disabled={readOnly}\n              onClick={() => {\n                if (fields.length === 1) {\n                  handleUpdate('unset', []);\n                } else {\n                  handleUpdate('pull', [], index);\n                }\n              }}\n              size=\"tiny\"\n            />\n          </div>\n        </div>\n      </div>\n    );\n  });\n\n  // Build contract assertion\n\n  let definedResponseCodes;\n  const method = _.get(input, 'method');\n  const url = _.get(input, 'url');\n\n  const endpoint = getEndpointFromSpecs({\n    specs: connectedSpecs,\n    method,\n    url,\n    variables: {\n      env: variables,\n    },\n  });\n\n  if (endpoint) {\n    definedResponseCodes = endpoint.responses || [];\n  }\n\n  return (\n    <div>\n      <div className={`${!_.isEmpty(fields) ? 'mb-3' : ''}`}>\n        <Button\n          onClick={() =>\n            handleUpdate('push', [], { target: 'output.status', op: 'eq', expected: 200 })\n          }\n          basic\n          disabled={readOnly}\n          size=\"tiny\"\n        >\n          Add Assertion\n        </Button>\n      </div>\n\n      <div className=\"mb-4 text-sm\">{assertionElems}</div>\n\n      <div className=\"AssertionList-contract text-sm\">\n        <div className=\"flex content-center mb-6\">\n          <Header as=\"h4\">Contract Testing</Header>\n\n          <div\n            className=\"c-muted ml-2\"\n            style={{\n              position: 'relative',\n              top: -1,\n            }}\n          >\n            <Popup\n              trigger={<Icon name=\"question circle\" />}\n              size=\"small\"\n              position=\"top center\"\n              hoverable\n              wide\n            >\n              {!_.isEmpty(connectedSpecs) ? (\n                <div>\n                  <div>\n                    When this step is run, Stoplight will search your connected API Specs for an\n                    endpoint that matches this request.\n                  </div>\n\n                  <div className=\"mt-2\">\n                    If found, Stoplight will use the JSON schema responses defined on the endpoint\n                    to contract test your API response automatically.\n                  </div>\n                </div>\n              ) : (\n                <div>You must connect an API spec to use this feature.</div>\n              )}\n\n              <LearnMore className=\"d-b mt-2\" feature=\"contract-testing\" />\n            </Popup>\n          </div>\n        </div>\n\n        <ScenarioContractTest\n          stepId={stepId}\n          endpoint={endpoint}\n          method={method}\n          url={url}\n          codes={definedResponseCodes}\n          connectedSpecs={connectedSpecs}\n          scenarioId={scenarioId}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst Tests = props => {\n  const {\n    collectionId,\n    scenarioId,\n    step,\n    connectedSpecs,\n    handleUpdate,\n    variables,\n    logicLocations,\n    readOnly,\n  } = props;\n\n  return (\n    <AssertionList\n      variables={variables}\n      collectionId={collectionId}\n      scenarioId={scenarioId}\n      stepId={step.id}\n      input={step.input}\n      fields={_.get(step, 'after.assertions')}\n      connectedSpecs={connectedSpecs}\n      handleUpdate={(t, p, v) => {\n        handleUpdate(t, ['after', 'assertions'].concat(p), v);\n      }}\n      logicLocations={logicLocations}\n      readOnly={readOnly}\n    />\n  );\n};\n\nexport default inject(({ collectionEditorStore }, { editorId }) => {\n  const editor = collectionEditorStore.getEditor({ id: editorId });\n\n  return {\n    variables: editor.currentEnv,\n  };\n})(observer(Tests));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport FormInput from '@platform/components/FormInput';\nimport FormSelect from '@platform/components/FormSelect';\nimport FormHttpBodyEditor from '@platform/components/FormHttpBodyEditor';\n\nimport SettingsTab from './settings';\nimport AuthTab from './auth';\nimport CapturesTab, { CapturesTabItem } from './captures';\nimport CodeGenerationTab from './code-generation';\nimport HeadersTab, { HeadersTabItem } from './headers';\nimport QueryTab, { QueryTabItem } from './query';\nimport ScriptsTab, { ScriptsTabItem } from './scripts';\nimport TestsTab, { TestsTabItem } from './tests';\n\nconst defaultLogicLocations = [\n  'output.headers',\n  'output.body',\n  'output.status',\n  'output.time',\n  '$.ctx',\n  '$$.env',\n  '$$.response.headers',\n  '$$.response.body',\n  '$$.response.status',\n];\n\nlet Items = props => {\n  const { editor, step, config = {}, currentTab, onClick, whitelist } = props;\n  const { input } = step || {};\n  const { auth = {}, body, method } = input || {};\n\n  let authorizationName = 'Auth';\n  if (auth.type && auth.type !== 'none') {\n    authorizationName = (\n      <span>\n        Auth\n        <span className=\"ml-2 text-active font-bold\">[{auth.type}]</span>\n      </span>\n    );\n  }\n\n  let bodyName = 'Body';\n  if (!_.isEmpty(body)) {\n    bodyName = (\n      <span>\n        Body\n        <span className=\"ml-2 text-active\">\n          <Icon name=\"check\" />\n        </span>\n      </span>\n    );\n  }\n\n  return (\n    <Menu style={{ marginTop: 0 }} tabular attached=\"top\" size=\"tiny\">\n      {_.includes(whitelist, 'settings') && (\n        <Menu.Item name=\"settings\" active={currentTab === 'settings'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'headers') && (\n        <HeadersTabItem step={step} active={currentTab === 'headers'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'query') && (\n        <QueryTabItem step={step} active={currentTab === 'query'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'body') && (\n        <Menu.Item name=\"body\" active={currentTab === 'body'} onClick={onClick}>\n          {bodyName}\n        </Menu.Item>\n      )}\n\n      {_.includes(whitelist, 'auth') && (\n        <Menu.Item name=\"auth\" className=\"auth\" active={currentTab === 'auth'} onClick={onClick}>\n          {authorizationName}\n        </Menu.Item>\n      )}\n\n      {_.includes(whitelist, 'code-generation') && (\n        <Menu.Item\n          name=\"code-generation\"\n          active={currentTab === 'code-generation'}\n          onClick={onClick}\n        >\n          Code Generation\n        </Menu.Item>\n      )}\n\n      {_.includes(whitelist, 'tests') && (\n        <TestsTabItem step={step} active={currentTab === 'tests'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'captures') && (\n        <CapturesTabItem step={step} active={currentTab === 'captures'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'scripts') && (\n        <ScriptsTabItem step={step} active={currentTab === 'scripts'} onClick={onClick} />\n      )}\n    </Menu>\n  );\n};\nItems = inject((stores, props) => {\n  const { collectionEditorStore } = stores;\n  const { editorId } = props;\n\n  return {\n    editor: collectionEditorStore.getEditor({ id: editorId }),\n  };\n})(observer(Items));\n\nlet Content = props => {\n  const {\n    id,\n    editorId,\n    collectionId,\n    scenarioId,\n    step = {},\n    stepIndex,\n    editor,\n    modeling,\n    handleUpdate,\n    ui = {},\n    updateUi,\n    connectedSpecs = [],\n    autocompleteScopes = {},\n    config = {},\n    readOnly,\n    standalone,\n    currentTab,\n  } = props;\n\n  let contentElem;\n\n  switch (currentTab) {\n    case 'headers':\n      contentElem = (\n        <HeadersTab step={step.input} modeling={modeling} handleUpdate={handleUpdate} />\n      );\n      break;\n    case 'query':\n      contentElem = <QueryTab step={step.input} editorId={editorId} handleUpdate={handleUpdate} />;\n      break;\n    case 'settings':\n      contentElem = (\n        <SettingsTab\n          editorId={editorId}\n          oauth2={_.get(step.input, 'auth.type') === 'oauth2' && config.oauth2}\n          currentEnv={editor.currentEnv}\n          updateVariables={variables => editor.updateVariables(variables)}\n          modeling={modeling}\n          standalone={standalone}\n        />\n      );\n      break;\n    case 'auth':\n      contentElem = (\n        <AuthTab\n          editor={editor}\n          currentVariables={editor.currentEnv}\n          activeToken={_.get(editor.currentPopulatedEnvVariables, 'oauth_access_token')}\n          config={config}\n          ui={ui.auth}\n          uiScope={['auth']}\n          input={step.input}\n          updateUi={updateUi}\n          handleUpdate={handleUpdate}\n        />\n      );\n      break;\n    case 'body':\n      contentElem = <FormHttpBodyEditor id={id} input={step.input} handleUpdate={handleUpdate} />;\n      break;\n    case 'tests':\n      contentElem = (\n        <TestsTab\n          step={step}\n          editorId={editorId}\n          handleUpdate={handleUpdate}\n          collectionId={collectionId}\n          scenarioId={scenarioId}\n          connectedSpecs={connectedSpecs}\n          logicLocations={defaultLogicLocations}\n          readOnly={readOnly}\n        />\n      );\n      break;\n    case 'captures':\n      contentElem = (\n        <CapturesTab\n          fields={_.get(step, 'after.transforms')}\n          handleUpdate={(t, p, v) => {\n            handleUpdate(t, ['after', 'transforms'].concat(p), v);\n          }}\n          logicLocations={defaultLogicLocations}\n          readOnly={readOnly}\n        />\n      );\n      break;\n\n    case 'scripts':\n      contentElem = (\n        <ScriptsTab\n          scenarioId={scenarioId}\n          stepIndex={stepIndex}\n          step={step}\n          handleUpdate={handleUpdate}\n          readOnly={readOnly}\n          autocompleteScopes={{ http: true, ...autocompleteScopes }}\n        />\n      );\n      break;\n    case 'code-generation':\n      contentElem = <CodeGenerationTab editorId={editorId} step={step} />;\n      break;\n    default:\n      contentElem = <div className=\"c-muted\">Choose a tab to add request input.</div>;\n      break;\n  }\n\n  return <Segment attached=\"bottom\">{contentElem}</Segment>;\n};\n\nContent = inject((stores, props) => {\n  const { collectionEditorStore } = stores;\n  const { editorId } = props;\n\n  return {\n    editor: collectionEditorStore.getEditor({ id: editorId }),\n  };\n})(observer(Content));\n\nconst Tabs = props => {\n  const {\n    id,\n    editorId,\n    collectionId,\n    scenarioId,\n    step = {},\n    stepIndex,\n    editor,\n    standalone,\n    modeling,\n    handleUpdate,\n    ui = {},\n    updateUi,\n    connectedSpecs = [],\n    autocompleteScopes = {},\n    config = {},\n    readOnly,\n    whitelist = [],\n    currentTab,\n    handleChangeTab,\n  } = props;\n\n  return [\n    <Items\n      key=\"items\"\n      editorId={editorId}\n      step={step}\n      config={config}\n      whitelist={whitelist}\n      currentTab={currentTab}\n      onClick={(e, { name }) => handleChangeTab(name)}\n    />,\n    <Content\n      key=\"content\"\n      id={id}\n      editorId={editorId}\n      collectionId={collectionId}\n      scenarioId={scenarioId}\n      standalone={standalone}\n      step={step}\n      stepIndex={stepIndex}\n      modeling={modeling}\n      handleUpdate={handleUpdate}\n      ui={ui}\n      updateUi={updateUi}\n      connectedSpecs={connectedSpecs}\n      autocompleteScopes={autocompleteScopes}\n      config={config}\n      readOnly={readOnly}\n      whitelist={whitelist}\n      currentTab={currentTab}\n    />,\n  ];\n};\n\nexport default observer(Tabs);\n","import React from 'react';\nimport _ from 'lodash';\n\nimport FormSearch from '../FormSearch';\nimport FormInputLabel from '../FormInputLabel';\n\nclass ConnectedOperationSearch extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      results: [],\n      value: undefined,\n    };\n  }\n\n  componentWillMount() {\n    this.buildResults({ operations: this.props.operations, all: true });\n  }\n\n  resetComponent = () => {\n    this.setState({ results: [] });\n  };\n\n  handleResultSelect = (e, result) => {\n    const { handleResultSelect, operations, valueProp, onChange } = this.props;\n\n    let value = result.title;\n    const operation = operations[result.key];\n\n    if (operation) {\n      if (handleResultSelect) {\n        handleResultSelect(operation);\n      }\n\n      if (valueProp) {\n        value = operation[valueProp] || value;\n      }\n    }\n\n    if (onChange && !handleResultSelect) {\n      onChange(e, { value });\n    }\n\n    this.setState({ value });\n  };\n\n  handleSearchChange = (e, value) => {\n    const { operations, onChange, protectedExpression } = this.props;\n\n    if (onChange) {\n      onChange(e, { value });\n    }\n\n    if (protectedExpression) {\n      const re1 = new RegExp(protectedExpression, 'i');\n\n      if (re1.test(value)) {\n        return;\n      }\n    }\n\n    const re = new RegExp(_.escapeRegExp(value), 'i');\n\n    const isMatch = (operation, result) => {\n      return (\n        re.test(operation.path) ||\n        re.test(operation.url) ||\n        re.test(operation.method) ||\n        re.test(operation.summary) ||\n        re.test(operation.operationId) ||\n        re.test(result.title) ||\n        re.test(result.description)\n      );\n    };\n\n    this.buildResults({ operations, isMatch });\n  };\n\n  buildResults = ({ operations, isMatch, all }) => {\n    let results;\n\n    for (let key in operations) {\n      if (!operations[key]) continue;\n\n      const operation = operations[key];\n\n      const result = {\n        key,\n        title: `${_.toUpper(operation.method)} ${operation.path}`,\n        description: `${\n          operation.operationId ? `${operation.operationId} - ` : ''\n        }${operation.summary || operation.description || ''}`,\n      };\n\n      // if connected specs/operations have ids, sort into categories by id\n      if (operation.specId) {\n        if (all || isMatch(operation, result)) {\n          if (_.get(results, [operation.specId, 'results'])) {\n            results[operation.specId].results.push(result);\n          } else {\n            if (!results) results = {};\n\n            results[operation.specId] = {\n              name: operation.specName,\n              results: [result],\n            };\n          }\n        }\n      } else {\n        if (!results) results = [];\n        results.push(result);\n      }\n    }\n\n    this.setState({ results });\n  };\n\n  render() {\n    const { results, value: uncontrolledValue } = this.state;\n    const {\n      value: contolledValue,\n      className,\n      placeholder,\n      label,\n      required,\n      tip,\n      readOnly,\n    } = this.props;\n\n    const inputVal =\n      contolledValue ||\n      uncontrolledValue ||\n      _.get(results, [0, 'title']) ||\n      _.get(results, [Object.keys(results)[0], 'results', 0, 'title']);\n\n    return (\n      <div className={className}>\n        <FormInputLabel label={label} required={required} tip={tip} />\n\n        <FormSearch\n          minCharacters={0}\n          placeholder={placeholder}\n          value={inputVal}\n          results={results}\n          onSearchChange={this.handleSearchChange}\n          onResultSelect={this.handleResultSelect}\n          readOnly={readOnly}\n          showResultsOnClick\n        />\n      </div>\n    );\n  }\n}\n\nexport default ConnectedOperationSearch;\n","import React from 'react';\nimport FormInput from '@platform/components/FormInput';\nimport ConnectedOperationSearch from '@platform/components/ConnectedOperationSearch';\n\nconst url = props => {\n  const { value, label, placeholder, endpoints, onChange, handleResultSelect, readOnly } = props;\n\n  let contentElem;\n  if (_.isEmpty(endpoints)) {\n    return (\n      <div className=\"flex-1 pl-2\">\n        <FormInput\n          className=\"flex-1\"\n          label={label}\n          value={value}\n          readOnly={readOnly}\n          placeholder={placeholder}\n          onChange={(e, { value }) => onChange(value)}\n          fluid\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 pl-2\">\n      <ConnectedOperationSearch\n        label={label}\n        value={value}\n        valueProp=\"url\"\n        operations={endpoints}\n        placeholder={placeholder}\n        protectedExpression={/\\?/}\n        onChange={(e, { value }) => onChange(value)}\n        handleResultSelect={value => handleResultSelect(value)}\n        readOnly={readOnly}\n      />\n    </div>\n  );\n};\n\nexport default url;\n","import React from 'react';\nimport FormSelect from '@platform/components/FormSelect';\n\nconst Method = ({ value, label, onChange, readOnly }) => {\n  return (\n    <div className=\"pr-2\">\n      <FormSelect\n        readOnly={readOnly}\n        label={label}\n        value={value}\n        onChange={method => onChange(method)}\n        options={[\n          { text: 'GET', value: 'get' },\n          { text: 'PUT', value: 'put' },\n          { text: 'POST', value: 'post' },\n          { text: 'PATCH', value: 'patch' },\n          { text: 'DELETE', value: 'delete' },\n        ]}\n        placeholder=\"Choose one\"\n      />\n    </div>\n  );\n};\n\nexport default Method;\n","import React from 'react';\nimport FormSelect from '@platform/components/FormSelect';\n\nconst Host = props => {\n  const { value, hosts, label, onChange, readOnly } = props;\n\n  const options = _.uniqBy(\n    [{ text: value, value }].concat(\n      hosts.map(p => ({\n        text: p,\n        value: p,\n      }))\n    ),\n    'value'\n  );\n\n  return (\n    <div className=\"pl-2 pr-2\" style={{ maxWidth: 350 }}>\n      <FormSelect\n        className=\"ScenarioStepInput-hosts\"\n        label={label}\n        placeholder=\"target host\"\n        value={value}\n        options={options}\n        onChange={host => onChange(host)}\n        disabled={readOnly}\n        allowAdditions\n        search\n      />\n    </div>\n  );\n};\n\nexport default Host;\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport { createStepFromOperation } from '@platform/utils/specs/swagger';\nimport { createURL, removeQueryString, getQueryParams, cleanSlashes } from '@platform/utils/url';\n\nimport FormInput from '@platform/components/FormInput';\n\nimport Tabs from './tabs';\nimport Path from './path';\nimport Method from './method';\nimport Host from './host';\n\nclass HttpEditor extends React.Component {\n  static defaultProps = {\n    tabWhitelist: [\n      'settings',\n      'headers',\n      'query',\n      'auth',\n      'body',\n      'tests',\n      'captures',\n      'scripts',\n      'code-generation',\n    ],\n  };\n\n  componentWillMount() {\n    const { step, handleUpdate } = this.props;\n\n    const { currentUrl } = this.currentTarget();\n    const urlQuery = getQueryParams(currentUrl);\n\n    if (!_.isEmpty(urlQuery)) {\n      const newTarget = removeQueryString(currentUrl).url;\n      handleUpdate('set', ['input', 'url'], newTarget);\n      handleUpdate('set', ['input', 'query'], {\n        ...urlQuery,\n        ..._.get(step, 'input.query', {}),\n      });\n    }\n  }\n\n  handleChangeTab = name => {\n    const { ui, updateUi, tabWhitelist } = this.props;\n\n    let tab = name;\n    if (!name || !_.includes(tabWhitelist, name)) {\n      tab = _.first(tabWhitelist);\n    }\n\n    updateUi('set', 'currentTab', tab);\n  };\n\n  currentTarget = () => {\n    const { hosts, step } = this.props;\n    const target = {};\n\n    const targetUrl = _.get(step, 'input.url', '');\n\n    if (!_.isEmpty(hosts)) {\n      const processed = createURL(targetUrl);\n\n      if (!_.isEmpty(processed)) {\n        target.currentHost = `${processed.protocol}//${processed.host}`;\n        target.currentPath = `${processed.pathname}${processed.search}`;\n      }\n    }\n\n    target.currentUrl = target.currentHost ? target.currentPath : targetUrl;\n\n    return target;\n  };\n\n  renderHeaderElems = () => {\n    const { headerElems = [] } = this.props;\n\n    const headers = headerElems.map((elem, i) => (\n      <div key={elem.key || i} className=\"flex mr-3\">\n        {elem.render()}\n      </div>\n    ));\n\n    return headers;\n  };\n\n  handleAddQuery = () => {\n    const { handleUpdate, ui = {}, updateUi, step } = this.props;\n\n    this.handleChangeTab('query');\n\n    const stepQuery = _.get(step, 'input.query') || {};\n    const newQueryIndex = _.keys(stepQuery).length;\n\n    handleUpdate('set', ['input', 'query'], {\n      ...stepQuery,\n      '': '',\n    });\n\n    // setTimeout needed to allow the formInputMap element to render before calling the focus\n    setTimeout(() => {\n      const elem = document.getElementById(`FormInputMapKey-${newQueryIndex}`);\n\n      if (elem) {\n        elem.focus();\n      }\n    }, 200);\n  };\n\n  handleOperationSelect = operation => {\n    const {\n      connectedSpecs,\n      editor,\n      modeling,\n      readOnly,\n      handleUpdate,\n      updateHostOnSearch = true,\n      standalone,\n      step = {},\n    } = this.props;\n\n    if (readOnly) {\n      handleUpdate('set', ['input.url'], operation.path);\n      return;\n    }\n\n    let spec = _.find(connectedSpecs, { id: operation.specId });\n\n    if (!spec) {\n      spec = _.first(connectedSpecs);\n    }\n\n    if (!spec) return;\n\n    const { input, name } =\n      createStepFromOperation({\n        spec,\n        updateHostOnSearch,\n        basePath: _.get(spec, 'data.basePath'),\n        method: operation.method,\n        path: operation.path,\n        pathParamsToCtx: !standalone,\n      }) || {};\n\n    if (!_.isEmpty(input)) {\n      handleUpdate('set', ['input'], input);\n    }\n\n    if (name && _.isEmpty(step.name)) {\n      handleUpdate('set', ['name'], name);\n    }\n\n    editor.updateCurrentStepPathParams(input.params);\n\n    if (modeling) {\n      editor.resetStepResults();\n    }\n\n    this.handleChangeTab();\n  };\n\n  render() {\n    const {\n      id,\n      hosts,\n      editorId,\n      collectionId,\n      scenarioId,\n      step,\n      stepIndex,\n      modeling,\n      handleUpdate,\n      ui,\n      updateUi,\n      connectedSpecs,\n      autocompleteScopes,\n      config,\n      readOnly,\n      tabWhitelist,\n      hideMethod,\n      standalone,\n      endpoints,\n    } = this.props;\n\n    const { currentHost, currentPath, currentUrl } = this.currentTarget();\n    const isEmptyHosts = _.isEmpty(hosts);\n    const isEditingPath = isEmptyHosts || modeling;\n\n    return (\n      <div id=\"tutorial-http-input\" className=\"ScenarioStepInput type-http\">\n        <div id=\"tutorial-http-url\" className=\"ScenarioStepInput-methodUrl flex\">\n          {this.renderHeaderElems()}\n\n          <div className=\"flex flex-1\">\n            {!hideMethod && (\n              <Method\n                label={standalone ? null : 'method'}\n                value={_.get(step, 'input.method')}\n                readOnly={readOnly}\n                onChange={value => handleUpdate('set', ['input', 'method'], value)}\n              />\n            )}\n\n            {isEmptyHosts || modeling ? null : (\n              <Host\n                label={standalone ? null : 'host'}\n                value={currentHost}\n                hosts={hosts}\n                readOnly={readOnly}\n                onChange={value => {\n                  handleUpdate('set', ['input', 'url'], cleanSlashes(`${value}/${currentPath}`));\n                }}\n              />\n            )}\n\n            <Path\n              value={isEditingPath ? _.get(step, 'input.url') : currentUrl}\n              label={standalone ? null : isEditingPath ? 'path' : 'url'}\n              placeholder={isEditingPath ? '/path' : 'http://api.myco.com/path'}\n              endpoints={endpoints}\n              onChange={value => {\n                // change tab on typing ?\n                if (_.last(value) === '?') {\n                  this.handleAddQuery();\n                  return;\n                }\n\n                handleUpdate(\n                  'set',\n                  ['input', 'url'],\n                  isEditingPath\n                    ? value\n                    : cleanSlashes(`${currentHost}/${value}`, { trimEnd: false })\n                );\n              }}\n              handleResultSelect={operation => this.handleOperationSelect(operation)}\n              readOnly={readOnly}\n            />\n          </div>\n        </div>\n\n        <div className=\"mt-4\">\n          <Tabs\n            id={id}\n            editorId={editorId}\n            collectionId={collectionId}\n            scenarioId={scenarioId}\n            standalone={standalone}\n            step={step}\n            stepIndex={stepIndex}\n            modeling={modeling}\n            handleUpdate={handleUpdate}\n            ui={ui}\n            updateUi={updateUi}\n            connectedSpecs={connectedSpecs}\n            autocompleteScopes={autocompleteScopes}\n            config={config}\n            readOnly={readOnly}\n            whitelist={tabWhitelist}\n            currentTab={ui.currentTab || _.first(tabWhitelist)}\n            handleChangeTab={name => this.handleChangeTab(name)}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default inject((stores, props) => {\n  const { appStore, collectionEditorStore } = stores;\n  const { editorId, connectedSpecs, endpoints } = props;\n\n  const editor = collectionEditorStore.getEditor({ id: editorId });\n\n  return {\n    ...appStore.injectUi(`http-step-${editorId}`),\n    editor,\n    endpoints: endpoints || editor.endpoints,\n    connectedSpecs: connectedSpecs || editor.connectedSpecs,\n  };\n})(observer(HttpEditor));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport { inject, observer } from 'mobx-react';\nimport { Button, Popup } from 'semantic-ui-react';\n\nimport shortid from '@platform/utils/shortid';\nimport { fileFormat } from '@platform/utils/url';\nimport { isExternalLink } from '@platform/utils/url';\n\nimport { URI } from '@core/uri';\n\nimport FormDropdown from '../FormDropdown';\nimport FormInput from '../FormInput';\nimport FormSearch from '../FormSearch';\n\nclass RefBuilder extends React.Component {\n  static propTypes = {\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    size: PropTypes.oneOf(['large', 'medium', 'small']),\n    $ref: PropTypes.string,\n    localData: PropTypes.object,\n    context: PropTypes.bool,\n    fileFilter: PropTypes.object,\n    routeDataTargets: PropTypes.object,\n    store: PropTypes.object,\n    initialSource: PropTypes.oneOf(['local', 'external', 'currentProject']),\n    targets: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  };\n\n  componentWillMount() {\n    this.init(this.props);\n  }\n\n  componentWillUpdate(nextProps) {\n    const { $ref, store, onComplete } = nextProps;\n    const { builtRef, dirty } = store;\n\n    if (this.props.id !== nextProps.id) {\n      this.init(nextProps);\n    } else if (!_.isEqual($ref, builtRef)) {\n      if (dirty) {\n        this.onChange({ builtRef, onComplete });\n      }\n    }\n  }\n\n  init = props => {\n    const {\n      id,\n      $ref,\n      localData,\n      fileFilter,\n      routeDataTargets,\n      store,\n      initialSource,\n      targets,\n      projectStore,\n      context,\n      force,\n    } = props;\n\n    const currentProjectId = _.get(projectStore, 'current.id');\n    const currentFilePath = _.get(projectStore, 'current.currentFilePathname', '');\n    const currentProjectPath = _.dropRight(_.split(currentFilePath, '/'));\n\n    store.initial({\n      id,\n      $ref,\n      fileFilter,\n      routeDataTargets,\n      initialSource,\n      targets,\n      localData,\n      currentProjectId,\n      currentProjectPath,\n      currentFilePath,\n      context,\n      force,\n    });\n  };\n\n  onChange = ({ builtRef, confirmed, onComplete, force }) => {\n    const { confirm, store } = this.props;\n\n    if (!force) {\n      if (!onComplete || (confirm && !confirmed) || !store.isComplete) return;\n    }\n\n    store.pristine();\n    onComplete(builtRef);\n  };\n\n  renderConfirm = () => {\n    const { store, $ref, confirm, onComplete, onRemove } = this.props;\n    const {\n      isUrlLoading,\n      isUrlValid,\n      isComplete,\n      builtRef,\n      urlError,\n      initializing,\n      selectedSource,\n    } = store;\n\n    let color = 'grey';\n    let content = '';\n    let popup = '';\n    let icon;\n\n    if (isUrlLoading || initializing) {\n      color = 'grey';\n      content = 'Loading';\n      icon = 'spinner';\n    } else if (isComplete) {\n      color = 'green';\n      content = 'Confirm';\n      if (!confirm) {\n        icon = 'check';\n        popup = '';\n      }\n    } else {\n      color = 'red';\n\n      if (confirm) {\n        content = 'Incomplete';\n      } else {\n        icon = 'warning';\n      }\n\n      popup = 'Ref selection not complete.';\n      if (urlError) {\n        popup = urlError;\n        content = 'URL Error';\n      } else if (!isUrlValid && selectedSource === 'external') {\n        popup = 'URL is invalid';\n        content = 'Invalid Url';\n      }\n    }\n\n    const buttonProps = {\n      className: cn('RefBuilder-button', {\n        'is-confirm': confirm,\n        'is-simple': icon === 'check' || icon === 'warning' || content === 'Incomplete',\n        'is-negative': icon === 'warning' || content === 'Incomplete',\n        'is-positive': icon === 'check',\n      }),\n      icon,\n      color,\n      loading: isUrlLoading,\n    };\n\n    if (confirm) {\n      buttonProps.content = content;\n      buttonProps.tabIndex = 2;\n      buttonProps.disabled = !isComplete || builtRef === $ref;\n      buttonProps.onClick = () => this.onChange({ builtRef, confirmed: true, onComplete });\n    }\n\n    const buttons = [];\n\n    const b = <Button key=\"cb\" {...buttonProps} />;\n    if (!_.isEmpty(popup)) {\n      buttons.push(\n        <Popup key=\"cp\" trigger={b} on=\"hover\" position=\"top right\">\n          {popup}\n        </Popup>\n      );\n    } else {\n      buttons.push(b);\n    }\n\n    buttons.push(this.renderReferenceLink());\n\n    if (onRemove) {\n      buttons.push(\n        <Button key=\"delete\" className=\"RefBuilder-button\" icon=\"trash\" onClick={onRemove} />\n      );\n    }\n\n    return buttons;\n  };\n\n  renderCurrentProject = () => {\n    const { store, size } = this.props;\n    const { targets } = store;\n\n    const searchParts = [];\n    if (size === 'small') {\n      searchParts.push(this.renderConfirm());\n      searchParts.push(this.renderTargetSearch());\n    } else {\n      searchParts.push(this.renderTargetSearch());\n      searchParts.push(this.renderConfirm());\n    }\n\n    return (\n      <div\n        className={cn('RedBuilder-groups flex flex-wrap', {\n          'flex-col': size === 'small',\n        })}\n      >\n        <div className=\"RedBuilder-group flex-1 flex\">\n          {this.renderSourceDropdown()}\n          {this.renderFileSearch()}\n        </div>\n\n        <div className={cn('RedBuilder-group flex', { 'flex-1': targets })}>{searchParts}</div>\n      </div>\n    );\n  };\n\n  renderExternal = () => {\n    const { store, size } = this.props;\n    const { externalUrl, handleChange, fetchExternalUrl, targets } = store;\n\n    const searchParts = [];\n    if (size === 'small') {\n      searchParts.push(this.renderConfirm());\n      searchParts.push(this.renderTargetSearch());\n    } else {\n      searchParts.push(this.renderTargetSearch());\n      searchParts.push(this.renderConfirm());\n    }\n\n    return (\n      <div\n        className={cn('RedBuilder-groups flex flex-wrap', {\n          'flex-col': size === 'small',\n        })}\n      >\n        <div className=\"RedBuilder-group flex-1 flex\">\n          {this.renderSourceDropdown()}\n\n          <FormInput\n            className=\"RefBuilder-search flex-1\"\n            placeholder=\"https://next.stoplight.io/\"\n            onChange={(e, { value }) => {\n              handleChange('externalUrl', value);\n              fetchExternalUrl();\n            }}\n            value={externalUrl || ''}\n            labelPosition=\"left\"\n            input={{ tabIndex: 1 }}\n            fluid\n          />\n        </div>\n        <div\n          className={cn('RedBuilder-group flex', {\n            'flex-1': targets,\n          })}\n        >\n          {searchParts}\n        </div>\n      </div>\n    );\n  };\n\n  renderFileSearch = () => {\n    const { store } = this.props;\n    const { file, fileQuery, fileResults, loadFiles, handleChange, setQuery } = store;\n\n    return (\n      <FormSearch\n        className=\"RefBuilder-search flex-1\"\n        placeholder={_.get(file, 'title') || 'choose a file'}\n        value={fileQuery || ''}\n        results={fileResults}\n        onResultSelect={(e, data) => {\n          handleChange('file', data);\n        }}\n        onSearchChange={(e, value) => {\n          setQuery('file', value);\n        }}\n        onBlur={() => {\n          setTimeout(() => {\n            if (_.isEmpty(store.fileQuery)) {\n              setQuery('file', _.get(file, 'title'));\n            }\n          }, 200);\n        }}\n        inputProps={{\n          onFocus: () => {\n            setQuery('file', '');\n            loadFiles();\n          },\n          tabIndex: 1,\n        }}\n        minCharacters={0}\n        category\n        showNoResults\n      />\n    );\n  };\n\n  renderLocal = () => {\n    return (\n      <div className=\"flex flex-wrap\">\n        {this.renderSourceDropdown()}\n        {this.renderTargetSearch({ force: true })}\n        {this.renderConfirm()}\n      </div>\n    );\n  };\n\n  renderReferenceLink = () => {\n    const { store, routerStore } = this.props;\n    const { isComplete, initializing, referenceLink } = store;\n\n    const disabled = initializing || !isComplete;\n\n    const buttonProps = {\n      className: 'RefBuilder-button reference-link',\n      icon: 'book',\n      tabIndex: 2,\n      onClick: () => {\n        if (isExternalLink(referenceLink)) {\n          window.open(referenceLink, '_blank');\n        } else {\n          const uri = URI.parse(referenceLink);\n          routerStore.push({\n            pathname: uri.path,\n            search: uri.query,\n          });\n        }\n      },\n      disabled,\n    };\n\n    const b = <Button key=\"rb\" {...buttonProps} />;\n    return (\n      <Popup key=\"rp\" trigger={b} on=\"hover\" position=\"top right\">\n        Go to reference.\n      </Popup>\n    );\n  };\n\n  renderSource = () => {\n    const { store } = this.props;\n    const { source } = store;\n\n    let component;\n\n    switch (source) {\n      case 'local':\n      case 'shared':\n        component = this.renderLocal();\n        break;\n      case 'currentProject':\n        component = this.renderCurrentProject();\n        break;\n      case 'external':\n        component = this.renderExternal();\n        break;\n      default:\n    }\n\n    return component;\n  };\n\n  renderSourceDropdown = () => {\n    const { store } = this.props;\n    const { source, sourceOptions, handleChange } = store;\n\n    return (\n      <FormDropdown\n        key=\"source-dropdown\"\n        className=\"RefBuilder-dropdown\"\n        value={source}\n        options={sourceOptions}\n        onChange={(e, { value }) => {\n          if (value !== source) {\n            handleChange('source', value);\n          }\n        }}\n        fluid\n        selection\n      />\n    );\n  };\n\n  renderTargetSearch = ({ force } = {}) => {\n    const { store, targets } = this.props;\n    if (!targets && !force) return;\n\n    const {\n      file,\n      externalUrl,\n      fileQuery,\n      handleChange,\n      isTargetLoading,\n      isUrlValid,\n      loadSpecData,\n      setQuery,\n      source,\n      target,\n      targetResults,\n      targetQuery,\n    } = store;\n\n    const disabled =\n      (source === 'currentProject' && !fileQuery) ||\n      (source === 'external' && (!externalUrl || !isUrlValid));\n\n    if (fileFormat({ file: _.get(file, 'title') }).language === 'md') return null;\n\n    return (\n      <FormSearch\n        key=\"target-search\"\n        className=\"RefBuilder-search flex-1\"\n        placeholder={_.get(target, 'title') || 'choose a target'}\n        value={targetQuery || ''}\n        results={targetResults}\n        onResultSelect={(e, data) => {\n          handleChange('target', data);\n        }}\n        onSearchChange={(e, value) => {\n          setQuery('target', value);\n        }}\n        onBlur={() => {\n          setTimeout(() => {\n            if (_.isEmpty(store.targetQuery)) {\n              setQuery('target', _.get(target, 'title'));\n            }\n          }, 200);\n        }}\n        inputProps={{\n          onFocus: () => {\n            setQuery('target', '');\n            loadSpecData();\n          },\n          tabIndex: 1,\n        }}\n        noResultsMessage={isTargetLoading ? 'Loading Targets ...' : 'No results found.'}\n        disabled={disabled}\n        minCharacters={0}\n        showNoResults\n        category\n        fluid\n      />\n    );\n  };\n\n  render() {\n    const { store, className, size = 'large' } = this.props;\n    const { source, errorMessage } = store;\n\n    let error;\n    if (errorMessage) {\n      error = <p className=\"RefBuilder-error pt-3\">{errorMessage}</p>;\n    }\n\n    return (\n      <div className={cn('RefBuilder', `is-${size}`, `is-${source}`, className)}>\n        {this.renderSource()}\n        {error}\n      </div>\n    );\n  }\n}\n\nconst InjectedRefBuilder = inject(({ projectStore, routerStore, refBuilderStore }, { id }) => {\n  let store = refBuilderStore.register(id);\n\n  return {\n    projectStore,\n    routerStore,\n    store,\n  };\n})(observer(RefBuilder));\n\nclass RefBuilderWrapper extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { id: this.props.id || shortid() };\n  }\n\n  render() {\n    const { id } = this.state;\n\n    return <InjectedRefBuilder {...this.props} id={this.props.id || id} />;\n  }\n}\n\nexport default RefBuilderWrapper;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Menu, Segment, Icon, Popup, Message } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nimport CapturesTab, { CapturesTabItem } from './tabs/captures';\nimport ScriptsTab, { ScriptsTabItem } from './tabs/scripts';\nimport RefBuilder from '../../RefBuilder';\n\nconst defaultLogicLocations = [\n  'output.headers',\n  'output.body',\n  'output.status',\n  'output.time',\n  '$.ctx',\n  '$$.env',\n  '$$.response.headers',\n  '$$.response.body',\n  '$$.response.status',\n];\n\nfunction RefInput(props) {\n  const {\n    id,\n    editorId,\n    collection,\n    scenarioId,\n    step = {},\n    ui = {},\n    updateUi,\n\n    headerElems = [],\n    handleUpdate,\n    readOnly,\n    autocompleteScopes = {},\n  } = props;\n\n  let pathname = typeof window !== 'undefined' ? window.location.pathname : '';\n  if (scenarioId && scenarioId !== 'undefined') {\n    pathname = pathname.replace(new RegExp(`/${scenarioId}$`), '');\n    if (pathname.charAt(0) === '/') {\n      pathname = pathname.substring(1);\n    }\n  }\n\n  const stepRef = _.get(step, ['input', '$ref']);\n\n  const inputTab = ui.hasOwnProperty('inputTab') ? ui.inputTab : 'captures';\n  const handleInputTabClick = (e, { name }) => {\n    updateUi('set', ['inputTab'], name === inputTab ? null : name);\n  };\n  let contentElem;\n  switch (inputTab) {\n    case 'captures':\n      contentElem = (\n        <CapturesTab\n          fields={_.get(step, 'after.transforms')}\n          handleUpdate={(t, p, v) => {\n            handleUpdate(t, ['after', 'transforms'].concat(p), v);\n          }}\n          logicLocations={defaultLogicLocations}\n          readOnly={readOnly}\n        />\n      );\n      break;\n    case 'scripts':\n      contentElem = (\n        <ScriptsTab\n          step={step}\n          handleUpdate={handleUpdate}\n          readOnly={readOnly}\n          autocompleteScopes={{ ref: true, ...autocompleteScopes }}\n        />\n      );\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  return (\n    <div className=\"ScenarioStepInput type-ref\">\n      {readOnly ? (\n        <Message info size=\"small\">\n          <Icon name=\"info\" /> This editor is in read only mode.\n        </Message>\n      ) : null}\n\n      <div className=\"ScenarioStepInput-methodUrl flex\">\n        {headerElems.map((elem, i) => (\n          <div key={elem.key || i} className=\"mr-3\">\n            {elem.render()}\n          </div>\n        ))}\n\n        <div className=\"flex flex-1 items-center\">\n          <RefBuilder\n            id={id}\n            className=\"flex-1\"\n            localData={collection}\n            initialSource=\"local\"\n            $ref={stepRef || ''}\n            fileFilter={{ scenario: [/scenario/] }}\n            routeDataTargets={{ scenario: ['scenarios', 'utilities'] }}\n            targets\n            onComplete={value => {\n              const val = _.split(value, '/');\n              handleUpdate('set', ['input'], {\n                name: `${_.last(val)} - ${val[_.size(val) - 2]}`,\n                $ref: value,\n              });\n            }}\n          />\n        </div>\n      </div>\n\n      <Menu id=\"tutorial-scenario-input\" attached=\"top\" tabular size=\"small\">\n        <CapturesTabItem\n          step={step}\n          active={inputTab === 'captures'}\n          onClick={handleInputTabClick}\n        />\n\n        <ScriptsTabItem step={step} active={inputTab === 'scripts'} onClick={handleInputTabClick} />\n      </Menu>\n\n      <Segment attached=\"bottom\">{contentElem}</Segment>\n    </div>\n  );\n}\n\nexport default inject(({ routerStore, appStore, collectionEditorStore }) => ({\n  routerStore,\n  ...appStore.injectUi('ref-step'),\n}))(observer(RefInput));\n","import React from 'react';\nimport _ from 'lodash';\nimport { Menu, Segment, Message, Icon } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nimport FormCodeEditor from '../../FormCodeEditor';\n\nfunction ScriptInput(props) {\n  const {\n    id,\n    step = {},\n    ui = {},\n    updateUi,\n\n    handleUpdate,\n\n    autocompleteScopes = {},\n    readOnly,\n  } = props;\n\n  const stepScript = _.get(step, ['input', 'script'], '');\n\n  const inputTab = ui.hasOwnProperty('inputTab') ? ui.inputTab : 'script';\n  const handleInputTabClick = (e, { name }) => {\n    updateUi('set', ['inputTab'], name === inputTab ? null : name);\n  };\n\n  let contentElem;\n  switch (inputTab) {\n    case 'script':\n      contentElem = (\n        <FormCodeEditor\n          name={id}\n          mode=\"javascript\"\n          readOnly={readOnly}\n          autocompleteScopes={{ script: true, ...autocompleteScopes }}\n          input={{\n            value: stepScript,\n            onChange(value) {\n              if (_.isEmpty(value)) {\n                handleUpdate('unset', ['input', 'script']);\n              } else {\n                handleUpdate('set', ['input', 'script'], value);\n              }\n            },\n          }}\n        />\n      );\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  return (\n    <div className=\"ScenarioStepInput type-script\">\n      {readOnly ? (\n        <Message info size=\"small\">\n          <Icon name=\"info\" /> This editor is in read only mode.\n        </Message>\n      ) : null}\n\n      <Menu id=\"tutorial-scenario-input\" attached=\"top\" tabular size=\"small\">\n        <Menu.Item name=\"scripts\" active>\n          Script\n        </Menu.Item>\n      </Menu>\n\n      <Segment attached=\"bottom\">{contentElem}</Segment>\n    </div>\n  );\n}\n\nexport default inject(({ routerStore, appStore, collectionEditorStore }) => ({\n  routerStore,\n  ...appStore.injectUi('script-step'),\n}))(observer(ScriptInput));\n","import React from 'react';\nimport { Message } from 'semantic-ui-react';\nimport _ from 'lodash';\n\nimport HttpInput from './http';\nimport RefInput from './ref';\nimport ScriptInput from './script';\n\nfunction Step(props) {\n  const { editor, editorId, type, step = {}, autocompleteScopes = {} } = props;\n\n  const id = `${editorId}:${_.join(_.get(editor, 'currentPath', ['noop']), ':')}`;\n\n  if (!step) {\n    return (\n      <Message negative compact>\n        Step not found.\n      </Message>\n    );\n  }\n\n  let editorElem;\n  switch (type || step.type) {\n    case 'http':\n      editorElem = (\n        <HttpInput {...props} id={id} autocompleteScopes={{ step: true, ...autocompleteScopes }} />\n      );\n      break;\n    case 'ref':\n      editorElem = (\n        <RefInput {...props} id={id} autocompleteScopes={{ step: true, ...autocompleteScopes }} />\n      );\n      break;\n    case 'script':\n      editorElem = (\n        <ScriptInput\n          {...props}\n          id={id}\n          autocompleteScopes={{ step: true, ...autocompleteScopes }}\n        />\n      );\n      break;\n    default:\n      if (_.isEmpty(step)) {\n        editorElem = <Message negative>Step does not exist.</Message>;\n      } else {\n        editorElem = <Message negative>Invalid step type {type || step.type}.</Message>;\n      }\n  }\n\n  return editorElem;\n}\n\nexport default Step;\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\n// import './styles.styl';\n\n/**\n * Returns the type of an object as a string.\n *\n * @param obj Object The object you want to inspect\n * @return String The object's type\n */\nconst objType = obj => {\n  const className = Object.prototype.toString.call(obj).slice(8, -1);\n  return className;\n};\n\n/**\n * String node component\n */\nconst JSONStringNode = ({ data, keyName, value }) => {\n  return (\n    <li\n      className=\"string itemNode\"\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <label>{keyName}:</label>\n      <span>{value}</span>\n    </li>\n  );\n};\n\n/**\n * Number node component\n */\nconst JSONNumberNode = ({ data, keyName, value }) => {\n  return (\n    <li\n      className=\"number itemNode\"\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <label>{keyName}:</label>\n      <span>{value}</span>\n    </li>\n  );\n};\n\n/**\n * Null node component\n */\nconst JSONNullNode = ({ data, keyName, value }) => {\n  return (\n    <li\n      className=\"null itemNode\"\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <label>{keyName}:</label>\n      <span>null</span>\n    </li>\n  );\n};\n\n/**\n * Boolean node component\n */\nconst JSONBooleanNode = ({ data, keyName, value }) => {\n  const truthString = value ? 'true' : 'false';\n  return (\n    <li\n      className=\"boolean itemNode\"\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <label>{keyName}:</label>\n      <span>{truthString}</span>\n    </li>\n  );\n};\n\n/**\n * Creates a React JSON Viewer component for a key and it's associated data\n *\n * @param key String The JSON key (property name) for the node\n * @param value Mixed The associated data for the JSON key\n * @return Component The React Component for that node\n */\nconst grabNode = (key, value) => {\n  const nodeType = objType(value);\n  let theNode;\n  const aKey = key + Date.now();\n  if (nodeType === 'Object') {\n    theNode = <JSONObjectNode data={value} keyName={key} key={aKey} />;\n  } else if (nodeType === 'Array') {\n    theNode = <JSONArrayNode data={value} keyName={key} key={aKey} />;\n  } else if (nodeType === 'String') {\n    theNode = <JSONStringNode keyName={key} value={value} key={aKey} />;\n  } else if (nodeType === 'Number') {\n    theNode = <JSONNumberNode keyName={key} value={value} key={aKey} />;\n  } else if (nodeType === 'Boolean') {\n    theNode = <JSONBooleanNode keyName={key} value={value} key={aKey} />;\n  } else if (nodeType === 'Null') {\n    theNode = <JSONNullNode keyName={key} value={value} key={aKey} />;\n  } else {\n    console.error('How did this happen?', nodeType);\n  }\n  return theNode;\n};\n\n/**\n * Mixin for setting intial props and state and handling clicks on\n * nodes that can be expanded.\n */\nfunction expandedStateHandlerHOC(Component) {\n  return class extends React.Component {\n    static defaultProps = {\n      data: [],\n      initialExpanded: false,\n    };\n\n    state = {\n      expanded: this.props.initialExpanded,\n    };\n\n    handleClick = e => {\n      e.stopPropagation();\n      this.setState({\n        expanded: !this.state.expanded,\n      });\n    };\n\n    componentWillReceiveProps() {\n      // resets our caches and flags we need to build child nodes again\n      this.renderedChildren = [];\n      this.itemString = false;\n      this.needsChildNodes = true;\n    }\n\n    render() {\n      return <Component handleClick={this.handleClick} {...this.props} {...this.state} />;\n    }\n  };\n}\n\nconst buildChildNodes = ({ data }) => {\n  const childNodes = [];\n\n  const obj = data;\n  for (const k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      childNodes.push(grabNode(k, obj[k]));\n    }\n  }\n\n  return childNodes;\n};\n\n/**\n * Array node class. If you have an array, this is what you should use to\n * display it.\n */\n@expandedStateHandlerHOC\nclass JSONArrayNode extends React.Component {\n  static displayName = 'JSONArrayNode';\n\n  static propTypes = {\n    data: PropTypes.array,\n    keyName: PropTypes.node,\n    expanded: PropTypes.bool,\n    handleClick: PropTypes.func,\n  };\n\n  /**\n   * Returns the child nodes for each element in the array. If we have\n   * generated them previously, we return from cache, otherwise we create\n   * them.\n   */\n  getChildNodes = () => {\n    if (this.props.expanded && this.needsChildNodes) {\n      const childNodes = buildChildNodes({ data: this.props.data });\n      this.needsChildNodes = false;\n      this.renderedChildren = childNodes;\n    }\n\n    return this.renderedChildren || [];\n  };\n\n  /**\n   * flag to see if we still need to render our child nodes\n   */\n  needsChildNodes = true;\n\n  /**\n   * cache store for our child nodes\n   */\n  renderedChildren = [];\n\n  /**\n   * cache store for the number of items string we display\n   */\n  itemString = false;\n\n  /**\n   * Returns the \"n Items\" string for this node, generating and\n   * caching it if it hasn't been created yet.\n   */\n  getItemString = () => {\n    if (!this.itemString) {\n      const lenWord = this.props.data.length === 1 ? ' Item' : ' Items';\n      this.itemString = this.props.data.length + lenWord;\n    }\n    return this.itemString;\n  };\n\n  render() {\n    const childNodes = this.getChildNodes();\n    const childListStyle = {\n      display: this.props.expanded ? 'block' : 'none',\n    };\n    let cls = 'array parentNode';\n    cls += this.props.expanded ? ' expanded' : '';\n    return (\n      <li className={cls} onClick={this.props.handleClick}>\n        <label>{this.props.keyName}</label>\n        <span>{this.getItemString()}</span>\n        <ol style={childListStyle}>{childNodes}</ol>\n      </li>\n    );\n  }\n}\n\n/**\n * Object node class. If you have an object, this is what you should use to\n * display it.\n */\n@expandedStateHandlerHOC\nclass JSONObjectNode extends React.Component {\n  static displayName = 'JSONObjectNode';\n\n  static propTypes = {\n    data: PropTypes.object,\n    keyName: PropTypes.node,\n    expanded: PropTypes.bool,\n    handleClick: PropTypes.func,\n  };\n\n  /**\n   * Returns the child nodes for each element in the object. If we have\n   * generated them previously, we return from cache, otherwise we create\n   * them.\n   */\n  getChildNodes = () => {\n    if (this.props.expanded && this.needsChildNodes) {\n      const childNodes = buildChildNodes({ data: this.props.data });\n      this.needsChildNodes = false;\n      this.renderedChildren = childNodes;\n    }\n\n    return this.renderedChildren || [];\n  };\n\n  /**\n   * Returns the \"n Items\" string for this node, generating and\n   * caching it if it hasn't been created yet.\n   */\n  getItemString = () => {\n    if (!this.itemString) {\n      const obj = this.props.data;\n      let len = 0;\n      let lenWord = ' Items';\n      for (const k in obj) {\n        if (obj.hasOwnProperty(k)) {\n          len += 1;\n        }\n      }\n      if (len === 1) {\n        lenWord = ' Item';\n      }\n      this.itemString = len + lenWord;\n    }\n    return this.itemString;\n  };\n\n  /**\n   * cache store for the number of items string we display\n   */\n  itemString = false;\n\n  /**\n   * flag to see if we still need to render our child nodes\n   */\n  needsChildNodes = true;\n\n  /**\n   * cache store for our child nodes\n   */\n  renderedChildren = [];\n\n  render() {\n    const childNodes = this.getChildNodes();\n    const childListStyle = {\n      display: this.props.expanded ? 'block' : 'none',\n    };\n    let cls = 'object parentNode';\n    cls += this.props.expanded ? ' expanded' : '';\n    return (\n      <li className={cls} onClick={this.props.handleClick}>\n        <label>{this.props.keyName}:</label>\n        <span>{this.getItemString()}</span>\n        <ul style={childListStyle}>{childNodes}</ul>\n      </li>\n    );\n  }\n}\n\n/**\n * JSONTree component. This is the 'viewer' base. Pass it a `data` prop and it\n * will render that data, or pass it a `source` URL prop and it will make\n * an XMLHttpRequest for said URL and render that when it loads the data.\n *\n * The first node it draws will be expanded by default.\n */\nclass JSONTree extends React.Component {\n  static propTypes = {\n    data: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.string]),\n  };\n\n  static defaultProps = {\n    source: false,\n  };\n\n  render() {\n    let { data } = this.props;\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) {\n        // error\n      }\n    }\n\n    const nodeType = objType(data);\n    let rootNode;\n    if (nodeType === 'Object') {\n      rootNode = <JSONObjectNode data={data} keyName=\"object\" initialExpanded />;\n    } else if (nodeType === 'Array') {\n      rootNode = <JSONArrayNode data={data} initialExpanded keyName=\"array\" />;\n    } else {\n      console.error('How did you manage that?');\n    }\n    return <ul className=\"sl-json-tree\">{rootNode}</ul>;\n  }\n}\n\nexport default JSONTree;\n","import React from 'react'; // eslint-disable-line no-unused-vars\nimport PropTypes from 'prop-types';\n\nexport default class DocumentContext extends React.Component {\n  static propTypes = {\n    document: PropTypes.object.isRequired,\n    window: PropTypes.object.isRequired,\n    children: PropTypes.element.isRequired,\n  };\n\n  static childContextTypes = {\n    document: PropTypes.object.isRequired,\n    window: PropTypes.object.isRequired,\n  };\n\n  getChildContext() {\n    return {\n      document: this.props.document,\n      window: this.props.window,\n    };\n  }\n\n  render() {\n    return React.Children.only(this.props.children);\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport _ from 'lodash';\n\nimport DocumentContext from './documentContext';\n\nclass Frame extends React.Component {\n  static propTypes = {\n    id: PropTypes.string.isRequired,\n    style: PropTypes.object,\n    head: PropTypes.node,\n  };\n\n  componentDidMount() {\n    this.renderFrameContents();\n  }\n\n  renderFrameContents = () => {\n    const doc = ReactDOM.findDOMNode(this).contentDocument;\n\n    if (doc && doc.readyState === 'complete') {\n      const win = doc.defaultView || doc.parentView;\n\n      const contents = (\n        <DocumentContext document={doc} window={win}>\n          <div className=\"frame-content\">\n            {this.props.head}\n            {this.props.children}\n          </div>\n        </DocumentContext>\n      );\n\n      ReactDOM.render(contents, doc.body);\n    } else {\n      setTimeout(this.renderFrameContents, 0);\n    }\n  };\n\n  componentDidUpdate() {\n    this.renderFrameContents();\n  }\n\n  componentWillUnmount() {\n    ReactDOM.unmountComponentAtNode(ReactDOM.findDOMNode(this).contentDocument.body);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return this.props.id !== nextProps.id;\n  }\n\n  render() {\n    const targetProps = _.clone(this.props);\n    delete targetProps.children;\n\n    // The iframe isn't ready so we drop children from props here\n    return <iframe {...targetProps} />;\n  }\n}\n\nexport default Frame;\n","/* global vkbeautify */\n\nimport React from 'react';\nimport { Dropdown } from 'semantic-ui-react';\n\n// import './vkBeautify';\n\nimport CodeEditor from '../CodeEditor';\nimport JsonTree from '../JsonTree';\nimport Frame from '../Frame';\n\nconst HttpBodyViewer = props => {\n  const {\n    className = '',\n    name,\n    value,\n    contentType = '',\n    uiCache = {},\n    uiCacheScope = [],\n    updateUiCache,\n    shouldEncode,\n    noTypeSelector,\n  } = props;\n\n  const isImage = contentType.match('image');\n  const isHtml = contentType.match('html');\n  const isXml = contentType.match('xml');\n\n  let defaultRenderer = 'json';\n  if (isXml) {\n    defaultRenderer = 'xml';\n  } else if (isHtml) {\n    defaultRenderer = 'renderHtml';\n  }\n\n  const renderer = uiCache.renderer || defaultRenderer;\n\n  let contentElem;\n  let specialCase;\n\n  if (isImage) {\n    specialCase = true;\n    const imgStr = shouldEncode\n      ? btoa(String.fromCharCode.apply(null, new Uint8Array(value)))\n      : value;\n    contentElem = (\n      <div>\n        <img src={`data:${contentType};base64,${imgStr}`} />\n      </div>\n    );\n  } else if (isHtml && shouldEncode) {\n    specialCase = true;\n    contentElem = (\n      <Frame id=\"body-viewer\" src=\"about:blank\" width=\"100%\" height=\"1000\" frameBorder=\"0\">\n        <div dangerouslySetInnerHTML={{ __html: value }} />\n      </Frame>\n    );\n  } else {\n    switch (renderer) {\n      case 'jsonExplorer':\n        contentElem = <JsonTree data={value} />;\n        break;\n      case 'renderHtml':\n        contentElem = (\n          <Frame id=\"body-viewer\" src=\"about:blank\" width=\"100%\" height=\"1000\" frameBorder=\"0\">\n            <div dangerouslySetInnerHTML={{ __html: value }} />\n          </Frame>\n        );\n        break;\n      default:\n        contentElem = (\n          <CodeEditor\n            name={`${name}-${renderer}`}\n            mode={renderer}\n            value={value}\n            autogrow\n            maxLines={40}\n            noFill\n            readOnly\n            wordWrap\n            lint={false}\n          />\n        );\n    }\n  }\n\n  let dropdownElem;\n  if (!specialCase && !noTypeSelector) {\n    dropdownElem = (\n      <div className=\"mb-6\">\n        <Dropdown\n          options={[\n            {\n              text: 'JSON',\n              value: 'json',\n            },\n            {\n              text: 'JSON Explorer',\n              value: 'jsonExplorer',\n            },\n            {\n              text: 'XML',\n              value: 'xml',\n            },\n            {\n              text: 'HTML',\n              value: 'html',\n            },\n            {\n              text: 'Rendered HTML',\n              value: 'renderHtml',\n            },\n            {\n              text: 'Plain',\n              value: 'text',\n            },\n          ]}\n          value={renderer}\n          onChange={(e, options) => {\n            updateUiCache('set', uiCacheScope.concat('renderer'), options.value);\n          }}\n          selection\n          button\n          basic\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={`HttpBodyViewer ${className}`}>\n      {dropdownElem}\n      {contentElem}\n    </div>\n  );\n};\n\nexport default HttpBodyViewer;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Input } from 'semantic-ui-react';\n\nconst InputResultList = props => {\n  const { className = '', fields = {}, sort } = props;\n\n  let processed = fields;\n  if (sort) {\n    processed = {};\n    _.forEach(_.keys(fields).sort(), key => {\n      processed[key] = fields[key];\n    });\n  }\n\n  return (\n    <div className={`InputResultList ${className}`}>\n      {_.map(processed, (value, key) => {\n        return (\n          <div key={key} className=\"mb-2\">\n            <div className=\"flex\">\n              <Input defaultValue={key} className=\"flex-1\" readOnly />\n              <Input defaultValue={value} className=\"flex-1\" readOnly />\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default InputResultList;\n","import React from 'react';\nimport { Statistic } from 'semantic-ui-react';\nimport _ from 'lodash';\n\nconst ScenarioStats = ({ title, items = [] }) => {\n  let contentElem;\n  if (_.isEmpty(items)) {\n    contentElem = <div className=\"text-center font-bold\">no results yet</div>;\n  } else {\n    contentElem = <Statistic.Group size=\"tiny\" widths={items.length} items={items} />;\n  }\n\n  return (\n    <div className=\"ScenarioStats\">\n      {title ? <div className=\"SplitEditor-parsedTitle\">{title}</div> : null}\n      {contentElem}\n    </div>\n  );\n};\n\nexport default ScenarioStats;\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu } from 'semantic-ui-react';\nimport { safeStringify } from '@platform/utils/json';\n\nimport HttpBodyViewer from '../../HttpBodyViewer';\nimport InputResultList from '../../InputResultList';\nimport ScenarioStats from '../../ScenarioStats';\n\nconst ScenarioOutput = props => {\n  const { id, ui, updateUi, className = '', result = {}, stats = [] } = props;\n\n  if (_.isEmpty(result)) {\n    return null;\n  }\n\n  const { activeResultTab = 'body' } = ui;\n  const response = result.output || {};\n\n  const handleItemClick = (e, { name }) => {\n    updateUi('set', ['activeResultTab'], name);\n  };\n\n  const responseContentType = response.headers ? response.headers['Content-Type'] : '';\n\n  // BUILD THE TAB CONTENT\n\n  let contentElem;\n  switch (activeResultTab) {\n    case 'body':\n      contentElem = (\n        <div>\n          <ScenarioStats items={stats} />\n\n          <HttpBodyViewer\n            name={`${id}-body`}\n            contentType={responseContentType}\n            value={safeStringify(_.get(response, 'body', ''))}\n            uiCache={ui.body}\n            uiCacheScope={['body']}\n            updateUiCache={updateUi}\n            noTypeSelector\n          />\n        </div>\n      );\n      break;\n    case 'headers':\n      contentElem = <InputResultList fields={_.get(response, 'headers')} sort />;\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  // BUILD THE TABS\n\n  // BODY TAB\n\n  const status = String(_.get(response, 'status') || 'na');\n  const bodyChar = status.charAt(0);\n  let bodyClass = 'text-active';\n  if (bodyChar === '2') {\n    bodyClass = 'c-positive';\n  } else if (_.includes(['4', '5'], bodyChar)) {\n    bodyClass = 'c-negative';\n  }\n  const bodyName = (\n    <span>\n      Scenario Response <span className={`ml-3 ${bodyClass}`}>[{status}]</span>{' '}\n      {response.time ? (\n        <span className=\"c-muted ml-3\">\n          {response.time}\n          ms\n        </span>\n      ) : (\n        ''\n      )}\n    </span>\n  );\n\n  // HEADERS TAB\n\n  const headerName = (\n    <span>\n      Headers{' '}\n      <b>\n        <span className=\"ml-2 text-active\">[{_.size(_.get(response, 'headers') || {})}]</span>\n      </b>\n    </span>\n  );\n\n  const menuElem = (\n    <Menu pointing secondary>\n      <Menu.Item name=\"body\" active={activeResultTab === 'body'} onClick={handleItemClick}>\n        {bodyName}\n      </Menu.Item>\n\n      <Menu.Item name=\"headers\" active={activeResultTab === 'headers'} onClick={handleItemClick}>\n        {headerName}\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <div className={`ScenarioOutput ${className}`}>\n      {menuElem}\n      {contentElem}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`http-output-${id}`),\n}))(observer(ScenarioOutput));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport { safeStringify } from '@platform/utils/json';\n\nimport HttpBodyViewer from '../../HttpBodyViewer';\nimport CodeEditor from '../../CodeEditor';\nimport Highlight from '../../Highlight';\nimport InputResultList from '../../InputResultList';\n\nconst HttpOutput = props => {\n  const { id, ui, updateUi, className, result = {}, tabWhitelist, noTypeSelector } = props;\n\n  if (_.isEmpty(result)) {\n    return null;\n  }\n\n  let { activeResultTab = 'body' } = ui;\n  const request = result.input || {};\n  const response = result.output || {};\n  const assertions = _.get(result, 'before.assertions', []).concat(\n    _.get(result, 'after.assertions', [])\n  );\n  const logs = result.logs || [];\n\n  if (tabWhitelist && !_.includes(tabWhitelist, activeResultTab)) {\n    activeResultTab = 'body';\n  }\n\n  const handleItemClick = (e, { name }) => {\n    updateUi('set', ['activeResultTab'], name);\n  };\n\n  const responseContentType = response.headers ? response.headers['Content-Type'] : '';\n\n  // BUILD THE TAB CONTENT\n\n  let contentElem;\n  switch (activeResultTab) {\n    case 'body':\n      contentElem = (\n        <HttpBodyViewer\n          name={`${id}-body`}\n          contentType={responseContentType}\n          value={safeStringify(_.get(response, 'body', ''))}\n          uiCache={ui.body}\n          uiCacheScope={['body']}\n          updateUiCache={updateUi}\n          noTypeSelector={noTypeSelector}\n        />\n      );\n      break;\n    case 'headers':\n      contentElem = <InputResultList fields={_.get(response, 'headers')} sort />;\n      break;\n    case 'request':\n      const headerLines = _.map(request.headers || {}, (value, name) => `${name}: ${value}`).join(\n        '\\n'\n      );\n      const requestString = `${(request.method || 'get').toUpperCase()} ${request.url}\n\nHeaders:\n  ${_.isEmpty(headerLines) ? '{}' : headerLines}\n\nBody:\n  ${safeStringify(_.get(request, 'body') || 'undefined')}\n  `;\n      contentElem = (\n        <div className=\"p-3\">\n          <div className=\"c-muted mb-6\">\n            The http request as it was sent, after all transformations, scripts, and variable\n            replacements were run.\n          </div>\n\n          <CodeEditor\n            name=\"final-request\"\n            value={requestString}\n            autogrow\n            maxLines={50}\n            noFill\n            readOnly\n            lint={false}\n          />\n        </div>\n      );\n      break;\n    case 'tests':\n      if (_.isEmpty(assertions)) {\n        contentElem = (\n          <div className=\"c-muted\">\n            {`No tests. Use the tests tab above to add assertions. Use the\n            \"tests\" object in scripts for added flexibility.`}\n          </div>\n        );\n      } else {\n        contentElem = (\n          <div>\n            {assertions.map((a, i) => {\n              let assertionClass;\n              let icon = 'circle';\n              if (a.pass) {\n                assertionClass = 'passed';\n                icon = 'check';\n              } else if (a) {\n                assertionClass = 'failed';\n                icon = 'remove';\n              }\n\n              let expectedElem;\n              if (typeof a.expected === 'object') {\n                expectedElem = '[schema object not shown for now]';\n              } else {\n                expectedElem = a.expected;\n              }\n\n              return (\n                <div key={i} className={cn('AssertionResult flex items-center', assertionClass)}>\n                  <div className=\"AssertionResult-icon\">\n                    <Icon name={icon} />\n                  </div>\n                  <div className=\"AssertionResult-content flex-1\">\n                    <div>\n                      {a.target} <b className=\"ml-3 mr-3\">[{a.op}]</b> {expectedElem}\n                    </div>\n                    {a.msg ? <div className=\"AssertionResult-message\">{a.msg}</div> : null}\n                    {a.details ? <div className=\"AssertionResult-message\">{a.details}</div> : null}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        );\n      }\n\n      break;\n    case 'capture':\n      contentElem = (\n        <div>\n          <div className=\"p-3\">\n            <div className=\"c-muted mb-6\">\n              $.ctx <i>after</i> step:\n            </div>\n\n            <Highlight mode=\"json\" immediate>\n              {_.get(result, 'ctx', '{}')}\n            </Highlight>\n          </div>\n\n          <div className=\"pt-3 pl-3 pr-3\">\n            <div className=\"c-muted mb-6\">\n              $$.env <i>after</i> step:\n            </div>\n\n            <Highlight mode=\"json\" immediate>\n              {_.get(result, 'env', '{}')}\n            </Highlight>\n          </div>\n        </div>\n      );\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  // BUILD THE TABS\n\n  // BODY TAB\n\n  const status = String(_.get(response, 'status') || 'na');\n  const bodyChar = status.charAt(0);\n  let bodyClass = 'text-active';\n  if (bodyChar === '2') {\n    bodyClass = 'c-positive';\n  } else if (_.includes(['4', '5'], bodyChar)) {\n    bodyClass = 'c-negative';\n  }\n  const bodyName = (\n    <span>\n      Body <span className={cn('ml-3', bodyClass)}>[{status}]</span>{' '}\n      {response.time ? (\n        <span className=\"c-muted ml-3\">\n          {response.time}\n          ms\n        </span>\n      ) : (\n        ''\n      )}\n    </span>\n  );\n\n  // HEADERS TAB\n\n  const headerName = (\n    <span>\n      Headers{' '}\n      <b>\n        <span className=\"ml-2 text-active\">[{_.size(_.get(response, 'headers') || {})}]</span>\n      </b>\n    </span>\n  );\n\n  // INPUT TAB\n\n  const requestName = <span>Original Request</span>;\n\n  // TESTS TAB\n\n  let passElem;\n  if (result.passCount > 0) {\n    passElem = (\n      <span className=\"c-positive ml-2\">\n        <Icon fitted name=\"check\" /> {result.passCount}\n      </span>\n    );\n  }\n  let failedElem;\n  if (result.failCount > 0) {\n    failedElem = (\n      <span className=\"c-negative ml-2\">\n        <Icon fitted name=\"remove\" /> {result.failCount}\n      </span>\n    );\n  }\n  const testName = (\n    <span>\n      Tests{' '}\n      <b>\n        {passElem} {failedElem}\n      </b>\n    </span>\n  );\n  const testTitleElem = (\n    <Menu.Item name=\"tests\" active={activeResultTab === 'tests'} onClick={handleItemClick}>\n      {testName}\n    </Menu.Item>\n  );\n\n  // CAPTURE TAB\n\n  let captureName = 'Capture';\n\n  if (tabWhitelist && !_.includes(tabWhitelist, activeResultTab)) {\n    activeResultTab = 'body';\n  }\n\n  const menuElem = (\n    <Menu attached=\"top\" tabular>\n      {!tabWhitelist || _.includes(tabWhitelist, 'body') ? (\n        <Menu.Item name=\"body\" active={activeResultTab === 'body'} onClick={handleItemClick}>\n          {bodyName}\n        </Menu.Item>\n      ) : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'headers') ? (\n        <Menu.Item name=\"headers\" active={activeResultTab === 'headers'} onClick={handleItemClick}>\n          {headerName}\n        </Menu.Item>\n      ) : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'tests') ? testTitleElem : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'capture') ? (\n        <Menu.Item name=\"capture\" active={activeResultTab === 'capture'} onClick={handleItemClick}>\n          {captureName}\n        </Menu.Item>\n      ) : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'request') ? (\n        <Menu.Item name=\"request\" active={activeResultTab === 'request'} onClick={handleItemClick}>\n          {requestName}\n        </Menu.Item>\n      ) : null}\n    </Menu>\n  );\n\n  return (\n    <div id=\"tutorial-http-output\" className={cn('HttpOutput', className)}>\n      {menuElem}\n\n      <Segment attached=\"bottom\">{contentElem}</Segment>\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`http-output-${id}`),\n}))(observer(HttpOutput));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport Highlight from '../../Highlight';\n\nconst ScriptOutput = props => {\n  const { ui, updateUi, className = '', result = {}, tabWhitelist } = props;\n\n  if (_.isEmpty(result)) {\n    return null;\n  }\n\n  let { activeResultTab = 'tests' } = ui;\n  const assertions = _.get(result, 'before.assertions', []).concat(\n    _.get(result, 'after.assertions', [])\n  );\n\n  const handleItemClick = (e, { name }) => {\n    updateUi('set', ['activeResultTab'], name);\n  };\n\n  // BUILD THE TAB CONTENT\n\n  let contentElem;\n  switch (activeResultTab) {\n    case 'tests':\n      if (_.isEmpty(assertions)) {\n        contentElem = (\n          <div className=\"c-muted\">\n            No tests. Use the \"tests\" object in your script to add test assertions.\n          </div>\n        );\n      } else {\n        contentElem = (\n          <div>\n            {assertions.map((a, i) => {\n              let assertionClass;\n              let icon = 'circle';\n              if (a.pass) {\n                assertionClass = 'passed';\n                icon = 'check';\n              } else if (a) {\n                assertionClass = 'failed';\n                icon = 'remove';\n              }\n\n              let expectedElem;\n              if (typeof a.expected === 'object') {\n                expectedElem = '[schema object not shown for now]';\n              } else {\n                expectedElem = a.expected;\n              }\n\n              return (\n                <div key={i} className={cn('AssertionResult flex items-center', assertionClass)}>\n                  <div className=\"AssertionResult-icon\">\n                    <Icon name={icon} />\n                  </div>\n                  <div className=\"AssertionResult-content flex-1\">\n                    <div>\n                      {a.target} <b className=\"ml-3 mr-3\">[{a.op}]</b> {expectedElem}\n                    </div>\n                    {a.msg ? <div className=\"AssertionResult-message\">{a.msg}</div> : null}\n                    {a.details ? <div className=\"AssertionResult-message\">{a.details}</div> : null}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        );\n      }\n\n      break;\n    case 'capture':\n      contentElem = (\n        <div>\n          <div className=\"p-3\">\n            <div className=\"c-muted mb-6\">\n              $.ctx <i>after</i> step:\n            </div>\n\n            <Highlight mode=\"json\" immediate>\n              {_.get(result, 'ctx', '{}')}\n            </Highlight>\n          </div>\n\n          <div className=\"pt-3 pl-3 pr-3\">\n            <div className=\"c-muted mb-6\">\n              $$.env <i>after</i> step:\n            </div>\n\n            <Highlight mode=\"json\" immediate>\n              {_.get(result, 'env', '{}')}\n            </Highlight>\n          </div>\n        </div>\n      );\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  // BUILD THE TABS\n\n  // TESTS TAB\n\n  let passElem;\n  if (result.passCount > 0) {\n    passElem = (\n      <span className=\"c-positive ml-2\">\n        <Icon fitted name=\"check\" /> {result.passCount}\n      </span>\n    );\n  }\n  let failedElem;\n  if (result.failCount > 0) {\n    failedElem = (\n      <span className=\"c-negative ml-2\">\n        <Icon fitted name=\"remove\" /> {result.failCount}\n      </span>\n    );\n  }\n  const testName = (\n    <span>\n      Tests{' '}\n      <b>\n        {passElem} {failedElem}\n      </b>\n    </span>\n  );\n  const testTitleElem = (\n    <Menu.Item name=\"tests\" active={activeResultTab === 'tests'} onClick={handleItemClick}>\n      {testName}\n    </Menu.Item>\n  );\n\n  // CAPTURE TAB\n\n  let captureName = 'Capture';\n  // if (!_.isEqual(beforeState, afterState)) {\n  //   captureName = (\n  //     <span>\n  //       Capture <b><span className='ml-2 text-active'><i className='fa fa-check' /></span></b>\n  //     </span>\n  //   );\n  // }\n\n  if (tabWhitelist && !_.includes(tabWhitelist, activeResultTab)) {\n    activeResultTab = 'body';\n  }\n\n  const menuElem = (\n    <Menu attached=\"top\" tabular>\n      {!tabWhitelist || _.includes(tabWhitelist, 'tests') ? testTitleElem : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'capture') ? (\n        <Menu.Item name=\"capture\" active={activeResultTab === 'capture'} onClick={handleItemClick}>\n          {captureName}\n        </Menu.Item>\n      ) : null}\n    </Menu>\n  );\n\n  return (\n    <div id=\"tutorial-script-output\" className={cn('ScriptOutput', className)}>\n      {menuElem}\n\n      <Segment attached=\"bottom\">{contentElem}</Segment>\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`script-output-${id}`),\n}))(observer(ScriptOutput));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { Accordion, Icon } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nclass AccordionWrapper extends React.Component {\n  static propTypes = {\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    panels: PropTypes.array,\n    className: PropTypes.string,\n    defaultOpen: PropTypes.bool,\n    defaultActiveIndex: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.arrayOf(PropTypes.number),\n    ]),\n  };\n\n  constructor(props) {\n    super(props);\n\n    if (!_.isNil(props.defaultActiveIndex)) {\n      props.updateUi('set', 'panels', _.map([].concat(props.defaultActiveIndex), this.buildPanels));\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextProps.id !== this.props.id) {\n      const { defaultActiveIndex = [], ui, updateUi } = nextProps;\n\n      if (_.isEmpty(ui.panels)) {\n        updateUi('set', 'panels', _.map([].concat(defaultActiveIndex), this.buildPanels));\n      }\n    }\n  }\n\n  buildPanels = (key, panel) => {\n    const { exclusive, ui } = this.props;\n    let panels = _.cloneDeep(ui.panels) || {};\n    const isActive = this.isPanelActive(key, panel);\n\n    if (!exclusive) {\n      panels[key] = !isActive;\n    } else {\n      panels = {\n        [key]: !isActive,\n      };\n    }\n\n    return panels;\n  };\n\n  togglePanel = (key, panel) => {\n    const { updateUi } = this.props;\n\n    updateUi('set', 'panels', this.buildPanels(key, panel));\n  };\n\n  isPanelActive = (key, panel = {}) => {\n    const { ui } = this.props;\n    const { panels = {} } = ui;\n    const { defaultOpen } = panel;\n\n    return _.get(panels, key) ? true : _.has(panels, key) ? false : defaultOpen;\n  };\n\n  renderPanel = (panel, index) => {\n    let title;\n    let content;\n    const key = panel.id || index;\n    const isActive = this.isPanelActive(key, panel);\n\n    if (panel.title) {\n      title = (\n        <Accordion.Title\n          key={`${key}-title`}\n          active={isActive}\n          onClick={\n            panel.onClick ? () => panel.onClick(key, panel) : () => this.togglePanel(key, panel)\n          }\n        >\n          {_.isFunction(panel.title) ? (\n            panel.title()\n          ) : (\n            <div className=\"flex items-center\">\n              <Icon name=\"dropdown\" />\n\n              <div className={panel.icon ? '' : 'flex-1'}>{panel.title}</div>\n\n              {panel.icon ? (\n                <div className=\"ml-3\">\n                  <Icon {...panel.icon} />\n                </div>\n              ) : null}\n            </div>\n          )}\n        </Accordion.Title>\n      );\n    }\n\n    if (panel.content && isActive) {\n      content = (\n        <Accordion.Content key={`${key}-content`} active={isActive}>\n          {_.isFunction(panel.content) ? panel.content() : panel.content}\n        </Accordion.Content>\n      );\n    }\n\n    return [title, content];\n  };\n\n  render() {\n    const { panels, className, ...otherProps } = this.props;\n\n    // omit any props that don't need to be passed to semantic-ui-react\n    const accordionProps = _.omit(otherProps, [\n      'defaultActiveIndex',\n      'id',\n      'ui',\n      'updateUi',\n      'clearUi',\n    ]);\n\n    return (\n      <Accordion className={cn('AccordionWrapper', className)} {...accordionProps}>\n        {_.map(panels, this.renderPanel)}\n      </Accordion>\n    );\n  }\n}\n\nexport default inject(({ appStore }, { id }) => {\n  return {\n    ...appStore.injectUi(`Accordion-${id}`),\n  };\n})(observer(AccordionWrapper));\n","import React from 'react';\nimport cn from 'classnames';\n\n// import './styles.styl';\n\nconst BarListItem = ({ index, parts = [], loading, withBorder, className }) => {\n  return (\n    <div\n      className={cn('BarListItem flex items-center', className, {\n        'is-loading': loading,\n        'with-border': withBorder,\n      })}\n    >\n      {index ? <div className=\"BarListItem-index\">{index}</div> : null}\n\n      <div className=\"BarListItem-loading fill-space\" />\n\n      {parts.map((part, i) => {\n        const style = {};\n        if (part.bgColor) {\n          style.backgroundColor = part.bgColor;\n          style.color = 'white';\n        }\n\n        return (\n          <div\n            key={i}\n            className={cn('BarListItem-part', part.className, {\n              'd-n': part.hide,\n              'is-padded': part.padded,\n              'with-bg': part.bg,\n              'with-border': part.border,\n              'flex-1': part.fill,\n            })}\n            style={style}\n          >\n            {part.elem()}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default BarListItem;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Icon } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\nimport { stepResultMeta, stepName, stepToken } from '@platform/utils/collections';\n\nimport Accordion from '../../Accordion';\nimport BarListItem from '../../BarListItem';\n\nimport HttpOutput from './http';\n\nfunction flattenSteps(result) {\n  const scenarioSteps = _.get(result, 'input.spec.steps');\n  const outputSteps = _.get(result, 'output.steps');\n\n  if (_.isEmpty(outputSteps) || _.isEmpty(scenarioSteps)) {\n    return [];\n  }\n\n  let steps = [];\n\n  for (const index in scenarioSteps) {\n    const step = scenarioSteps[index];\n    const stepResult = outputSteps[index];\n\n    if (step.type === 'ref') {\n      steps = steps.concat(flattenSteps(stepResult));\n      continue;\n    }\n\n    steps.push({ step, stepResult });\n  }\n\n  return steps;\n}\n\nfunction computePanels(result, mappedScenarioNames) {\n  const steps = flattenSteps(result);\n\n  const panels = [];\n\n  for (const index in steps) {\n    const { step, stepResult } = steps[index];\n\n    const resultData = stepResultMeta({ stepResult });\n\n    panels.push({\n      title: () => (\n        <BarListItem\n          className=\"ScenarioStepList-item\"\n          parts={[\n            {\n              fill: true,\n              bg: true,\n              padded: true,\n              elem: () => {\n                let tokenElem;\n\n                const token = stepToken(step, { maxLength: 4 });\n                if (token && token.name) {\n                  tokenElem = (\n                    <div className={`ScenarioStepList-token ${token.className}`}>{token.name}</div>\n                  );\n                }\n\n                return (\n                  <div className=\"flex items-center ScenarioStepList-name\">\n                    <Icon name=\"dropdown\" />\n                    {tokenElem}\n                    {stepName(step, { skipToken: true, mappedScenarioNames })}\n                  </div>\n                );\n              },\n            },\n            {\n              bg: true,\n              padded: true,\n              className: resultData.className,\n              elem: () => resultData.status,\n            },\n          ]}\n        />\n      ),\n      content: () => <HttpOutput id={`${step.id}-${index}`} result={stepResult} />,\n    });\n  }\n\n  return panels;\n}\n\nfunction RefOutput({ result, mappedScenarioNames }) {\n  const panels = computePanels(result, mappedScenarioNames);\n\n  return (\n    <div>\n      <div className=\"SplitEditor-parsedTitle\">Output Steps</div>\n      <Accordion fluid exclusive={false} panels={panels} />\n    </div>\n  );\n}\n\nexport default inject(({ collectionEditorStore }, { id }) => {\n  return {\n    mappedScenarioNames: collectionEditorStore.getEditor({ id }).mappedNames,\n  };\n})(observer(RefOutput));\n","import React from 'react';\nimport { Message } from 'semantic-ui-react';\n\nimport ScenarioOutput from './scenario';\nimport HttpOutput from './http';\nimport ScriptOutput from './script';\nimport RefOutput from './ref';\n\nfunction Step(props) {\n  const { id, type, result = {} } = props;\n\n  let editorElem;\n  switch (type) {\n    case 'scenario':\n      editorElem = <ScenarioOutput {...props} id={id} result={result} />;\n      break;\n    case 'http':\n      editorElem = <HttpOutput {...props} id={id} result={result} />;\n      break;\n    case 'script':\n      editorElem = <ScriptOutput {...props} id={id} result={result} />;\n      break;\n    case 'ref':\n      editorElem = <RefOutput {...props} id={id} result={result} />;\n      break;\n    default:\n      editorElem = <Message negative>Invalid step type {type}.</Message>;\n  }\n\n  return editorElem;\n}\n\nexport default Step;\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { safeParse } from '@platform/utils/json';\n\nimport Highlight from '../Highlight';\n\nconst ScenarioLog = props => {\n  const { className, log = {} } = props;\n\n  let messages = log.msg || [];\n  if (typeof messages === 'string') {\n    messages = [messages];\n  }\n\n  return (\n    <div className={cn('ScenarioLog flex items-center', className)}>\n      <div className=\"ScenarioLog-meta\">\n        <div className={`c-${log.type} font-bold`}>{log.code ? log.code : log.type}</div>\n        <div className=\"c-muted\">{log.source}</div>\n      </div>\n      <div className=\"flex-1 ScenarioLog-messages\">\n        {_.map(messages, (m, i) => {\n          let elem = m;\n          const message = safeParse(m, m);\n          if (typeof message === 'object') {\n            elem = (\n              <Highlight mode=\"json\" immediate>\n                {message}\n              </Highlight>\n            );\n          }\n\n          return (\n            <div key={i} className=\"ScenarioLog-message\">\n              {elem}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default ScenarioLog;\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment } from 'semantic-ui-react';\nimport _ from 'lodash';\n\nimport ScenarioLog from './log';\n\nconst ScenarioLogs = ({ ui, updateUi, logs = [] }) => {\n  const menuElems = [];\n  const filtered = {\n    fatal: {\n      logs: _.filter(logs, { type: 'fatal' }),\n      className: 'c-error',\n      name: 'Fatal',\n    },\n    error: {\n      logs: _.filter(logs, { type: 'error' }),\n      className: 'c-error',\n      name: 'Error',\n    },\n    warn: {\n      logs: _.filter(logs, { type: 'warn' }),\n      className: 'c-warn',\n      name: 'Warning',\n    },\n    info: {\n      logs: _.filter(logs, { type: 'info' }),\n      className: 'text-active',\n      name: 'Info',\n    },\n  };\n\n  // first one with logs is default active\n  let defaultActive;\n  for (const k in filtered) {\n    const f = filtered[k];\n    if (!_.isEmpty(f.logs)) {\n      defaultActive = k;\n      break;\n    }\n  }\n\n  const active = _.get(ui, 'isActive', defaultActive);\n  _.forEach(filtered, (f, k) => {\n    if (!_.isEmpty(f.logs)) {\n      menuElems.push(\n        <Menu.Item\n          key={k}\n          active={k === active}\n          onClick={() => {\n            updateUi('set', 'isActive', k);\n          }}\n        >\n          <span className=\"mr-3\">{f.name}</span>\n          <b>\n            <span className={f.className}> [{f.logs.length}]</span>\n          </b>\n        </Menu.Item>\n      );\n    }\n  });\n\n  const activeLogs = _.get(filtered, [active, 'logs']);\n  const logElems = _.map(activeLogs, (l, i) => {\n    return <ScenarioLog key={i} log={l} />;\n  });\n\n  return [\n    <Menu key=\"1\" id=\"tutorial-scenario-input\" attached=\"top\" tabular size=\"small\">\n      {menuElems}\n    </Menu>,\n\n    <Segment key=\"2\" attached=\"bottom\">\n      {logElems}\n    </Segment>,\n  ];\n};\n\nexport default inject(({ appStore }, { id }) => {\n  return {\n    ...appStore.injectUi(`${id}:ScenarioLogs`),\n  };\n})(observer(ScenarioLogs));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Loader } from 'semantic-ui-react';\n\nimport StepBasics from './step_basics';\n\nimport EditorContentSection from '../EditorContentSection';\nimport StepInput from '../ScenarioEditor/input';\nimport StepOutput from '../ScenarioEditor/output';\nimport ScenarioLogs from '../ScenarioLogs';\n\nfunction Basics(props) {\n  const { editor } = props;\n  const { currentStep = {} } = editor;\n\n  return <StepBasics step={currentStep.data} {...props} />;\n}\nconst InjectedBasics = inject(({ collectionEditorStore }, { editorId }) => {\n  return {\n    editor: collectionEditorStore.getEditor({ id: editorId }),\n  };\n})(observer(Basics));\n\nfunction Input(props) {\n  const { editor = {}, readOnly, autocompleteScopes, inputProps = {}, handleUpdate } = props;\n\n  const { currentStep = {} } = editor;\n\n  return (\n    <StepInput\n      editorId={editor.id}\n      editor={editor}\n      collection={editor.parsed}\n      collectionId={editor.id}\n      scenarioId={editor.currentScenarioId}\n      readOnly={readOnly}\n      step={currentStep.data}\n      stepIndex={currentStep.index}\n      autocompleteScopes={autocompleteScopes}\n      handleUpdate={(t, p, v) => {\n        if (!_.isEmpty(editor)) {\n          editor.updateCurrentParsed(t, p, v);\n\n          if (handleUpdate) {\n            handleUpdate(t, p, v);\n          }\n        }\n      }}\n      {...inputProps}\n    />\n  );\n}\nconst InjectedInput = inject(({ collectionEditorStore }, { editorId }) => {\n  return {\n    collectionEditorStore,\n    editor: collectionEditorStore.getEditor({ id: editorId }),\n  };\n})(observer(Input));\n\nfunction Debug({ editor = {} }) {\n  const { currentResult, currentRunning } = editor;\n\n  const logs = _.get(currentResult, 'data.logs');\n  if (currentRunning || _.isEmpty(logs)) {\n    return null;\n  }\n\n  return (\n    <EditorContentSection id=\"ScenarioStep:result\" title=\"Debug\">\n      <ScenarioLogs id={currentResult.id} logs={logs} />\n    </EditorContentSection>\n  );\n}\nconst InjectedDebug = inject(({ collectionEditorStore }, { editorId }) => ({\n  editor: collectionEditorStore.getEditor({ id: editorId }),\n}))(observer(Debug));\n\nfunction Output({ editor = {}, standalone, outputProps = {} }) {\n  const { currentResult, currentRunning } = editor;\n\n  let elem;\n  if (currentRunning) {\n    elem = (\n      <div className=\"p-6 text-center\">\n        <Loader indeterminate active inline>\n          Running\n        </Loader>\n      </div>\n    );\n  } else if (currentResult) {\n    elem = (\n      <StepOutput\n        id={currentResult.id}\n        type={currentResult.type}\n        result={currentResult.data}\n        {...outputProps}\n      />\n    );\n  } else if (standalone) {\n    return null;\n  } else {\n    elem = (\n      <h4 className=\"c-muted font-bold text-center\">click the run step button to view output</h4>\n    );\n  }\n\n  return <div className=\"ScenarioOutput mt-6\">{elem}</div>;\n}\n\nconst InjectedOutput = inject(({ collectionEditorStore }, { editorId }) => ({\n  editor: collectionEditorStore.getEditor({ id: editorId }),\n}))(observer(Output));\n\nconst ScenarioStepEditor = props => {\n  const { editorId, readOnly, autocompleteScopes, inputProps, outputProps, handleUpdate } = props;\n\n  const standalone = _.get(inputProps, 'standalone');\n  if (standalone) {\n    return (\n      <div className=\"ScenarioStep\">\n        <InjectedInput\n          editorId={editorId}\n          readOnly={readOnly}\n          autocompleteScopes={autocompleteScopes}\n          inputProps={inputProps}\n          handleUpdate={handleUpdate}\n          standalone\n        />\n\n        <InjectedOutput\n          editorId={editorId}\n          outputProps={outputProps}\n          handleUpdate={handleUpdate}\n          standalone\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"ScenarioStep\">\n      <EditorContentSection id=\"ScenarioStep:basics\">\n        <InjectedBasics {...props} />\n      </EditorContentSection>\n\n      <EditorContentSection id=\"ScenarioStep:input\" title=\"Input\">\n        <InjectedInput\n          editorId={editorId}\n          readOnly={readOnly}\n          autocompleteScopes={autocompleteScopes}\n          inputProps={inputProps}\n          handleUpdate={handleUpdate}\n        />\n      </EditorContentSection>\n\n      <InjectedDebug editorId={editorId} />\n\n      <EditorContentSection id=\"ScenarioStep:output\" title=\"Output\" canToggle={false}>\n        <InjectedOutput editorId={editorId} outputProps={outputProps} handleUpdate={handleUpdate} />\n      </EditorContentSection>\n    </div>\n  );\n};\n\nexport default ScenarioStepEditor;\n","import _ from 'lodash';\nimport { observable } from 'mobx';\nimport { safeStringify } from '@platform/utils/json';\n\nexport const initCollectionEditor = (props, { force } = {}) => {\n  const { id, data } = props;\n\n  const input = data || {\n    method: 'get',\n    url: '',\n  };\n\n  const entity = {\n    _id: id,\n    id,\n    data: {\n      scenarios: {\n        dummy: {\n          steps: [\n            {\n              id,\n              type: 'http',\n              input,\n            },\n          ],\n        },\n      },\n    },\n  };\n\n  const editor = getCollectionEditor(props);\n  // only init the editor if its new or the original data has changed\n  if (editor.id) {\n    const entityString = safeStringify(entity.data);\n    if (editor.original === entityString) {\n      return;\n    }\n  }\n\n  props.collectionEditorStore.initEditor(\n    {\n      entityType: 'collections',\n      editPath: `#/scenarios/dummy/steps/0`,\n      embedded: true,\n      entity,\n      stepPathParams: observable.map({ 'dummy-0': _.get(input, 'stepPathParams', {}) }),\n    },\n    { force: true }\n  );\n};\n\nexport const getCollectionEditor = props => {\n  const { id, collectionEditorStore } = props;\n\n  return (\n    collectionEditorStore.getEditor({\n      id,\n    }) || {}\n  );\n};\n\nexport const stopStep = props => {\n  const editor = getCollectionEditor(props);\n  if (editor && editor.stopStep) {\n    editor.stopStep();\n  }\n};\n\nexport const runStep = props => {\n  const editor = getCollectionEditor(props);\n  if (editor && editor.runStep) {\n    editor.runStep();\n  }\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Button } from 'semantic-ui-react';\nimport ScenarioStep from '@platform/components/ScenarioEditor/step';\n\nimport { initCollectionEditor, getCollectionEditor, stopStep, runStep } from './common';\n\nclass HttpBlock extends React.Component {\n  componentWillMount() {\n    initCollectionEditor(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // init if its the first time, or we're re-painting for the current id\n    // the repaint happens because dereference process is delayed\n    if (!getCollectionEditor(nextProps).id || nextProps.id === this.props.id) {\n      initCollectionEditor(nextProps);\n    }\n  }\n\n  render = () => {\n    const { id, WrapperFactory, config = {}, block, data = {} } = this.props;\n\n    const currentRunning = !_.isEmpty(getCollectionEditor(this.props).currentRunning);\n\n    const codegen = _.get(block, ['config', 'codegen']);\n\n    const contentElem = (\n      <ScenarioStep\n        editorId={id}\n        inputProps={{\n          type: 'http',\n          standalone: true,\n          config: config,\n          tabWhitelist: _.compact([\n            'settings',\n            !_.isEmpty(data.headers) && 'headers',\n            !_.isEmpty(data.query) && 'query',\n            !_.isEmpty(data.body) && 'body',\n            !_.isEmpty(data.auth) && 'auth',\n            'code-generation',\n          ]),\n          endpoints: data.endpoints,\n          headerElems: [\n            {\n              render: () => {\n                let buttonProps = {};\n\n                if (currentRunning) {\n                  buttonProps = {\n                    icon: 'stop',\n                    content: 'Stop',\n                    onClick: () => {\n                      stopStep(this.props);\n                    },\n                    negative: true,\n                  };\n                } else {\n                  buttonProps = {\n                    icon: 'play',\n                    content: 'Send',\n                    onClick: () => {\n                      runStep(this.props);\n                    },\n                    secondary: true,\n                  };\n                }\n\n                return <Button {...buttonProps} />;\n              },\n            },\n          ],\n          readOnly: true,\n        }}\n        outputProps={{\n          tabWhitelist: ['body', 'headers', 'request'],\n        }}\n        codegen={codegen}\n      />\n    );\n\n    return <WrapperFactory {...this.props} contentElem={contentElem} />;\n  };\n}\n\nexport default inject(({ collectionEditorStore }) => {\n  return {\n    collectionEditorStore,\n  };\n})(observer(HttpBlock));\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport _ from 'lodash';\n\nimport { Icon } from 'semantic-ui-react';\nimport JsonPathCacheParentContainer from '@platform/components/JsonPathCacheParentContainer';\nimport Accordion from '@platform/components/Accordion';\nimport shortid from '@platform/utils/shortid';\n\nimport BlockList from '../BlockList/viewer';\n\nclass AccordionBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { accordionId: shortid() };\n  }\n\n  renderHeader = () => {\n    const { header = {} } = this.props;\n    const { token, title, subtitle } = header;\n\n    if (!_.isEmpty(token) || !_.isEmpty(title) || !_.isEmpty(subtitle)) {\n      return (\n        <div className=\"pl-2 pr-2 pb-3\">\n          {title ? <div className=\"HubBlock-header-name\">{title}</div> : null}\n          <div className=\"HubBlock-header-title flex items-center\">\n            {subtitle ? <div className=\"HubBlock-header-subtitle\">{subtitle}</div> : null}\n            {token ? <div className=\"HubBlock-header-token  ml-a\">{token}</div> : null}\n          </div>\n        </div>\n      );\n    }\n  };\n\n  renderPanels = () => {\n    const {\n      basePath,\n      blockPath,\n      cache,\n      childCacheIds,\n      data = {},\n      editor,\n      relativePath,\n      updateCache,\n      slugger,\n    } = this.props;\n\n    const { children = [] } = data;\n\n    if (!childCacheIds) {\n      return null;\n    }\n\n    const panels = _.map(children, (child, index) => {\n      return {\n        key: index,\n        defaultOpen: _.get(child, 'config.defaultOpen'),\n        title: () => (\n          <div className=\"flex items-center\">\n            <Icon name=\"dropdown\" />\n            <div>{child.title}</div>\n          </div>\n        ),\n        content: _.isEmpty(child.blocks) ? (\n          <div className=\"p-6\">No existing blocks</div>\n        ) : (\n          <BlockList\n            store={editor}\n            blocks={child.blocks}\n            parentPath={_.concat(blockPath, ['data', 'children', index])}\n            basePath={basePath}\n            relativePath={relativePath}\n            cache={cache}\n            updateCache={updateCache}\n            blockProps={{ isNested: true }}\n            slugger={slugger}\n          />\n        ),\n      };\n    });\n\n    return panels;\n  };\n\n  render() {\n    const { WrapperFactory } = this.props;\n    const { accordionId } = this.state;\n\n    const contentElem = [];\n    contentElem.push(\n      <Accordion\n        key={`Accordion-Viewer-${accordionId}`}\n        id={`Accordion-Viewer-${accordionId}`}\n        fluid\n        exclusive={false}\n        panels={this.renderPanels()}\n      />\n    );\n\n    return (\n      <WrapperFactory {...this.props} headerElem={this.renderHeader()} contentElem={contentElem} />\n    );\n  }\n}\n\nAccordionBlock.displayName = 'HubAccordionBlock';\n\nexport default JsonPathCacheParentContainer({\n  cacheKeyProp: 'cacheKey',\n  basePathProp: 'blockPath',\n  path: ['data', 'children'],\n  childrenProp: 'data.children',\n})(observer(AccordionBlock));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { Message, Icon, Loader } from 'semantic-ui-react';\n\nimport JsonPathCacheContainer from '@platform/components/JsonPathCacheContainer';\nimport ErrorMessage from '@platform/components/ErrorMessage';\n\nimport { registerLogger } from '@platform/utils/logging';\nimport { stringToColor } from '@platform/utils/colors';\nimport { replaceVariables } from '@platform/utils/variables';\n\nimport barList from '../BlockBarList/viewer';\nimport callout from '../BlockCallout/viewer';\nimport cardList from '../BlockCardList/viewer';\nimport code from '../BlockCode/viewer';\nimport hero from '../BlockHero/viewer';\nimport html from '../BlockHtml/viewer';\nimport image from '../BlockImage/viewer';\nimport jsonSchema from '../BlockJsonSchema/viewer';\nimport ref from '../BlockRef/viewer';\nimport tabs from '../BlockTabs/viewer';\nimport container from '../BlockContainer/viewer';\nimport text from '../BlockText/viewer';\nimport http from '../BlockHttp/viewer';\nimport accordion from '../BlockAccordion/viewer';\nimport { buildBlockClassNames } from '../../utils';\nimport { blockConfig } from '../../utils/viewer';\n\nconst log = registerLogger('components', 'HubBlock');\n\nconst BlockMap = {\n  barList,\n  callout,\n  cardList,\n  code,\n  hero,\n  html,\n  image,\n  jsonSchema,\n  ref,\n  tabs,\n  container,\n  text,\n  http,\n  accordion,\n};\n\nexport const HubBlockHeader = ({ className, header = {} }) => {\n  const { token, title, subtitle } = header;\n\n  const hasToken = !_.isEmpty(token);\n  const hasTitle = !_.isEmpty(title);\n  const hasSubtitle = !_.isEmpty(subtitle);\n\n  if (!hasToken && !hasTitle && !hasSubtitle) return null;\n\n  let titleElem;\n  if (hasTitle || hasToken) {\n    titleElem = (\n      <div className=\"HubBlock-header-title flex items-center\">\n        {hasTitle && <div className=\"HubBlock-header-name\">{title}</div>}\n        {hasToken && (\n          <div className=\"HubBlock-header-token ml-3\" style={{ color: stringToColor(token) }}>\n            {token}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn('HubBlock-header', className)}>\n      {titleElem}\n      {hasSubtitle && <div className=\"HubBlock-header-subtitle\">{subtitle}</div>}\n    </div>\n  );\n};\n\nconst HubBlockContent = props => {\n  const {\n    className,\n    headerElem,\n    contentClassName,\n    contentProps = {},\n    contentElem,\n    block = {},\n    slugger,\n  } = props;\n\n  let header;\n  // allow for blocks to override the header, can pass null to completely hide header\n  if (headerElem) {\n    header = headerElem;\n  } else if (!_.isEmpty(block.header) && _.isUndefined(headerElem)) {\n    header = <HubBlockHeader header={block.header} />;\n  }\n\n  let anchorElem = null;\n  const anchor = _.toLower(_.get(block, 'header.anchor'));\n\n  if (anchor) {\n    const slug = slugger.slug(anchor);\n\n    anchorElem = (\n      <a href={`#${slug}`} aria-hidden=\"true\" className=\"block-anchor\" name={slug} id={slug}>\n        <Icon name=\"linkify\" />\n      </a>\n    );\n  }\n\n  return (\n    <div className={cn('HubBlock-inner flex-1 w-full', className)}>\n      {anchorElem}\n      {header}\n\n      {contentElem && (\n        <div\n          className={cn('HubBlock-content', contentClassName, { 'has-anchor': !!anchorElem })}\n          {...contentProps}\n        >\n          {contentElem}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst HubBlockViewer = props => {\n  const {\n    id,\n    blockIndex,\n    blockPath,\n    block = {},\n    blockDereferenced = {},\n    className,\n    isNested,\n    isSolo,\n    isLast,\n    basePath,\n    relativePath,\n    slugger,\n    editor,\n  } = props;\n\n  log.debug('Render', {\n    id,\n    blockIndex,\n    blockPath,\n    basePath,\n    relativePath,\n    block,\n    blockDereferenced,\n  });\n\n  let contentElem;\n\n  const $ref = _.get(block, 'data.$ref');\n  const error = _.get(block, 'data.__error');\n  const RenderedBlock = BlockMap[block.type];\n\n  // TODO ADD page/subpage config so there can be a trickling effect for settings\n  let config = _.cloneDeep(_.get(editor.config, block.type, {}));\n\n  const elemConfig = _.get(block, 'config', {});\n\n  _.merge(config, elemConfig);\n\n  let isPadded;\n\n  if (error) {\n    contentElem = (\n      <div className=\"HubBlock-inner flex-1 w-full\">\n        <ErrorMessage error={error} />\n      </div>\n    );\n    isPadded = true;\n  } else if ($ref) {\n    contentElem = (\n      <div className=\"HubBlock-inner flex-1 w-full relative h-32\">\n        <div className=\"absolute pin bg-lighten-500 z-20 opacity-1\">\n          <Loader active />\n        </div>\n      </div>\n    );\n    isPadded = true;\n  } else if (RenderedBlock) {\n    contentElem = (\n      <RenderedBlock\n        {...props}\n        basePath={basePath}\n        relativePath={relativePath}\n        block={block}\n        blockPath={blockPath}\n        header={block.header}\n        config={config}\n        theme={block.theme}\n        data={blockDereferenced.data || block.data}\n        WrapperFactory={HubBlockContent}\n        dereferencedBlock={blockDereferenced}\n        slugger={slugger}\n      />\n    );\n  } else {\n    contentElem = (\n      <div className=\"HubBlock-inner flex-1 w-full\">\n        {block.type} viewer has not been implemented.\n      </div>\n    );\n    isPadded = true;\n  }\n\n  const classNames = buildBlockClassNames({\n    block,\n    config: blockConfig[block.type],\n    classNames: [`HubBlock HubBlock--${block.type} flex is-viewing`, className],\n    isNested,\n    isSolo,\n    isLast,\n  });\n\n  return <div className={cn(classNames, { 'is-padded': isPadded })}>{contentElem}</div>;\n};\n\nexport default JsonPathCacheContainer({\n  cacheKeyProp: 'editor.id',\n  pathProp: 'blockPath',\n})(HubBlockViewer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * This will listen to the scroll event and pass details to the child.\n */\nclass ScrollWraper extends React.Component {\n  static propTypes = {\n    targetId: PropTypes.string,\n    onResize: PropTypes.bool, // also trigger on resize\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      scroll: undefined,\n    };\n  }\n\n  handleScroll = evt => {\n    this.setState({ scroll: evt });\n  };\n\n  componentDidMount = () => {\n    const { targetId, onResize } = this.props;\n    const target = targetId ? document.getElementById(targetId) : window;\n    target && target.addEventListener('scroll', this.handleScroll);\n    target && onResize && target.addEventListener('resize', this.handleScroll);\n  };\n\n  componentWillUnmount = () => {\n    const { targetId, onResize } = this.props;\n    const target = targetId ? document.getElementById(targetId) : window;\n    target && target.removeEventListener('scroll', this.handleScroll);\n    target && onResize && target.removeEventListener('resize', this.handleScroll);\n  };\n\n  render() {\n    const { scroll } = this.state;\n\n    return this.props.render({ scroll });\n  }\n}\n\nexport default ScrollWraper;\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { Icon, Popup } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nimport { Link } from '@platform/utils/router';\nimport { isExternalLink } from '@platform/utils/url';\nimport { stringToColor } from '@platform/utils/colors';\n\nconst buildMetaElems = meta => {\n  const metaElems = [];\n\n  if (meta) {\n    for (const i in meta) {\n      const m = meta[i];\n\n      if (m.icon) {\n        metaElems.push(\n          <div key={`m-${m.id || i}`} className={cn('TreeList-metaItem', m.className || 'c-muted')}>\n            <Icon name={m.icon} />\n          </div>\n        );\n      } else {\n        metaElems.push(\n          <div key={`m-${m.id || i}`} className={cn('TreeList-metaItem', m.className || 'c-muted')}>\n            {m.name}\n          </div>\n        );\n      }\n    }\n  }\n\n  return metaElems;\n};\n\nconst buildActionElems = actions => {\n  return _.map(actions, (action = {}, i) => {\n    const { id, href, className, type, icon, loading, onClick, tip } = action;\n\n    let elem;\n\n    const classNames = cn('TreeList-action', className || 'c-muted', ' flex items-center', {\n      [`is-${type}`]: type,\n      'is-loading': loading,\n    });\n\n    if (href) {\n      elem = (\n        <Link key={`a-${id || i}`} className={classNames} to={href}>\n          <div>\n            <Icon name={icon} loading={loading} className=\"TreeList-actionIcon\" />\n          </div>\n        </Link>\n      );\n    } else {\n      elem = (\n        <div key={`a-${id || i}`} className={classNames} onClick={onClick}>\n          <div>\n            <Icon name={icon} loading={loading} className=\"TreeList-actionIcon\" />\n          </div>\n        </div>\n      );\n    }\n\n    if (tip) {\n      elem = <Popup key={`a-${id}`} trigger={elem} content={tip} size=\"tiny\" />;\n    }\n\n    return elem;\n  });\n};\n\nconst Item = ({ item = {}, depth, parentActive, path, currentPath, ItemFactory, isActive }) => {\n  const { name, href, onClick, isMuted, isDivider, meta, actions, icon } = item;\n  const token = item.token || {};\n\n  let contentElem;\n  if (ItemFactory) {\n    contentElem = <ItemFactory index={0} item={item} />;\n  } else {\n    const metaElems = buildMetaElems(meta);\n    const actionElems = buildActionElems(actions);\n    const itemIcon = icon || token.icon;\n\n    let tokenElem;\n\n    if (token.name) {\n      tokenElem = (\n        <div className=\"TreeList-itemToken  flex items-center justify-center\">\n          <div\n            style={{ color: stringToColor(_.toLower(token.name)) }}\n            className={cn(\n              'SortableTree-itemToken-inner',\n              token.className || `token--${token.name}`,\n              'flex items-center'\n            )}\n          >\n            {token.name}\n          </div>\n        </div>\n      );\n    }\n\n    contentElem = (\n      <div className=\"flex\" title={name}>\n        {!_.isEmpty(itemIcon) ? (\n          <div className=\"TreeList-itemIcon flex items-center leading-none\">\n            <Icon name={itemIcon} />\n          </div>\n        ) : null}\n\n        <div className=\"SortableTree-itemName flex-1\">{name}</div>\n\n        {tokenElem}\n\n        {!_.isEmpty(metaElems) ? (\n          <div className=\"TreeList-meta  flex items-center\">{metaElems}</div>\n        ) : null}\n\n        {!_.isEmpty(actionElems) ? (\n          <div className=\"TreeList-actions  flex\">{actionElems}</div>\n        ) : null}\n      </div>\n    );\n  }\n\n  const itemHref = typeof href === 'string' ? href : _.get(href, 'pathname');\n\n  const classNames = cn('TreeList-item hover:text-active', item.className, {\n    'text-active': isActive,\n    'is-active': isActive,\n    'is-muted': isMuted,\n    'is-divider': isDivider,\n    'is-link': isExternalLink(itemHref),\n  });\n\n  if (itemHref) {\n    return (\n      <Link\n        to={href}\n        className={classNames}\n        onClick={e => {\n          // if we're clicking on an action, don't navigate\n          const targetClass = _.get(e, 'target.className');\n          if (_.includes(targetClass, 'TreeList-action')) {\n            e.preventDefault();\n            e.stopPropagation();\n            return false;\n          }\n        }}\n      >\n        {contentElem}\n      </Link>\n    );\n  }\n\n  return (\n    <div\n      className={classNames}\n      onClick={e => {\n        if (onClick) onClick(e);\n      }}\n    >\n      {contentElem}\n    </div>\n  );\n};\n\nconst Folder = props => {\n  const {\n    folder,\n    path = [],\n    currentPath = [],\n    depth,\n    parent = {},\n    parentActive,\n    handleToggleFolder,\n    ui,\n    folderOpenIcon,\n    folderClosedIcon,\n    checkIsActive,\n    checkIsChildActive,\n    ...extra\n  } = props;\n\n  let childActive =\n    folder.childActive ||\n    (parentActive &&\n      _.isEqual(path, currentPath.slice(0, path.length)) &&\n      _.has(currentPath, depth + 1));\n\n  if (!childActive && checkIsChildActive) {\n    childActive = checkIsChildActive(folder);\n  }\n\n  let isActive = folder.isActive;\n  if (!isActive && checkIsActive) {\n    isActive = checkIsActive(folder);\n  }\n\n  let isOpen = isActive || childActive || folder.openByDefault;\n\n  const toggledPath = currentPath.concat(path, 'toggled');\n  if (!folder.noToggle && _.has(ui, toggledPath)) {\n    isOpen = _.get(ui, toggledPath);\n  }\n\n  const metaElems = buildMetaElems(folder.meta);\n  const actionElems = buildActionElems(folder.actions);\n\n  const token = _.get(folder, 'token', {});\n\n  const folderIcon = folder.icon || (isOpen ? folderOpenIcon : folderClosedIcon) || 'folder';\n  const iconOnLeft = folderIcon === 'folder';\n\n  const toggleElem = !folder.noToggle ? (\n    <div\n      className={cn('TreeList-folderToggler ', {\n        'opacity-35': !isOpen,\n        'text-right': !iconOnLeft,\n      })}\n      onClick={e => {\n        e.preventDefault();\n        handleToggleFolder(path, !isOpen);\n        return false;\n      }}\n    >\n      <Icon\n        className={cn(folderIcon, {\n          open: isOpen,\n          'mr-3': iconOnLeft,\n        })}\n      />\n    </div>\n  ) : null;\n\n  let folderInner = (\n    <div className=\"flex items-center\">\n      {iconOnLeft && toggleElem}\n\n      <div\n        className={cn('TreeList-folderName flex-1 truncate font-bold', {\n          'select-none': !folder.noToggle,\n          'mb-3 lg:mb-2 text-grey-dark uppercase tracking-wide text-sm lg:text-xs': folder.noToggle,\n        })}\n      >\n        {folder.name}\n      </div>\n\n      {_.get(token, 'name') ? (\n        <div className=\"TreeList-itemToken\" style={{ color: stringToColor(_.toLower(token.name)) }}>\n          {token.name}\n        </div>\n      ) : null}\n\n      {!_.isEmpty(metaElems) ? (\n        <div className=\"TreeList-meta  flex items-center\">{metaElems}</div>\n      ) : null}\n      {!_.isEmpty(actionElems) ? <div className=\"TreeList-actions  flex\">{actionElems}</div> : null}\n\n      {!iconOnLeft && toggleElem}\n    </div>\n  );\n\n  const classNames = cn('TreeList-folderInner hover:text-active', folder.className, {\n    'has-content': folder.hasContent,\n    'has-children': !_.isEmpty(folder.children),\n    'is-active text-active': isActive,\n  });\n\n  if (folder.hasOwnProperty('href')) {\n    folderInner = (\n      <Link\n        className={classNames}\n        to={folder.href}\n        onClick={e => {\n          const targetClass = _.get(e, 'target.className');\n\n          if (_.includes(targetClass, 'action')) {\n            handleToggleFolder(path, true);\n            e.preventDefault();\n          } else if (isActive) {\n            handleToggleFolder(path, !isOpen);\n          } else if (!_.includes(targetClass, 'icon')) {\n            handleToggleFolder(path, true);\n          }\n        }}\n      >\n        {folderInner}\n      </Link>\n    );\n  } else {\n    folderInner = <div className={classNames}>{folderInner}</div>;\n  }\n\n  // if we can't toggle the parent, don't nest the children which makes it seem like we can\n  let depthClass = depth;\n  if (parent.noToggle) {\n    depthClass = Math.max(depthClass - 1, 0);\n  }\n\n  return (\n    <div\n      className={cn('TreeList-folder', `depth--${depthClass}`, {\n        'is-active': isActive,\n        'is-muted': folder.isMuted,\n        'is-divider': folder.isDivider,\n        'child-active': childActive,\n        'no-toggle': folder.noToggle,\n      })}\n    >\n      <div\n        onClick={e => {\n          if (\n            !_.includes(_.get(e, 'target.className'), 'TreeList-action') &&\n            !folder.hasOwnProperty('href') &&\n            !folder.noToggle &&\n            !isActive\n          ) {\n            handleToggleFolder(path, !isOpen);\n          }\n        }}\n      >\n        {folderInner}\n      </div>\n\n      {isOpen ? (\n        <Items\n          items={folder.children}\n          path={path}\n          currentPath={currentPath}\n          depth={depthClass + 1}\n          handleToggleFolder={handleToggleFolder}\n          parentActive={childActive}\n          parent={folder}\n          folderOpenIcon={folderOpenIcon}\n          folderClosedIcon={folderClosedIcon}\n          checkIsActive={checkIsActive}\n          checkIsChildActive={checkIsChildActive}\n          ui={ui}\n          {...extra}\n        />\n      ) : null}\n    </div>\n  );\n};\n\nconst Items = props => {\n  const {\n    items,\n    depth = 0,\n    parentActive,\n    path,\n    ui,\n    handleToggleFolder,\n    ItemFactory,\n    currentPath,\n    parent = {},\n    folderOpenIcon,\n    folderClosedIcon,\n    checkIsActive,\n    checkIsChildActive,\n  } = props;\n\n  let elem;\n  if (!_.isEmpty(items)) {\n    elem = _.map(items, (item, i) => {\n      if (item.children) {\n        return (\n          <Folder\n            key={i}\n            folder={item}\n            depth={depth}\n            parent={parent}\n            path={path.concat([i])}\n            parentActive={parentActive}\n            handleToggleFolder={handleToggleFolder}\n            ui={ui}\n            ItemFactory={ItemFactory}\n            currentPath={currentPath}\n            folderOpenIcon={folderOpenIcon}\n            folderClosedIcon={folderClosedIcon}\n            checkIsActive={checkIsActive}\n            checkIsChildActive={checkIsChildActive}\n          />\n        );\n      }\n\n      let isActive = item.isActive;\n      if (checkIsActive) {\n        isActive = checkIsActive(item);\n      }\n\n      return (\n        <Item\n          key={i}\n          depth={depth}\n          path={path.concat(i)}\n          parentActive={parentActive}\n          item={item}\n          isActive={isActive}\n          ItemFactory={ItemFactory}\n          currentPath={currentPath}\n          folderOpenIcon={folderOpenIcon}\n          folderClosedIcon={folderClosedIcon}\n        />\n      );\n    });\n  } else {\n    elem = (\n      <div key=\"none\" className=\"TreeList-none\">\n        Nothing to show here.\n      </div>\n    );\n  }\n\n  // if we can't toggle the parent, don't nest the children which makes it seem like we can\n  let depthClass = depth;\n  if (parent.noToggle) {\n    depthClass = Math.max(depthClass - 1, 0);\n  }\n\n  return (\n    <div key=\"items\" className={`TreeList-items depth--${depthClass}`}>\n      {elem}\n    </div>\n  );\n};\n\nclass SortableTreeList extends React.Component {\n  handleToggleFolder = (p, toggled) => {\n    const { updateUi, currentPath = [] } = this.props;\n\n    updateUi('set', currentPath.concat(p, 'toggled'), toggled);\n  };\n\n  render() {\n    const {\n      data = {},\n      ui = {},\n      ItemFactory,\n      actions = [],\n      htmlId = 'tree-list',\n      currentPath = [],\n      viewer,\n      inverted,\n      folderOpenIcon,\n      folderClosedIcon,\n      checkIsActive,\n      checkIsChildActive,\n    } = this.props;\n\n    return (\n      <div\n        id={htmlId}\n        className={cn('TreeList', {\n          'TreeList--viewer': viewer,\n          'is-inverted': inverted,\n        })}\n      >\n        {!_.isEmpty(actions) ? <div className=\"TreeList-topActions\">{actions}</div> : null}\n\n        <Items\n          path={[]}\n          currentPath={currentPath}\n          items={data}\n          handleToggleFolder={this.handleToggleFolder}\n          ItemFactory={ItemFactory}\n          ui={ui}\n          folderOpenIcon={folderOpenIcon}\n          folderClosedIcon={folderClosedIcon}\n          checkIsActive={checkIsActive}\n          checkIsChildActive={checkIsChildActive}\n          parentActive\n        />\n      </div>\n    );\n  }\n}\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`sortable-tree-list-${id}`),\n}))(observer(SortableTreeList));\n","import React from 'react';\nimport cn from 'classnames';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\n\nimport scrollWrapper from '@platform/components/ScrollWrapper/hoc';\nimport SortableTreeList from '@platform/components/SortableTreeList';\n\nimport { HubBranding } from '../HubBranding';\n\nclass HubSidebar extends React.Component {\n  renderOverlay = () => {\n    const { ui, updateUi } = this.props;\n\n    return (\n      <div\n        key=\"overlay\"\n        role=\"presentation\"\n        className={cn('HubSidebar-overlay pin fixed sm:block hidden', {\n          'isMobile-open': ui.showSidebar,\n          'isMobile-closed': !ui.showSidebar,\n        })}\n        onClick={() => {\n          updateUi('unset', 'showSidebar');\n        }}\n      />\n    );\n  };\n\n  renderWrapper = ({ sidebarTree }) => {\n    const {\n      store,\n      className = '',\n      folderOpenIcon = 'chevron down',\n      folderClosedIcon = 'chevron right',\n      ui,\n      updateUi,\n      watchScroll,\n    } = this.props;\n\n    const {\n      checkSidebarItemIsActive,\n      checkSidebarChildIsActive,\n      whitelabel,\n      namespace,\n      activePagePath,\n    } = store;\n    const id = activePagePath;\n\n    if (!sidebarTree || _.isEmpty(sidebarTree)) {\n      return null;\n    }\n\n    let navHeight = 0;\n    let height = '100%';\n    let maxHeight = 'auto';\n    let pinned = false;\n\n    if (watchScroll && this.wrapperElem && !ui.showSidebar) {\n      const pageHeader = document.getElementById('HubPageHeader');\n      if (pageHeader) {\n        navHeight = pageHeader.offsetHeight;\n      }\n\n      const rect = this.wrapperElem.getBoundingClientRect();\n      maxHeight = rect.height;\n      height = window.innerHeight - Math.max(rect.top, navHeight);\n      pinned = rect.top <= navHeight;\n    }\n\n    let sidebarStyles = {\n      maxHeight,\n    };\n\n    if (pinned) {\n      sidebarStyles = {\n        ...sidebarStyles,\n        height,\n        position: 'fixed',\n        left: 'auto',\n        bottom: 0,\n      };\n    }\n\n    return (\n      <div\n        key=\"wrapper\"\n        className={cn(\n          'HubSidebar-wrapper print:hidden flex flex-col items-end bg-grey-lightest border-r border-grey-light',\n          className,\n          {\n            'isMobile-open': ui.showSidebar,\n            'isMobile-closed': !ui.showSidebar,\n          }\n        )}\n        onClick={e => {\n          // TODO (MM): Should close sidebar on route change, not with function below. This would work for folders, etc.\n          // trigger based on class name since the sidebar is made up of only nested div\n          // does not trigger on folder selection since there currently isn't a way to see if it contains children\n          const trigger = _.intersection(e.target.classList, [\n            'SortableTree-itemName',\n            'TreeList-item',\n            'TreeList-itemToken',\n            'SortableTree-itemToken-inner',\n          ]).length;\n\n          if (trigger) {\n            updateUi('unset', 'showSidebar');\n          }\n        }}\n        ref={elem => {\n          this.wrapperElem = elem;\n        }}\n      >\n        {pinned && <div role=\"presentation\" className=\"HubSidebar-spacer\" />}\n\n        <div className={cn('HubSidebar flex-1', className)} style={sidebarStyles}>\n          <div className=\"HubSidebar-inner flex flex-col\">\n            <SortableTreeList\n              id={id}\n              data={_.get(sidebarTree, [0, 'treeData'], {})}\n              currentPath={[activePagePath]}\n              folderOpenIcon={folderOpenIcon}\n              folderClosedIcon={folderClosedIcon}\n              checkIsActive={checkSidebarItemIsActive}\n              checkIsChildActive={checkSidebarChildIsActive}\n              viewer\n            />\n          </div>\n        </div>\n\n        {!whitelabel && <HubBranding whitelabel={whitelabel} namespace={namespace} />}\n      </div>\n    );\n  };\n\n  render() {\n    const { store } = this.props;\n\n    const { sidebarTree } = store;\n\n    if (!sidebarTree || _.isEmpty(sidebarTree)) {\n      return null;\n    }\n\n    return [this.renderOverlay(), this.renderWrapper({ sidebarTree })];\n  }\n}\n\nexport default inject(stores => {\n  const { appStore } = stores;\n\n  // Inject HubSidebar so we can control the mobile sidebar\n  return {\n    ...appStore.injectUi(`Hub`),\n  };\n})(scrollWrapper(observer(HubSidebar, { onResize: true })));\n","import React from 'react';\n\nimport ScrollWrapper from './index';\n\nexport default (Component, opts = {}) => {\n  return props => (\n    <ScrollWrapper\n      {...opts}\n      render={(scrollProps = {}) => <Component {...props} {...scrollProps} />}\n    />\n  );\n};\n","import React from 'react';\nimport cn from 'classnames';\n\nconst PageNotFound = props => {\n  const { title, className } = props;\n\n  return (\n    <div className={cn('HubPageNotFound', className)}>\n      <h1 className=\"HubPageNotFound-title\">{title || 'Page Not Found'}</h1>\n    </div>\n  );\n};\n\nexport default PageNotFound;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport GithubSlugger from 'github-slugger';\nimport { inject, observer } from 'mobx-react';\nimport smoothscroll from 'smoothscroll-polyfill';\n\nimport JsonPathCacheContainer from '@platform/components/JsonPathCacheContainer';\nimport PageLoading from '@platform/components/PageLoading';\n\nimport { registerLogger } from '@platform/utils/logging';\n\nimport { buildTextBlockForPage } from '../../utils';\n\nimport Block from '../Block/viewer';\nimport BlockList from '../BlockList/viewer';\nimport PageSidebar from '../PageSidebar/viewer';\nimport PageNotFound from '../PageNotFound';\nimport BreadCrumbs from '../BreadCrumbs';\n\nimport { HubBranding } from '../HubBranding';\n\nconst log = registerLogger('components', 'HubPage');\n\nconst slugger = new GithubSlugger();\n\nif (typeof window !== 'undefined') {\n  smoothscroll.polyfill();\n}\n\nclass HubPage extends React.Component {\n  static propTypes = {\n    store: PropTypes.object.isRequired,\n  };\n\n  componentDidMount() {\n    const { routerStore } = this.props;\n    routerStore.scrollToHash();\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    slugger.reset();\n  }\n\n  componentDidUpdate({ location: lastLocation }) {\n    const { location, routerStore } = this.props;\n\n    if (location.hash && location.hash !== lastLocation.hash) {\n      // scroll to hash\n      routerStore.scrollToHash(location.hash);\n    } else if (\n      this.wrapper &&\n      (location.pathname !== lastLocation.pathname ||\n        _.get(location.query, 'view') !== _.get(lastLocation.query, 'view'))\n    ) {\n      // Backout if polyfill fails\n      if (!this.wrapper.scrollTo) return;\n\n      // Scroll to top if the route has changed\n      this.wrapper.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  render() {\n    const { store, cache, updateCache } = this.props;\n    const {\n      id,\n      basePath,\n      hasSidebar,\n      crumbs,\n      activePage = {},\n      activeSubpage = {},\n      activeBlocks = [],\n      currentPath,\n      currentParsedPath,\n      currentRelativePath,\n      entityStore = {},\n      whitelabel,\n      namespace,\n    } = store;\n\n    const { isDereferencing } = entityStore;\n\n    let page = activePage.data || {};\n    if (activeSubpage.data) {\n      page = activeSubpage.data || {};\n    }\n\n    log.debug('Render', { page, basePath, currentRelativePath });\n\n    const { $ref } = page.data || {};\n\n    let content;\n    if (_.isEmpty(page.data)) {\n      content = <PageNotFound />;\n    } else if ($ref && isDereferencing) {\n      content = <PageLoading text=\"Building Page\" inverted={false} />;\n    } else if (_.isEmpty(activeBlocks)) {\n      content = (\n        <Block\n          block={buildTextBlockForPage({\n            pagePath: `/${_.trim(_.join(currentPath, '/'), '/')}`,\n            page,\n          })}\n          basePath={basePath}\n          relativePath={currentRelativePath}\n          editor={store}\n          slugger={slugger}\n        />\n      );\n    } else {\n      content = (\n        <BlockList\n          store={store}\n          blocks={activeBlocks}\n          blocksDereferenced={activeBlocks}\n          parentPath={_.concat(currentParsedPath, ['data'])}\n          basePath={basePath}\n          relativePath={currentRelativePath}\n          cache={cache}\n          updateCache={updateCache}\n          slugger={slugger}\n        />\n      );\n    }\n\n    return (\n      <div\n        className={cn('HubMain flex flex-1 relative', {\n          'has-sidebar': hasSidebar,\n        })}\n      >\n        {hasSidebar && <PageSidebar id={id} store={store} />}\n\n        <div\n          className=\"HubPage-wrapper flex-1 bg-white w-full overflow-y-scroll min-h-100\"\n          ref={elem => {\n            this.wrapper = elem;\n          }}\n        >\n          <div className=\"HubPage\">\n            <div className=\"HubPage-inner flex\">\n              <div className=\"HubPage-content flex-1 relative\">\n                {crumbs && crumbs.length > 1 && false && <BreadCrumbs crumbs={crumbs} />}\n                <div className=\"HubPageBody\">{content}</div>\n\n                {!hasSidebar && (\n                  <div className=\"HubPageFooter absolute pin-x pin-b\">\n                    <HubBranding whitelabel={whitelabel} namespace={namespace} centered />\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst container = JsonPathCacheContainer({\n  cacheKeyProp: 'store.id',\n  pathProp: 'store.currentParsedPath',\n  pure: false,\n})(observer(HubPage));\n\nexport default inject((stores, props) => {\n  const { routerStore } = stores;\n\n  return {\n    location: routerStore.location, // pass location in directly for componentDidUpdate comparison\n    routerStore,\n  };\n})(container);\n","import React from 'react';\nimport _ from 'lodash';\nimport Cookies from 'js-cookie';\nimport { inject } from 'mobx-react';\nimport { Dimmer, Loader } from 'semantic-ui-react';\nimport { SiteData, withRouteData } from '@stoplight/react-static';\n\nimport Page from '@platform/format-hubs/components/Page/viewer';\n\nclass HubPage extends React.Component {\n  componentWillMount() {\n    this.store().activate();\n\n    if (this.authRequired()) {\n      window.location.pathname = '/_/login';\n    }\n  }\n\n  componentWillUpdate(nextProps) {\n    const { page } = this.props;\n    const nextPath = _.get(nextProps.page, 'path');\n    const currentPath = _.get(page, 'path');\n\n    if (nextPath !== currentPath) {\n      this.store().deactivate();\n      this.store(nextProps).activate();\n\n      if (this.authRequired()) {\n        window.location.pathname = '/_/login';\n      }\n    }\n  }\n\n  authRequired = () => {\n    // Don't check auth when generating static HTML\n    if (typeof window === 'undefined') return;\n\n    const { isAuthRequired } = this.props;\n    const isLoggedIn = Cookies.get('_session_token');\n\n    return isAuthRequired && !isLoggedIn;\n  };\n\n  store = (props = this.props) => {\n    return this.props.pageStore.lookup(_.get(props.page, 'path'), props);\n  };\n\n  render() {\n    const store = this.store();\n\n    if (!store || this.authRequired()) {\n      // Store will only be null if the page doesn't exist, in which case we are likely redirecting\n      return (\n        <div className=\"flex-1 relative\">\n          <Dimmer active inverted>\n            <Loader content=\"Loading...\" />\n          </Dimmer>\n        </div>\n      );\n    }\n\n    return <Page id={store.id} store={store} />;\n  }\n}\n\nconst InjectedHubPage = inject((stores, props) => {\n  const { routerStore, pageStore } = stores;\n  return {\n    routerStore,\n    pageStore,\n  };\n})(HubPage);\n\nexport default withRouteData(routeData => {\n  return <SiteData {...routeData} component={InjectedHubPage} />;\n});\n","import _ from 'lodash';\n\nimport { getConfigVar } from '@platform/utils/config';\nimport { isExternalLink, cleanSlashes } from '@platform/utils/url';\nimport { routeData } from '@platform/utils/json/routeData';\n\nimport { findFirstSubpagePath } from './viewer';\n\n// This is implemented in the viewer and editor files.\n// All possible options for each block:\n// {\n//   padded: true, // should this block be padded when rendered at the root? this padding is outside the outline (content padding)\n//   paddedInner: true, // should this block have padding inside of its outline (content-inner padding)\n//   outlined: true, // should this block be outlined when rendered at the root? (content border)\n//   standalone: true, // should the block be set apart from it's siblings more than normal?\n//   canvas: true, // should the block be rendered on a background canvas (light grey)\n//   solo: { // solo means this block is being rendered by itself inside of another block\n//     padded: true,\n//     outlined: true,\n//   }\n//   nested: { // nested means this block is being rendered inside of another block\n//     padded: true,\n//     outlined: true,\n//   },\n// }\nexport const blockConfig = {};\n\n// Build up the appropriate classnames to position and outline the content based on\n// the block config properties, and the context with which this block is being\n// rendered (nested, nested by itself, or not nested)\n//\n// Doing it this way makes for more generic css rules, instead of having css rules for every\n// Block--type combo possible.\n//\nexport const buildBlockClassNames = props => {\n  const { block = {}, config: globalConfig, classNames = [], isNested, isSolo, isLast } = props;\n\n  const computedClassNames = _.concat(classNames, _.get(block, 'config.classNames', []));\n\n  if (!globalConfig) {\n    return computedClassNames;\n  }\n\n  const config = Object.assign({}, globalConfig, block.config);\n\n  let isOnCanvas = !isSolo && config.canvas;\n  let isStandalone = config.standalone && !_.get(block, 'config.plain');\n  let isPadded = config.padded && !_.get(block, 'config.plain');\n  let isOutlined = config.outlined;\n  let hasHeader = !_.isEmpty(block.header);\n\n  if (isNested) {\n    if (isSolo) {\n      if (config.solo) {\n        isOnCanvas = _.has(config.solo, 'canvas') ? config.solo.canvas : isOnCanvas;\n        isPadded = hasHeader\n          ? true\n          : _.has(config.solo, 'padded')\n            ? config.solo.padded && !_.get(block, 'config.plain')\n            : isPadded;\n        isOutlined = _.has(config.solo, 'outlined') ? config.solo.outlined : isOutlined;\n      }\n    } else if (config.nested) {\n      isOnCanvas = _.has(config.nested, 'canvas') ? config.nested.canvas : isOnCanvas;\n      isPadded = _.has(config.nested, 'padded')\n        ? config.nested.padded && !_.get(block, 'config.plain')\n        : isPadded;\n      isOutlined = _.has(config.nested, 'outlined') ? config.nested.outlined : isOutlined;\n    }\n  } else if (isSolo) {\n    if (config.solo) {\n      if (_.has(config.solo, 'padded')) {\n        isPadded = config.solo.padded;\n      }\n    }\n  }\n\n  if (isNested) {\n    computedClassNames.push('is-nested');\n  }\n\n  if (isSolo) {\n    computedClassNames.push('is-solo');\n  }\n\n  if (isLast) {\n    computedClassNames.push('is-last');\n  }\n\n  if (isPadded) {\n    computedClassNames.push('is-padded');\n  } else {\n    computedClassNames.push('is-not-padded');\n  }\n\n  if (config.paddedInner) {\n    computedClassNames.push('is-padded-inner');\n  }\n\n  if (isOutlined) {\n    computedClassNames.push('is-outlined');\n  }\n\n  if (isStandalone) {\n    computedClassNames.push('is-standalone');\n  }\n\n  if (isOnCanvas) {\n    computedClassNames.push('is-on-canvas');\n  }\n\n  return computedClassNames;\n};\n\n// replaces nav sections that normally just have ids with relevant data from the pages they point to\nexport const derefNavItems = (items, parsed, options) => {\n  const { autoNav, basePath = '' } = options || {};\n\n  return _.compact(\n    _.map(items, item => {\n      if (!item) return;\n\n      const navItem = _.pick(item, ['path', 'title', 'image']);\n\n      const page = _.get(parsed, ['pages', navItem.path]);\n      if (!page) {\n        return navItem;\n      }\n\n      if (_.isNil(navItem.title) && page.title) {\n        navItem.title = page.title;\n      }\n\n      if (!navItem.image && page.image) {\n        navItem.image = page.image;\n      }\n\n      const { blocks, children } = page.data || {};\n\n      // try to route to the first subpage\n      if (autoNav && _.isEmpty(blocks) && !_.isEmpty(children)) {\n        const subpagePath = findFirstSubpagePath({\n          subpages: children,\n          basePath: navItem.path,\n        });\n\n        if (subpagePath) {\n          navItem.path = subpagePath;\n        }\n      }\n\n      if (basePath) {\n        navItem.path = cleanSlashes(`/${basePath}/${navItem.path}`);\n      }\n\n      return navItem;\n    })\n  );\n};\n\n// Dereferences Hub Nav items and forces Title & Logo\nexport const derefNav = (hub, options) => {\n  const { header, title, logo } = hub || {};\n  const { nav = {} } = header || {};\n  const { basePath = '' } = options || {};\n\n  const homeNav = {\n    title: title || logo ? title : 'Untitled Hub',\n    path: basePath ? cleanSlashes(`/${basePath}`) : '/',\n  };\n\n  if (logo) {\n    homeNav.image = logo;\n  }\n\n  return {\n    left: [homeNav, ...derefNavItems(nav.left, hub, options)],\n    right: derefNavItems(nav.right, hub, options),\n  };\n};\n\nexport const getUrlPathFromJsonPath = (parsed = {}, path = [], urlPath = '') => {\n  const newPath = `${_.get(parsed, path.concat(['route', 'path']), '')}${urlPath}`;\n\n  if (path.length) {\n    return getUrlPathFromJsonPath(parsed, _.dropRight(path, 1), newPath);\n  }\n\n  return newPath;\n};\n\n/*\n  Gets the inferred subpage type.\n  page: no children\n  group: has children\n  link: has :// in the path = absolute url\n  divider: no blocks & no children & no route\n*/\nexport const getInferredSubpageType = _subpage => {\n  const subpage = _subpage || {};\n  const path = _.get(subpage, 'route.path');\n\n  if (isExternalLink(path)) {\n    return 'link';\n  }\n\n  const { data = {} } = subpage;\n  if (_.isEmpty(data.children)) {\n    return 'page';\n  }\n\n  return 'group';\n};\n\n/*\n  Given a page, will create a simple text block, using the page name as the title and then\n  building up a markdown list of links to immediate children.\n\n  This is used if a user somehow gets to a page that has no blocks - we'll just show them\n  some links.\n*/\nexport const buildTextBlockForPage = ({ basePath = '', pagePath = '', page = {} }) => {\n  const block = {\n    type: 'text',\n    header: {\n      title: page.title,\n    },\n    data: '',\n  };\n\n  _.forOwn(_.get(page, 'data.children', []), child => {\n    const childPath = _.get(child, 'route.path');\n    if (childPath) {\n      const fullPath = `/${_.trimStart(`${basePath}${pagePath}${childPath}`, '/')}`;\n      block.data += `- [${child.title || fullPath}](${fullPath})\\n`;\n    }\n  });\n\n  return block;\n};\n\n/**\n * Takes a hub theme object and returns appropriate theme object.\n */\nconst baseTheme = {\n  styles: {\n    base: {},\n  },\n};\n\nexport const computeTheme = ({ theme = {}, defaultTheme = {} }) => {\n  const computedTheme = {};\n  _.merge(computedTheme, baseTheme, defaultTheme, theme);\n  return computedTheme;\n};\n\nexport const buildPreviewUrl = ({ currentFileHash }) => {\n  const parts = _.split(getConfigVar('SL_PREVIEW_HOST'), '://');\n\n  return `${parts[0]}://${currentFileHash}.${parts[1]}`;\n};\n\nconst searchRules = () => {\n  const computeDescription = data => {\n    let description = _.get(data, ['data', 'blocks', 0, 'data'], '');\n    if (typeof description === 'string') {\n      description = _.truncate(description.replace(/<\\/?[^>]+(>|$)|#|\\*/g, ''), { length: 75 });\n    } else {\n      description = undefined;\n    }\n    return description;\n  };\n\n  return {\n    pages: {\n      recursive({ currentPath = [] }) {\n        return currentPath[0] === 'pages' && _.size(currentPath) <= 3;\n      },\n      matcher({ parentPath = [], key, value }) {\n        return (\n          parentPath[0] === 'pages' && _.size(parentPath) === 1 && _.has(value, ['data', 'blocks'])\n        );\n      },\n      dataFactory({ parentPath, key, value }) {\n        return {\n          category: _.get(value, 'title') || key,\n          name: _.get(value, 'title') || key,\n          description: computeDescription(value),\n        };\n      },\n      searchFactory({ value }) {\n        return {\n          title: _.get(value, 'title', ''),\n          path: _.get(value, ['route', 'path'], ''),\n          blocks: _.get(value, ['data', 'blocks'], ''),\n        };\n      },\n    },\n    subpages: {\n      circular: true,\n      recursive: true,\n      matcher({ parentPath = [], key, value }) {\n        return (\n          _.last(parentPath) === 'children' &&\n          !_.includes(parentPath, 'blocks') &&\n          !_.isEmpty(_.get(value, ['data', 'blocks']))\n        );\n      },\n      dataFactory({ spec, parentPath, key, value }) {\n        let category = _.get(spec, _.slice(parentPath, 0, 2).concat('title')) || parentPath[1];\n        if (_.size(parentPath) >= 5) {\n          category = _.get(spec, _.slice(parentPath, 0, -2).concat('title'));\n        }\n\n        return {\n          category,\n          key,\n          parentPath,\n          name: _.get(value, 'title') || _.get(value, 'route.path'),\n          description: computeDescription(value),\n        };\n      },\n      searchFactory({ value }) {\n        return {\n          title: _.get(value, 'title', ''),\n          path: _.get(value, ['route', 'path'], ''),\n          blocks: _.get(value, ['data', 'blocks'], ''),\n        };\n      },\n    },\n  };\n};\n\nexport const searchResults = ({ data, expression }) => {\n  const rdata = routeData(\n    { data, rules: searchRules() },\n    {\n      flatten: true,\n      limit: 10,\n      search: {\n        query: expression,\n      },\n    }\n  );\n\n  let matched = _.flatMap(rdata, rule => {\n    return rule.matched;\n  });\n\n  matched = _.compact(matched);\n\n  let results = [];\n  _.forEach(matched, (match, index) => {\n    // const category = match.data.category;\n    const path = match.path;\n    const title = _.get(match, 'data.name');\n    const description = _.get(match, 'data.description');\n\n    results.push({\n      key: index,\n      path,\n      title,\n      description,\n    });\n  });\n\n  return results;\n};\n\nexport const buildCrumbs = ({ parsedPath = [], hub = {}, buildPath }) => {\n  let crumbs = [];\n\n  const rootPageJsonPath = _.take(parsedPath, 2);\n  const rootPage = _.get(hub, rootPageJsonPath);\n\n  if (!rootPage) return [];\n\n  crumbs.push({\n    content: rootPage.title,\n    to: buildPath(rootPageJsonPath),\n  });\n\n  // need to turn stringified numbers in path to integers\n  _.forEach(parsedPath, (path, index) => {\n    const intPath = _.parseInt(path);\n\n    if (_.isFinite(intPath)) {\n      const subpageJsonPath = _.take(parsedPath, index).concat(intPath);\n      const subpage = _.get(hub, subpageJsonPath);\n\n      const title = _.get(subpage, 'title');\n\n      crumbs.push({\n        content: title || _.get(subpage, 'route.path', ''),\n        to: buildPath(subpageJsonPath),\n      });\n    }\n  });\n\n  return crumbs;\n};\n\nexport const isHubBuilder = () => {\n  return getConfigVar('APP_NAME') === 'hub-builder';\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { BaseMarkdown } from '@platform/utils/markdown';\n\nimport HtmlViewer from '../HtmlViewer';\n\nconst MarkdownViewer = ({\n  value,\n  className = '',\n  innerClassName = '',\n  style = {},\n  options = {},\n  context = {},\n}) => {\n  // Don't render undefined, null or empty objects\n  if (_.isNil(value) || (typeof value === 'object' && _.isEmpty(value))) return null;\n\n  let markdown = value;\n  if (typeof markdown !== 'string') {\n    // Stringify objects and numbers\n    markdown = JSON.stringify(markdown);\n  }\n\n  // Don't render if empty string\n  if (_.isEmpty(markdown)) return null;\n\n  return (\n    <div className={cn('MarkdownViewer markdown-body', className)} style={style}>\n      <HtmlViewer\n        className={innerClassName}\n        value={BaseMarkdown.render(markdown)}\n        options={Object.assign({ anchors: true }, options)}\n        context={context}\n      />\n    </div>\n  );\n};\n\nexport default MarkdownViewer;\n","import MarkdownIt from 'markdown-it';\nimport MarkdownItVideo from 'markdown-it-video';\nimport MarkdownItTaskCheckbox from 'markdown-it-task-checkbox';\n\nimport { registerLogger } from '../logging';\nconst log = registerLogger('utils', 'markdown');\n\nlog.info('Load');\n\nimport Highlight from '../highlight';\n\nconst escapeTitle = unsafe => {\n  if (typeof unsafe !== 'string') {\n    return '';\n  }\n\n  return escapeHref(unsafe)\n    .replace(/&/g, '&amp;');\n};\n\nconst escapeHref = unsafe => {\n  if (typeof unsafe !== 'string') {\n    return '';\n  }\n\n  return unsafe\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/'/g, '&quot;')\n    .replace(/'/g, '&#039;');\n};\n\nexport const BaseMarkdown = new MarkdownIt({\n  html: true,\n  linkify: false,\n  typographer: true,\n  highlight: (str, lang) => {\n    try {\n      const grammar =\n        lang !== undefined\n          ? Highlight.languages[lang] || Highlight.languages.markup\n          : Highlight.languages.markup;\n      return Highlight.highlight(str, grammar, lang);\n    } catch (e) {\n      log.warn('error highlighting code', str, lang, e);\n      return str;\n    }\n  },\n})\n  .use(MarkdownItVideo)\n  .use(MarkdownItTaskCheckbox, {\n    disabled: true,\n    divWrap: false,\n    divClass: 'checkbox',\n    idPrefix: 'cbx_',\n    ulClass: 'task-list',\n    liClass: 'task-list-item',\n  });\n\n/**\n * LINKS\n *\n * 1. Makes absolute links target=\"_blank\"\n * 2. Supports prefixing with a custom basePath + relativePath\n */\n\nconst defaultLinkRender =\n  BaseMarkdown.renderer.rules.link_open ||\n  function(tokens, idx, options, env, self) {\n    return self.renderToken(tokens, idx, options);\n  };\n\nBaseMarkdown.renderer.rules.link_open = (tokens, idx, options, env, self) => {\n  const { basePath, relativePath, query } = env;\n\n  const link = tokens[idx];\n\n  // Sanitize title if exists\n  const titleIndex = link.attrIndex('title');\n  if (titleIndex >= 0) {\n    link.attrs[titleIndex][1] = escapeTitle(link.attrs[titleIndex][1]);\n  }\n\n  // escape and compute the href\n  let isAbsolute = false;\n  const hrefIndex = link.attrIndex('href');\n  if (hrefIndex >= 0) {\n    let href = escapeHref(link.attrs[hrefIndex][1]);\n    isAbsolute = href.charAt(0) !== '/' && href.charAt(0) !== '#';\n\n    if (!isAbsolute && basePath && basePath !== '/') {\n      if (href.charAt(0) !== '#') {\n        href = basePath + href;\n      } else {\n        href = basePath + relativePath + href;\n      }\n    }\n    link.attrs[hrefIndex][1] = href;\n  }\n\n  // Add target=_blank to external links\n  if (isAbsolute) {\n    const targetIndex = link.attrIndex('target');\n    if (targetIndex < 0) {\n      link.attrPush(['target', '_blank']); // add new attribute\n    } else {\n      link.attrs[targetIndex][1] = '_blank'; // replace value of existing attr\n    }\n  }\n\n  // pass token to default renderer.\n  tokens[idx] = link;\n  return defaultLinkRender(tokens, idx, options, env, self);\n};\n\n/**\n * No frills renderer.\n *\n * @param {String} src\n */\nexport const InlineRenderer = src => {\n  return BaseMarkdown.renderInline(src);\n};\n\n/**\n * Core markdown renderer that supports all of our custom elements.\n *\n * @param {String} src\n * @param {*} options\n * @param {*} env\n */\nexport const Renderer = (src, options = {}, env = {}) => {\n  if (!src) {\n    return null;\n  } else if (typeof src !== 'string') {\n    log.warn('Markdown: you must use a string when rendering markdown.', { src, options, env });\n    return null;\n  }\n\n  try {\n    return BaseMarkdown.renderer.render(\n      BaseMarkdown.parse(src, env),\n      Object.assign(BaseMarkdown.options, options),\n      env\n    );\n  } catch (e) {\n    log.error('error rendering', e, { src, options, env });\n  }\n\n  return null;\n};\n","import Prism from 'prismjs/components/prism-core';\n\nimport 'prismjs/components/prism-markup';\nimport 'prismjs/components/prism-markup-templating';\nimport 'prismjs/components/prism-css';\nimport 'prismjs/components/prism-clike';\nimport 'prismjs/components/prism-java';\nimport 'prismjs/components/prism-javascript';\nimport 'prismjs/components/prism-jsx';\nimport 'prismjs/components/prism-json';\nimport 'prismjs/components/prism-bash';\nimport 'prismjs/components/prism-c';\nimport 'prismjs/components/prism-csharp';\nimport 'prismjs/components/prism-cpp';\nimport 'prismjs/components/prism-go';\nimport 'prismjs/components/prism-http';\nimport 'prismjs/components/prism-markdown';\nimport 'prismjs/components/prism-objectivec';\nimport 'prismjs/components/prism-php';\nimport 'prismjs/components/prism-python';\nimport 'prismjs/components/prism-ruby';\nimport 'prismjs/components/prism-swift';\nimport 'prismjs/components/prism-yaml';\n\nimport 'prismjs/plugins/line-highlight/prism-line-highlight.js';\nimport 'prismjs/plugins/line-numbers/prism-line-numbers.js';\n\nexport default Prism;\n","import React, { createElement } from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\n\nimport { faLink } from '@fortawesome/pro-solid-svg-icons/faLink';\n\nimport { HTMLReader, sanitizeConfig } from '@core/lang-html';\nimport { Icon } from '@core/ui';\n\nimport Link from '@platform/utils/router/Link';\nimport { getConfigVar } from '@platform/utils/config';\nimport { isHubBuilder } from '@platform/format-hubs/utils';\n\n// Only allow raw HTML in published Hubs\nconst allowRawHTML = isHubBuilder();\n\nconst htmlReader = new HTMLReader();\n\nconst inputFieldTypes = [\n  'text',\n  'email',\n  'password',\n  'number',\n  'range',\n  'date',\n  'time',\n  'datetime-local',\n  'month',\n  'color',\n  'search',\n  'tel',\n  'url',\n  'week',\n];\n\nconst Anchor = ({ id }) => {\n  const query = typeof window !== 'undefined' ? _.get(window, 'location.search') : '';\n\n  return (\n    <Link href={`${query}#${id}`} aria-hidden=\"true\" className=\"anchor\" name={id} id={id}>\n      <Icon icon={faLink} />\n    </Link>\n  );\n};\n\nconst anchoredComponents = {\n  h1: ({ id, children, ...props }) => {\n    return (\n      <h1 {...props}>\n        <Anchor id={id} />\n        {children}\n      </h1>\n    );\n  },\n\n  h2: ({ id, children, ...props }) => {\n    return (\n      <h2 {...props}>\n        <Anchor id={id} />\n        {children}\n      </h2>\n    );\n  },\n\n  h3: ({ id, children, ...props }) => {\n    return (\n      <h3 {...props}>\n        <Anchor id={id} />\n        {children}\n      </h3>\n    );\n  },\n};\n\nclass Script extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    const { children, ...scriptProps } = this.props;\n\n    let script = document.createElement('script');\n    script = Object.assign(script, scriptProps || {});\n    script.type = 'text/javascript';\n\n    if (children) {\n      script.innerHTML = children;\n    }\n\n    this.instance.appendChild(script);\n  }\n\n  render() {\n    return <div style={{ display: 'none' }} ref={el => (this.instance = el)} />;\n  }\n}\n\nconst HtmlViewer = ({ value, className, context = {}, options = {} } = {}) => {\n  if (_.isNil(value)) return null;\n\n  const classNames = cn('HtmlViewer', className);\n\n  if (typeof window === 'undefined') {\n    return <div className={classNames} dangerouslySetInnerHTML={{ __html: value }} />;\n  }\n\n  const config = {\n    sanitize: !allowRawHTML,\n    react: {\n      createElement,\n      components: {\n        a: ({ children, ...props }) => {\n          const computed = Object.assign({}, props, context.a ? context.a(props) : {});\n\n          return <Link {...computed}>{children}</Link>;\n        },\n        // We need this since rehype-parse doesn't support \"viewBox\"\n        svg: ({ children, ...props }) => {\n          return <svg {...props}>{children}</svg>;\n        },\n        // We need this since rehype-parse doesn't support \"fill-rule\"\n        path: ({ children, ...props }) => {\n          return <path {...props}>{children}</path>;\n        },\n\n        script: ({ children, ...props }) => {\n          return <Script {...props}>{children}</Script>;\n        },\n        // Changing value attribute to defaultValue for input fields to make element controlled\n        input: ({ children, ...props }) => {\n          const { type, value, checked } = props;\n          if (inputFieldTypes.includes(type)) {\n            props.defaultValue = value;\n            delete props.value;\n          }\n          if (['checkbox', 'radio'].includes(type)) {\n            props.defaultChecked = checked;\n            delete props.value;\n          }\n          return <input {...props} />;\n        },\n        textarea: ({ children, ...props }) => {\n          const { value } = props;\n          props.defaultValue = value;\n          delete props.value;\n          return <textarea {...props} />;\n        },\n        select: ({ children, ...props }) => {\n          const { value } = props;\n          props.defaultValue = value;\n          delete props.value;\n          return <select {...props}>{children}</select>;\n        },\n      },\n    },\n  };\n\n  if (options.anchors) {\n    config.react.components = {\n      ...config.react.components,\n      ...anchoredComponents,\n    };\n  }\n\n  return htmlReader.toReact(`<div class=\"${classNames}\">${value}</div>`, config);\n};\n\nexport default HtmlViewer;\n"],"sourceRoot":""}